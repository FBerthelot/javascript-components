{"version":3,"sources":["../src/javascript/i18n/getI18n.js","../src/javascript/reduxStore.js","../src/javascript/theme/theme.js","../src/javascript/router/createOutletHistory.js","../src/javascript/theme/ThemeTester.jsx","../src/javascript/router/OutletRouter.jsx","../src/javascript/router/RouterExample.jsx","../src/javascript/notification/NotificationProvider.jsx","../src/javascript/context/DxContextProvider.jsx","../src/javascript/context/withDxContext.jsx","../src/javascript/dynamicList/SimpleListView.jsx","../src/javascript/dynamicList/DynamicComponentsList.jsx","../src/javascript/i18n/LanguageSwitcher.jsx","../src/javascript/layout/SettingsLayout.jsx","../src/javascript/layout/SearchBar.jsx","../src/javascript/nodesTable/withNodesFromPath.jsx","../src/javascript/mutations/Mutation.jsx","../src/javascript/nodesTable/NodesTableViewMaterial.jsx","../src/javascript/picker/PickerViewMaterial.jsx","../src/javascript/picker/PickerViewMaterialMultiple.jsx","../src/javascript/picker/Picker.jsx","../src/javascript/nodesTable/withPathFromSelection.jsx","../src/javascript/notification/withNotifications.jsx"],"names":["getI18n","options","use","XHR","init","currentLanguage","undefined","contextPath","i18n","debugTool","reducers","store","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","state","arguments","length","action","_","value","key","theme","createMuiTheme","grey","blueGrey","lightBlue","red","deepOrange","green","darkTheme","purple","createOutletHistory","baseHistory","outletName","getPath","path","parts","base","location","pathname","newPath","indexOf","substr","split","p","startsWith","push","getState","newState","extractPath","s","part","initialLocation","listeners","history","createHref","replace","n","go","goBack","goForward","prompt","block","listener","unlisten","listen","event","assign","call","_this","ThemeTester","props","switch","bind","themes","setState","previous","dxContext","setTheme","checked","React","Switch","color","onChange","this","Component","withDxContext","OutletRouter","createHashHistory","outletHistory","outlet","dispose","children","RouterExample","id","to","Route","component","elevation","type","match","params","NotificationProvider","notificationContext","notify","message","closeNotification","Snackbar","notification","open","propTypes","PropTypes","object","isRequired","childContextTypes","DxContextProvider","_this$props","apollo","mui","redux","apolloClient","router","_typeof","currentTheme","client","_props","_state","Children","only","uilang","createElement","I18nextProvider","HashRouter","ApolloProvider","Provider","generateClassName","createGenerateClassName","sheetsRegistry","sheetRegistry","SheetsRegistry","JssProvider","registry","MuiThemeProvider","sheetsManager","Map","WrappedComponent","_extends","context","contextTypes","SimpleListView","components","done","then","reactElements","componentDidMount","DynamicComponentsList","componentCache","data","_ref","ownProps","jcr","safeEval","eval","nodesByQuery","nodes","renderedContent","output","imports","c","concat","getImports","promise","Promise","all","imp","SystemJS","import","m","r","apply","ReactDOM","toConsumableArray","splice","renderComponent","cacheMatch","f","dataComponent","query","gql","_templateObject","graphql","mapResultsToProps","mapPropsToOptions","string","element","LanguageSwitcher","anchorEl","target","lang","changeLanguage","onClick","handleClick","t","Boolean","onClose","handleClose","map","locale","_this2","translate","SettingsLayout","classes","appBar","footer","appBarStyle","className","root","position","style","main","withStyles","palette","background","global","typography","fontFamily","text","secondary","SearchBar","handleChange","onFocus","onBlur","persist","timeout","setTimeout","onChangeFilter","placeholderLabel","Input","focus","rootFocus","input","searchIcon","Search","primary","light","withNodesFromPath","fragments","ViewComponent","_templateObject$2","node","vars","types","queryVariables","MutationExampleView","_templateObject$1","uuid","name","myprop","setPropertyMutation","Date","removeNodeMutation","addNodeMutation","getTime","setProperty","_templateObject2","addNode","_templateObject3","removeNode","_templateObject4","MutationExample","NodesTableViewMaterial","headers","row","func","arrayOf","PickerViewMaterial","pickerEntries","entry","button","selectable","onSelectItem","selected","onOpenItem","opacity","RadioButtonChecked","RadioButtonUnchecked","ListItemText","paddingLeft","depth","spacing","unit","inset","openable","hasChildren","ExpandLess","ExpandMore","array","withTheme","PickerViewMaterialMultiple","CheckBox","CheckBoxOutlineBlank","Picker","_templateObject$3","graphqlComponentProps","objectWithoutProperties","that","openPaths","defaultOpenPaths","prevState","thispath","selectedPaths","defaultSelectedPaths","multiple","select","GraphQLComponent","render","prevProps","prevContext","onSelectionChange","nextProps","nextState","nodesById","index","pickerNode","pageInfo","totalCount","rootNodes","rootNode","hidden","hideRoot","openNodes","forEach","parent","parentIndex","child","selectedNodes","rootFound","reduce","acc","it","rootPaths","rootPath","openableTypes","selectableTypes","oneOfType","shape","reduxStoreId","connect"],"mappings":"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","sourcesContent":["import i18n from 'i18next';\r\nimport XHR from 'i18next-xhr-backend';\r\n// import LanguageDetector from 'i18next-browser-languagedetector/';\r\nimport { reactI18nextModule } from 'react-i18next';\r\n\r\nfunction getI18n(options) {\r\n    options = options || {};\r\n    i18n\r\n        .use(XHR)\r\n        // .use(LanguageDetector)\r\n        // .use(reactI18nextModule) // if not using I18nextProvider\r\n        .init({\r\n            lng: (options.currentLanguage ? options.currentLanguage : undefined),\r\n            fallbackLng: 'en',\r\n            debug: true,\r\n\r\n            interpolation: {\r\n                escapeValue: false, // not needed for react!!\r\n            },\r\n\r\n            // react i18next special options (optional)\r\n            react: {\r\n                wait: false,\r\n                bindI18n: 'languageChanged loaded',\r\n                bindStore: 'added removed',\r\n                nsMode: 'default'\r\n            },\r\n\r\n            backend: {\r\n                loadPath: (options.contextPath ? options.contextPath : '') + '/modules/{{ns}}/javascript/locales/{{lng}}.json',\r\n            }\r\n        });\r\n    return i18n;\r\n}\r\n\r\n\r\nexport { getI18n };","import {createStore} from 'redux'\r\nimport * as _ from \"lodash\";\r\n\r\nconst reducers = {};\r\n\r\nconst store = function () {\r\n    let debugTool;\r\n    if (typeof window !== 'undefined') {\r\n        debugTool = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\r\n            name: \"DX Redux\",\r\n            instanceId: \"dx\"\r\n        });\r\n    }\r\n\r\n    return createStore((state = {}, action) => _.mapValues(reducers, (value, key) => value(state[key], action)), debugTool);\r\n}();\r\n\r\nconst resetStateReducer = function(state, action) {\r\n    if (action.type === 'RESET_STATE') {\r\n        return undefined;\r\n    }\r\n    return state;\r\n};\r\n\r\nexport {reducers, store, resetStateReducer};\r\n","import {createMuiTheme} from 'material-ui';\r\nimport {blueGrey, lightBlue, red, grey, purple, green, deepOrange} from 'material-ui/colors/index'\r\n\r\n// All the following keys are optional.\r\n// We try our best to provide a great default value.\r\nlet theme = createMuiTheme({\r\n    palette: {\r\n        background: {\r\n            global: grey[200],\r\n        },\r\n        contrastThreshold: 3.1,\r\n        tonalOffset: 0.2,\r\n        primary: {\r\n            main: blueGrey[600],\r\n        },\r\n        secondary: {\r\n            main: lightBlue[600],\r\n        },\r\n        error: {\r\n            main: red[400],\r\n        },\r\n        publish: {\r\n            main: deepOrange[500],\r\n        },\r\n        enabled: {\r\n            main: green[400],\r\n        },\r\n        delete: {\r\n            main: red[600],\r\n        }\r\n    },\r\n    overrides: {\r\n        MuiButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiTableCell: {\r\n            body: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiIconButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiCheckbox: {\r\n            default: {\r\n                color: \"inherit\",\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nlet darkTheme = createMuiTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        background: {\r\n            global: grey[900]\r\n        },\r\n        contrastThreshold: 3.0,\r\n        tonalOffset: 0.2,\r\n        primary: {\r\n            main: purple[500]\r\n        },\r\n        secondary: {\r\n            main: green[400]\r\n        },\r\n        error: {\r\n            main: red[200]\r\n        },\r\n        publish: {\r\n            main: deepOrange[500],\r\n        },\r\n        enabled: {\r\n            main: green[400],\r\n        },\r\n        delete: {\r\n            main: red[600],\r\n        }\r\n    },\r\n    overrides: {\r\n        MuiButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiTableCell: {\r\n            body: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiIconButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiCheckbox: {\r\n            default: {\r\n                color: \"inherit\",\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n\r\nexport {theme, darkTheme}\r\n","import * as _ from \"lodash\";\r\n\r\nfunction createOutletHistory(baseHistory, outletName) {\r\n\r\n    const getPath = (path) => {\r\n        let parts = [];\r\n        let base = baseHistory.location.pathname;\r\n        let newPath = outletName + ':' + path;\r\n        if (base.indexOf('(') > -1) {\r\n            base = base.substr(base.indexOf('(')+1);\r\n            base = base.substr(0,base.indexOf(')'));\r\n            parts = base.split('//')\r\n            parts = _.map(parts, (p)=> (p.startsWith(outletName + ':') ? newPath : p));\r\n        }\r\n        if (parts.indexOf(newPath) === -1) {\r\n            parts.push(newPath);\r\n        }\r\n        return '/('+ _.join(parts,'//') + ')';\r\n    };\r\n\r\n    const getState = function (state) {\r\n        let newState;\r\n        if (state) {\r\n            newState = baseHistory.location.state ? baseHistory.location.state : {};\r\n            newState['router_' + outletName] = state;\r\n        } else if (baseHistory.location.state) {\r\n            newState = baseHistory.location.state;\r\n            delete newState['router_' + outletName]\r\n        }\r\n        return newState;\r\n    };\r\n\r\n    const extractPath = function(base) {\r\n        if (base.indexOf('(') > -1) {\r\n            base = base.substr(base.indexOf('(') + 1);\r\n            base = base.substr(0, base.indexOf(')'));\r\n            let parts = base.split('//')\r\n            let s = outletName + ':';\r\n            let part = _.find(parts, (p)=> (p.startsWith(s)));\r\n            if (part) {\r\n                return part.substr(s.length)\r\n            }\r\n        }\r\n        return '';\r\n    };\r\n\r\n    let initialLocation = _.clone(baseHistory.location);\r\n    initialLocation.pathname = extractPath(initialLocation.pathname);\r\n\r\n    let listeners = [];\r\n\r\n    const history = {\r\n        length: baseHistory.length,\r\n        action: baseHistory.action,\r\n        location: initialLocation,\r\n        createHref: (location) => {\r\n            return baseHistory.createHref({pathname:getPath(location.pathname)});\r\n        },\r\n        push: (path, state) => {\r\n            return baseHistory.push(getPath(path),getState(state));\r\n        },\r\n        replace: (path, state) => {\r\n            baseHistory.replace(getPath(path),getState(state));\r\n        },\r\n        go: (n) => {\r\n            baseHistory.go(n)\r\n        },\r\n        goBack: () => {\r\n            baseHistory.goBack()\r\n        },\r\n        goForward: () => {\r\n            baseHistory.goForward()\r\n        },\r\n        block:(prompt) => {\r\n            return baseHistory.block(prompt)\r\n        },\r\n        listen: (listener) => {\r\n            listeners.push(listener);\r\n            return () => {\r\n                _.pull(listeners, listener);\r\n            }\r\n        },\r\n        dispose: () => {\r\n            unlisten();\r\n        }\r\n    };\r\n\r\n    const unlisten = baseHistory.listen( (event) => {\r\n        let path = extractPath(event.pathname);\r\n        let state;\r\n        if (event.state && event.state['router_' + outletName]) {\r\n            state = event.state['router_' + outletName];\r\n        }\r\n        if (history.location.pathname !== path || history.location.state !== state) {\r\n            Object.assign(history.location, event);\r\n            history.location.pathname = path;\r\n            history.location.state = state;\r\n            _.each(listeners, (listener) => listener.call(this,history.location))\r\n        }\r\n    });\r\n\r\n    // unlisten when not used anymore !\r\n\r\n    return history\r\n}\r\n\r\nexport { createOutletHistory }","import React from 'react';\r\nimport {withDxContext} from \"../context\";\r\nimport {Switch} from 'material-ui'\r\nimport {theme, darkTheme} from \"./theme\";\r\n\r\nclass ThemeTester extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.switch = this.switch.bind(this);\r\n\r\n        this.themes = [theme, darkTheme];\r\n        this.state = {\r\n            checked:false\r\n        };\r\n    }\r\n\r\n    switch() {\r\n        this.setState((previous) => {\r\n            this.props.dxContext.setTheme(previous.checked ? theme : darkTheme);\r\n            return {\r\n                checked: !previous.checked\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return <Switch color=\"default\" onChange={this.switch} checked={this.state.checked}/>\r\n    }\r\n\r\n}\r\n\r\n\r\nThemeTester = withDxContext()(ThemeTester);\r\n\r\nexport {ThemeTester}","import React from 'react';\r\n\r\nimport {createHashHistory} from \"history\";\r\nimport {createOutletHistory} from \"./createOutletHistory\"\r\nimport {Router} from 'react-router'\r\n\r\nclass OutletRouter extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        let baseHistory = createHashHistory();\r\n        this.outletHistory = createOutletHistory(baseHistory, props.outlet);\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.outletHistory.dispose();\r\n    }\r\n\r\n    render() {\r\n        return (<Router history={this.outletHistory}>{this.props.children}</Router>)\r\n    }\r\n}\r\n\r\nexport { OutletRouter };","import React from 'react';\r\nimport {OutletRouter as Router} from './OutletRouter'\r\nimport {Link, Route} from 'react-router-dom'\r\nimport {Paper, Typography} from 'material-ui'\r\nclass RouterExample extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n\r\n        let Test1 = props => (\r\n            <Paper elevation={4}>\r\n                <Typography type=\"headline\" component=\"h3\">\r\n                    Page 1\r\n                </Typography>\r\n                <Typography component=\"p\">\r\n                    Param = {props.match.params.value}\r\n                </Typography>\r\n            </Paper>\r\n        );\r\n        let Test2 = props => (\r\n            <Paper elevation={4}>\r\n                <Typography type=\"headline\" component=\"h3\">\r\n                    Page 2\r\n                </Typography>\r\n            </Paper>\r\n\r\n        );\r\n        let Test3 = props => (\r\n            <Paper elevation={4}>\r\n                <Typography type=\"headline\" component=\"h3\">\r\n                    Page 3\r\n                </Typography>\r\n            </Paper>\r\n        );\r\n\r\n        return (<Router outlet={this.props.id}>\r\n            <div>\r\n                <Link to={'/test1/value1'}>test1/value1</Link>\r\n                <Link to={'/test1/value2'}>Test1/value2</Link>\r\n                <Link to={'/test2'}>test2</Link>\r\n                <Link to={'/test3'}>test3</Link>\r\n\r\n                <Route path={'/test1/:value'} component={Test1}/>\r\n                <Route path={'/test2'} component={Test2}/>\r\n                <Route path={'/test3'} component={Test3}/>\r\n            </div>\r\n        </Router>);\r\n    }\r\n\r\n}\r\n\r\nexport {RouterExample}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Component } from \"react\";\r\nimport {Snackbar} from \"material-ui\";\r\n\r\nclass NotificationProvider extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let {notificationContext} = this.props;\r\n\r\n        this.state = {\r\n            notification: {\r\n                message: \"\",\r\n                open: false\r\n            }\r\n        };\r\n\r\n        notificationContext.notify = (message) => {\r\n            this.setState({\r\n                notification: {\r\n                    message: message,\r\n                    open:true\r\n                }\r\n            });\r\n        };\r\n\r\n        notificationContext.closeNotification = () => {\r\n            this.setState({\r\n                notification: {\r\n                    message: '',\r\n                    open: false\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n    getChildContext() {\r\n        return {\r\n            notificationContext: this.props.notificationContext\r\n        };\r\n    }\r\n\r\n    render() {\r\n        // TODO make it configurable\r\n        return <div>\r\n            {this.props.children}\r\n\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                autoHideDuration={5000}\r\n                onClose={this.props.notificationContext.closeNotification}\r\n                open={this.state.notification.open}\r\n                SnackbarContentProps={{\r\n                    'aria-describedby': 'message-id',\r\n                }}\r\n                message={<span id=\"message-id\">{this.state.notification.message}</span>}\r\n            />\r\n        </div>;\r\n    }\r\n}\r\n\r\nNotificationProvider.propTypes = {\r\n    notificationContext: PropTypes.object.isRequired\r\n};\r\n\r\nNotificationProvider.childContextTypes = {\r\n    notificationContext: PropTypes.object.isRequired\r\n};\r\n\r\nexport {NotificationProvider}","import React from 'react';\r\nimport {MuiThemeProvider} from 'material-ui';\r\nimport {createGenerateClassName} from 'material-ui/styles/index';\r\nimport {getI18n} from \"../i18n/getI18n\";\r\nimport {store} from '../reduxStore';\r\nimport {theme} from '../theme'\r\nimport {client} from '@jahia/apollo-dx';\r\nimport {ApolloProvider} from 'react-apollo';\r\nimport {Provider} from 'react-redux'\r\nimport {I18nextProvider} from 'react-i18next'\r\nimport {HashRouter} from 'react-router-dom'\r\nimport {OutletRouter} from '../router'\r\nimport PropTypes from 'prop-types';\r\nimport { SheetsRegistry, JssProvider } from 'react-jss';\r\nimport {NotificationProvider} from \"../notification/NotificationProvider\";\r\n\r\nimport * as _ from \"lodash\";\r\n\r\nclass DxContextProvider extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let {dxContext, children, i18n, apollo, redux, mui, router, apolloClient} = this.props;\r\n        let state = {};\r\n        if (mui) {\r\n            if (typeof mui === 'object') {\r\n                state.currentTheme = mui;\r\n            } else {\r\n                state.currentTheme = theme;\r\n            }\r\n            dxContext.setTheme = (theme) => {\r\n                // theTheme = _.merge({}, theme, this.state.theme);\r\n                this.setState({\r\n                    currentTheme: theme\r\n                });\r\n            };\r\n        }\r\n\r\n        if (dxContext.apolloClient) {\r\n            state.apolloClient = dxContext.apolloClient;\r\n        } else if (apolloClient) {\r\n            state.apolloClient = apolloClient;\r\n        } else if (apollo) {\r\n            let options = {contextPath:dxContext.contextPath};\r\n            if (typeof apollo === 'object') {\r\n                Object.assign(options, apollo)\r\n            }\r\n            state.apolloClient = client(options);\r\n        }\r\n\r\n        this.state = state;\r\n    }\r\n\r\n    getChildContext() {\r\n        return {dxContext: this.props.dxContext};\r\n    }\r\n\r\n    render() {\r\n        let {dxContext, children, i18n, apollo, redux, mui, router} = this.props;\r\n        let {currentTheme, apolloClient} = this.state;\r\n\r\n        let Component = React.Children.only(children);\r\n        if (i18n) {\r\n            let options = {currentLanguage:dxContext.uilang, contextPath:dxContext.contextPath};\r\n            if (typeof i18n === 'object') {\r\n                Object.assign(options, i18n)\r\n            }\r\n            Component = React.createElement(I18nextProvider, {i18n:getI18n(options)}, Component);\r\n        }\r\n        if (router) {\r\n            let router = HashRouter;\r\n            let options = {};\r\n            if (typeof router === 'object') {\r\n                if (router.type === 'outlet') {\r\n                    router = OutletRouter;\r\n                    options.outlet = router.outlet;\r\n                }\r\n            }\r\n            Component = React.createElement(HashRouter, options, Component);\r\n        }\r\n        if (apolloClient) {\r\n            Component = React.createElement(ApolloProvider, {client:apolloClient}, Component);\r\n        }\r\n        if (redux) {\r\n            Component = React.createElement(Provider, {store:store}, Component);\r\n        }\r\n\r\n        if (currentTheme) {\r\n            let generateClassName = dxContext.generateClassName ? dxContext.generateClassName : createGenerateClassName();\r\n            let sheetsRegistry = dxContext.sheetRegistry ? dxContext.sheetRegistry : new SheetsRegistry();\r\n            Component = React.createElement(JssProvider, {registry: sheetsRegistry,  generateClassName:generateClassName}, React.createElement(MuiThemeProvider, {theme: currentTheme, sheetsManager:new Map()}, Component));\r\n            // } else {\r\n            //     Component = React.createElement(MuiThemeProvider, {theme: currentTheme}, Component);\r\n            // }\r\n        }\r\n\r\n        // add notification\r\n        Component = React.createElement(NotificationProvider, {notificationContext:{}}, Component);\r\n\r\n        return Component;\r\n    }\r\n}\r\n\r\nDxContextProvider.childContextTypes = {\r\n    dxContext: PropTypes.object\r\n};\r\n\r\nexport {DxContextProvider}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction withDxContext() {\r\n    return (WrappedComponent) => {\r\n        let Component = class extends React.Component {\r\n            render() {\r\n                return (<WrappedComponent dxContext={this.context.dxContext} {...this.props} />)\r\n            }\r\n        }\r\n\r\n        Component.contextTypes = {\r\n            dxContext: PropTypes.object\r\n        };\r\n\r\n        return Component\r\n    }\r\n}\r\n\r\nexport { withDxContext }","import React from 'react';\r\n\r\nclass SimpleListView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            reactElements: []\r\n        };\r\n    }\r\n\r\n    // todo should move this code dynamicList itself\r\n    componentDidMount() {\r\n        if (this.props.components && !this.done) {\r\n            this.props.components.then((reactElements) => {\r\n                this.done = true;\r\n                this.setState({reactElements: reactElements});\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.componentDidMount();\r\n    }\r\n\r\n    render() {\r\n        return this.done ? (<div>{this.state.reactElements}</div>) : (<div/>);\r\n    }\r\n}\r\n\r\nexport {SimpleListView}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {SimpleListView} from './SimpleListView'\r\nimport {graphql} from 'react-apollo';\r\nimport gql from \"graphql-tag\";\r\nimport * as _ from \"lodash\";\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\nimport PropTypes from 'prop-types';\r\n\r\nclass DynamicComponentsList extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.componentCache = [];\r\n    }\r\n\r\n    mapResultsToProps({data, ownProps}) {\r\n        let components = [];\r\n\r\n        let jcr = data.jcr;\r\n        let safeEval = eval;\r\n        if (jcr && jcr.nodesByQuery) {\r\n            components = _.map(_.flatMap(jcr.nodesByQuery.nodes, \"children.nodes\"),(n)=> safeEval(\"(\" + n.renderedContent.output + \")\"));\r\n        }\r\n\r\n        let imports = [];\r\n        _.each(components, c => {\r\n            imports = imports.concat(c.getImports())\r\n        });\r\n        let promise;\r\n        if (imports.length > 0) {\r\n            promise = Promise.all(_.map(imports, (imp) => SystemJS.import(imp))).then(m => {\r\n                let reactElements = _.map(components, (c) => {\r\n                    let s = c.getImports().length;\r\n                    let r = c.createElement(React, ReactDOM, ...m);\r\n                    m.splice(s);\r\n                    return r;\r\n                });\r\n                return reactElements;\r\n            });\r\n        }\r\n\r\n        return {\r\n            ...ownProps,\r\n            components: promise,\r\n        };\r\n    }\r\n\r\n    mapPropsToOptions(props) {\r\n        return {\r\n            variables : {\r\n                query: \"select * from [reactnt:componentsFolder] where [react:id]='\" + props.id + \"'\"\r\n            }\r\n        };\r\n    }\r\n\r\n    render() {\r\n        let renderComponent = this.props.renderComponent;\r\n\r\n        let cacheMatch = _.find(this.componentCache, (f) => f.renderComponent === renderComponent);\r\n        let Component;\r\n        if (cacheMatch) {\r\n            Component = cacheMatch.dataComponent;\r\n        } else {\r\n            let query = gql`\r\n                query ComponentsQuery($query:String!) {\r\n                    jcr {\r\n                        nodesByQuery(query:$query) {\r\n                            nodes {\r\n                                name\r\n                                path\r\n                                primaryNodeType {\r\n                                    name\r\n                                }\r\n                                children {\r\n                                    nodes {\r\n                                        name\r\n                                        path\r\n                                        primaryNodeType {\r\n                                            name\r\n                                        }\r\n                                        renderedContent(templateType:\"js\", view:\"react\") {\r\n                                            output\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }`;\r\n\r\n            Component = graphql(query, {\r\n                props: this.mapResultsToProps,\r\n                options: this.mapPropsToOptions\r\n            })(renderComponent || SimpleListView);\r\n\r\n            this.componentCache.push({renderComponent: renderComponent, dataComponent: Component});\r\n        }\r\n\r\n        return (<Component {...this.props} />);\r\n    }\r\n}\r\n\r\nDynamicComponentsList.propTypes = {\r\n    /**\r\n     * Id of the \"componentsFolder\" to look for\r\n     */\r\n    id: PropTypes.string.isRequired,\r\n\r\n    /**\r\n     * Component to use to do the rendering\r\n     */\r\n    renderComponent: PropTypes.element\r\n}\r\n\r\nexport {DynamicComponentsList};\r\n","import React from 'react';\r\nimport {Button, Menu, MenuItem} from 'material-ui';\r\nimport {translate} from 'react-i18next';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LanguageSwitcher extends React.Component {\r\n\r\n    constructor(props,context) {\r\n        super(props,context);\r\n        this.state = {\r\n            anchorEl: null,\r\n        };\r\n    }\r\n\r\n    handleClick(event) {\r\n        this.setState({anchorEl: event.target});\r\n    }\r\n\r\n    handleClose(lang) {\r\n        this.setState({anchorEl: null});\r\n        if (lang) {\r\n            this.context.i18n.changeLanguage(lang);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let availableLocales = ['fr', 'en'];\r\n\r\n        return (<div>\r\n            <Button onClick={this.handleClick.bind(this)}\r\n            >{this.props.t('label.languages')}</Button>\r\n            <Menu open={Boolean(this.state.anchorEl)} onClose={this.handleClose.bind(this, null)}\r\n                  anchorEl={this.state.anchorEl}>\r\n                {availableLocales.map((locale) => (\r\n                    <MenuItem onClick={this.handleClose.bind(this, locale)} key={locale}\r\n                              value={locale}>{locale}</MenuItem>))}\r\n            </Menu>\r\n        </div>);\r\n    }\r\n}\r\n\r\nLanguageSwitcher.contextTypes = {\r\n    i18n: PropTypes.object\r\n};\r\n\r\nLanguageSwitcher = translate('react-dxcomponents')(LanguageSwitcher);\r\n\r\n\r\nexport {LanguageSwitcher}\r\n","import React from 'react';\r\nimport {AppBar, Toolbar, Typography, withStyles} from 'material-ui';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.global\r\n    },\r\n    main: {\r\n        minHeight: 'calc(100% - 96px)',\r\n        marginTop: 64,\r\n        padding: 1\r\n    },\r\n    footer: {\r\n        fontSize: '14px',\r\n        fontFamily: theme.typography.fontFamily,\r\n        fontWeight: 300,\r\n        padding: \"8px\",\r\n        textAlign: \"center\",\r\n        color: theme.palette.text.secondary\r\n    },\r\n    appBar: {\r\n        transition: \"all 200ms ease-in-out\"\r\n    }\r\n});\r\n\r\n\r\nclass SettingsLayout extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        let { classes, appBar, children, footer, appBarStyle } = this.props;\r\n        return (\r\n            <section className={classes.root} >\r\n                <AppBar position=\"fixed\" classes={{root:classes.appBar}} style={appBarStyle}>\r\n                    {appBar}\r\n                </AppBar>\r\n                <section className={classes.main}>\r\n                    {children}\r\n                </section>\r\n                <footer className={classes.footer}>\r\n                    {footer}\r\n                </footer>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nSettingsLayout.propTypes = {\r\n    appBar: PropTypes.element,\r\n    footer: PropTypes.string\r\n};\r\n\r\nSettingsLayout = withStyles(styles)(SettingsLayout);\r\n\r\nexport {SettingsLayout};","import React from 'react';\r\nimport {Input, InputAdornment, withStyles} from 'material-ui';\r\nimport {Search} from 'material-ui-icons';\r\nimport {translate} from 'react-i18next';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: '0',\r\n        color : 'inherit',\r\n        backgroundColor : theme.palette.primary.light,\r\n        width: '720px',\r\n        height: '44px',\r\n        lineHeight: '40px',\r\n        borderRadius: '3px',\r\n        fontWeight: '200'\r\n    },\r\n    rootFocus: {\r\n        margin: '0',\r\n        color: theme.palette.text.secondary,\r\n        backgroundColor : '#fff',\r\n        width: '720px',\r\n        height: '44px',\r\n        lineHeight: '40px',\r\n        borderRadius: '3px',\r\n        fontWeight: '100',\r\n        boxShadow: \"0 1px 8px 0 rgba(0, 0, 0, 0.4)\",\r\n        // '& $input': {\r\n        //     width: '300px'\r\n        // }\r\n    },\r\n    input: {\r\n        transitionProperty: 'width',\r\n        transitionDuration: '300ms',\r\n        transitionTimingFunction: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n        transitionDelay: '0ms',\r\n\r\n    },\r\n    searchIcon: {\r\n        'marginTop': 'auto',\r\n        'marginBottom': 'auto',\r\n        'paddingLeft': '14px',\r\n        'opacity': '0.87'\r\n    }\r\n});\r\n\r\nclass SearchBar extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.onFocus = this.onFocus.bind(this);\r\n        this.onBlur = this.onBlur.bind(this);\r\n        this.state = {\r\n            focus: false\r\n        }\r\n    }\r\n\r\n    handleChange(event) {\r\n        // Let the handler deal with the change only when the user has paused changing the filter text for a second.\r\n        event.persist();\r\n        if (this.timeout) {\r\n            clearTimeout(this.timeout);\r\n        }\r\n        this.timeout = setTimeout(function() {\r\n            this.props.onChangeFilter(event.target.value)\r\n        }.bind(this), 1000);\r\n    }\r\n\r\n    onFocus() {\r\n        this.setState({\r\n            focus: true\r\n        });\r\n        this.props.onFocus();\r\n    }\r\n\r\n    onBlur() {\r\n        this.setState({\r\n            focus: false\r\n        });\r\n        this.props.onBlur();\r\n    }\r\n\r\n    render() {\r\n\r\n        const { classes,t, placeholderLabel } = this.props;\r\n\r\n        return (\r\n            <Input classes={{root: (this.state.focus ? classes.rootFocus : classes.root), input: classes.input}}\r\n                   onChange={this.handleChange}\r\n                   onBlur={this.onBlur}\r\n                   onFocus={this.onFocus}\r\n                   disableUnderline={true}\r\n                   type=\"text\"\r\n                   placeholder={placeholderLabel || t('label.searchPlaceholder')}\r\n                   startAdornment={<InputAdornment classes={{root: classes.searchIcon}} position=\"start\"><Search/></InputAdornment>}\r\n                   style={this.props.style}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nSearchBar = withStyles(styles)(translate('react-dxcomponents')(SearchBar));\r\n\r\nexport {SearchBar};","import React from 'react';\r\nimport {graphql} from 'react-apollo';\r\nimport gql from \"graphql-tag\";\r\nimport * as _ from \"lodash\";\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\n\r\nfunction withNodesFromPath(fragments) {\r\n    return (ViewComponent) => {\r\n        // GraphQL maps\r\n        let mapResultsToProps = ({data, ownProps}) => {\r\n            let nodes = [];\r\n\r\n            let jcr = data.jcr;\r\n\r\n            if (jcr) {\r\n                if (jcr.node) {\r\n                    nodes = jcr.node.children.nodes;\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...ownProps,\r\n                nodes: nodes,\r\n            };\r\n        };\r\n\r\n        let mapPropsToOptions = (props) => {\r\n            let vars = {\r\n                path: props.path,\r\n                types: props.types,\r\n            };\r\n            if (props.queryVariables) {\r\n                _.assign(vars, props.queryVariables);\r\n            }\r\n\r\n            return {\r\n                variables: vars,\r\n                skip: !props.path\r\n            }\r\n        };\r\n\r\n        let query = gql`\r\n            query NodesQuery($path:String!, $types:[String]!) {\r\n                jcr {\r\n                    node:nodeByPath(path: $path) {\r\n                        path\r\n                        uuid\r\n                        name\r\n                        children(typesFilter:{types:$types}) {\r\n                            nodes {\r\n                                path\r\n                                uuid\r\n                                name\r\n                                ... node\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }`;\r\n\r\n        replaceFragmentsInDocument(query, fragments);\r\n\r\n        return graphql(query, {\r\n            props: mapResultsToProps,\r\n            options: mapPropsToOptions\r\n        })(ViewComponent);\r\n    }\r\n}\r\n\r\nexport {withNodesFromPath};\r\n","import React, {Component} from 'react';\r\nimport {ApolloProvider, graphql} from 'react-apollo';\r\nimport gql from 'graphql-tag';\r\nimport {withNodesFromPath} from \"../nodesTable/withNodesFromPath\";\r\nimport {Button, Table, TableBody, TableCell, TableHead, TableRow} from 'material-ui';\r\n\r\n\r\nclass MutationExampleView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let RenderComponent = (props) => (<Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Name</TableCell>\r\n                        <TableCell>Value</TableCell>\r\n                        <TableCell>Update</TableCell>\r\n                        <TableCell>Delete</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {props.nodes ? props.nodes.map(node =>\r\n                        <TableRow key={node.uuid}>\r\n                            <TableCell>{node.name}</TableCell>\r\n                            <TableCell>{node.myprop.value}</TableCell>\r\n                            <TableCell><Button onClick={() => this.props.setPropertyMutation({\r\n                                variables: {\r\n                                    path: node.path,\r\n                                    value: (\"test:\" + new Date())\r\n                                },\r\n                                refetchQueries: [\"NodesQuery\"]\r\n                                // update: update\r\n                            })}>Update</Button></TableCell>\r\n                            <TableCell><Button onClick={() => this.props.removeNodeMutation({\r\n                                variables: {\r\n                                    path: node.path,\r\n                                },\r\n                                refetchQueries: [\"NodesQuery\"]\r\n                            })}>Delete</Button></TableCell>\r\n                        </TableRow>\r\n                    ) : []}\r\n                </TableBody>\r\n            </Table>\r\n        );\r\n\r\n        this.Component = withNodesFromPath([{\r\n            applyFor: \"node\",\r\n            gql: gql`fragment Test on JCRNode {\r\n                myprop:property(name:\"myprop\") {\r\n                    value\r\n                }\r\n            }`\r\n        }])(RenderComponent);\r\n    }\r\n\r\n\r\n    render() {\r\n        let Component = this.Component;\r\n        return (\r\n            <div>\r\n                <Button onClick={() => this.props.addNodeMutation({\r\n                    variables: {\r\n                        name: (\"name-\" + (new Date().getTime())),\r\n                        value: (\"test:\" + new Date())\r\n                    },\r\n                    refetchQueries: [\"NodesQuery\"]\r\n                })}>New</Button>\r\n\r\n                <Component path={\"/\"} types={[\"nt:unstructured\"]}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst setProperty = gql`\r\n    mutation setProperty($value:String,$path:String!) {\r\n        jcr {\r\n            mutateNode(pathOrId:$path) {\r\n                mutateProperty(name:\"myprop\") {\r\n                    setValue(value:$value)\r\n                }\r\n                node {\r\n                    path\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst addNode = gql`\r\n    mutation addNode($value:String, $name:String!) {\r\n        jcr {\r\n            addNode(parentPathOrId:\"/\",name:$name,primaryNodeType:\"nt:unstructured\") {\r\n                mutateProperty(name:\"myprop\") {\r\n                    setValue(value:$value)\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst removeNode = gql`\r\n    mutation removeNode($path:String!) {\r\n        jcr {\r\n            deleteNode(pathOrId:$path)\r\n        }\r\n    }\r\n`;\r\n\r\nlet MutationExample = graphql(setProperty, {name: 'setPropertyMutation'})(\r\n    graphql(addNode, {name: 'addNodeMutation'})(\r\n        graphql(removeNode, {name: 'removeNodeMutation'})(MutationExampleView)));\r\n\r\nexport {MutationExample};","import React from 'react';\r\nimport {Table, TableBody, TableCell, TableHead, TableRow} from 'material-ui';\r\nimport PropTypes from 'prop-types';\r\n\r\nlet NodesTableViewMaterial = function (props) {\r\n\r\n    let headers = props['headers'] ? props['headers'] : () => (\r\n        <TableRow>\r\n            <TableCell>Name</TableCell>\r\n        </TableRow>);\r\n\r\n    let row = props['row'] ? props['row'] : (node) => (<TableRow key={node.path}>\r\n            <TableCell>{props['textRenderer'] ? props['textRenderer'].call(this, node) : node.name}</TableCell>\r\n        </TableRow>);\r\n\r\n    return (<Table>\r\n                <TableHead>\r\n                    {headers()}\r\n                </TableHead>\r\n                <TableBody>\r\n                    {props.nodes ? props.nodes.map(row) : []}\r\n                </TableBody>\r\n            </Table>)\r\n};\r\n\r\nNodesTableViewMaterial.propTypes = {\r\n    headers: PropTypes.func,\r\n    row: PropTypes.func,\r\n    textRenderer: PropTypes.func,\r\n    nodes: PropTypes.arrayOf(PropTypes.object)\r\n};\r\n\r\nexport {NodesTableViewMaterial};","import React from 'react';\r\nimport {IconButton, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, withTheme} from 'material-ui';\r\nimport {ExpandLess, ExpandMore, RadioButtonChecked, RadioButtonUnchecked} from 'material-ui-icons'\r\nimport PropTypes from 'prop-types';\r\n\r\nlet PickerViewMaterial = function (props) {\r\n    return (<List>\r\n        {props.pickerEntries.map((entry) =>\r\n            (<ListItem button\r\n                       onClick={() => entry.selectable ? props.onSelectItem(entry.path, !entry.selected) : props.onOpenItem(entry.path, !entry.open)}\r\n                       key={entry.path}\r\n                >\r\n                    <ListItemIcon style={entry.selectable ? {} : {opacity: 0}}>{entry.selected ? <RadioButtonChecked/> :\r\n                        <RadioButtonUnchecked/>}</ListItemIcon>\r\n                    <ListItemText style={{paddingLeft: entry.depth * props.theme.spacing.unit}} inset\r\n                                  primary={props['textRenderer'] ? props['textRenderer'].call(this, entry) : entry.name} />\r\n                    <ListItemSecondaryAction>\r\n                        {entry.openable && entry.hasChildren ? (\r\n                            <IconButton onClick={() => props.onOpenItem(entry.path, !entry.open)}>{entry.open ?\r\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : null}\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>\r\n            )\r\n        )}\r\n    </List>)\r\n};\r\n\r\nPickerViewMaterial.propTypes = {\r\n    pickerEntries: PropTypes.array.isRequired,\r\n    onSelectItem: PropTypes.func,\r\n    onOpenItem: PropTypes.func,\r\n    textRenderer: PropTypes.func\r\n};\r\n\r\nPickerViewMaterial = withTheme()(PickerViewMaterial);\r\n\r\nexport {PickerViewMaterial};","import React from 'react';\r\nimport {IconButton, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, withTheme} from 'material-ui';\r\nimport {ExpandLess, ExpandMore, CheckBoxOutlineBlank, CheckBox} from 'material-ui-icons'\r\nimport PropTypes from 'prop-types';\r\n\r\nlet PickerViewMaterialMultiple = function (props) {\r\n    return (<List>\r\n        {props.pickerEntries.map((entry) =>\r\n            (<ListItem button\r\n                       onClick={() => entry.selectable ? props.onSelectItem(entry.path, !entry.selected, true) : props.onOpenItem(entry.path, !entry.open)}\r\n                       key={entry.path}\r\n                >\r\n                    <ListItemIcon style={entry.selectable ? {} : {opacity: 0}}>{entry.selected ? <CheckBox/> :\r\n                        <CheckBoxOutlineBlank/>}</ListItemIcon>\r\n                    <ListItemText style={{paddingLeft: entry.depth * props.theme.spacing.unit}} inset\r\n                                  primary={props['textRenderer'] ? props['textRenderer'].call(this, entry) : entry.name} />\r\n                    <ListItemSecondaryAction>\r\n                        {entry.openable && entry.hasChildren ? (\r\n                            <IconButton onClick={() => props.onOpenItem(entry.path, !entry.open)}>{entry.open ?\r\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : null}\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>\r\n            )\r\n        )}\r\n    </List>)\r\n};\r\n\r\nPickerViewMaterialMultiple.propTypes = {\r\n    pickerEntries: PropTypes.array.isRequired,\r\n    onSelectItem:  PropTypes.func,\r\n    onOpenItem: PropTypes.func,\r\n    textRenderer: PropTypes.func,\r\n};\r\n\r\nPickerViewMaterialMultiple = withTheme()(PickerViewMaterialMultiple);\r\n\r\nexport { PickerViewMaterialMultiple };","import React from 'react';\r\nimport {graphql} from 'react-apollo';\r\nimport gql from \"graphql-tag\";\r\nimport * as _ from \"lodash\";\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Picker extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let query = gql`\r\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\r\n                jcr {\r\n                    rootNodes:nodesByPath(paths: $rootPaths) {\r\n                        path\r\n                        uuid\r\n                        name\r\n                        children(typesFilter:{types:$types}, limit:1) {\r\n                            pageInfo {\r\n                                totalCount\r\n                            }\r\n                        }\r\n                        selectable : isNodeType(type: {types:$selectable})\r\n                        openable : isNodeType(type: {types:$openable})\r\n                        ... node\r\n                    },\r\n                    openNodes:nodesByPath(paths: $openPaths) {\r\n                        path\r\n                        uuid\r\n                        children(typesFilter:{types:$types}) {\r\n                            nodes {\r\n                                path\r\n                                uuid\r\n                                name\r\n                                children(typesFilter:{types:$types}, limit:1) {\r\n                                    pageInfo {\r\n                                        totalCount\r\n                                    }\r\n                                }\r\n                                selectable : isNodeType(type: {types:$selectable})\r\n                                openable : isNodeType(type: {types:$openable})\r\n                                ... node\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }`;\r\n\r\n        let { fragments, ...graphqlComponentProps } = props;\r\n\r\n        replaceFragmentsInDocument(query, fragments);\r\n\r\n        this.graphqlComponentProps = graphqlComponentProps;\r\n\r\n        let state = {};\r\n        let that = this;\r\n        if (!props.openPaths) {\r\n            state.openPaths = props.defaultOpenPaths ? _.clone(props.defaultOpenPaths) : [];\r\n            graphqlComponentProps.onOpenItem = (path,open) => {\r\n                that.setState( (prevState, props) => ({\r\n                    openPaths: open ? [\r\n                        ...prevState.openPaths,\r\n                        path\r\n                    ] : _.filter(prevState.openPaths, (thispath) => thispath !== path)\r\n                }));\r\n                if (props.onOpenItem) {\r\n                    props.onOpenItem(path,open);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!props.selectedPaths) {\r\n            state.selectedPaths = props.defaultSelectedPaths ? _.clone(props.defaultSelectedPaths) :  [];\r\n            graphqlComponentProps.onSelectItem = (path,selected,multiple) => {\r\n                that.setState((prevState, props)=> ({\r\n                    selectedPaths: selected ? [\r\n                        ...(multiple ? prevState.selectedPaths : []),\r\n                            path\r\n                        ] : _.filter(prevState.selectedPaths, (thispath) => thispath !== path)\r\n                }));\r\n                if (props.onSelectItem) {\r\n                    props.onSelectItem(path,select,multiple);\r\n                }\r\n            }\r\n        }\r\n        this.state = state;\r\n\r\n        this.GraphQLComponent = graphql(query, {\r\n            props: this.mapResultsToProps,\r\n            options: this.mapPropsToOptions\r\n        })(this.props.render);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, prevContext) {\r\n        if (this.props.onSelectionChange && !_.isEqual(this.state.selectedPaths,prevState.selectedPaths)) {\r\n            this.props.onSelectionChange(this.state.selectedPaths);\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps, nextState) {\r\n        let { fragments, onOpenItem, onSelectItem, ...graphqlComponentProps } = nextProps;\r\n        _.assign(this.graphqlComponentProps, graphqlComponentProps);\r\n    }\r\n\r\n    mapResultsToProps({data, ownProps}) {\r\n        let selectedPaths = ownProps.selectedPaths;\r\n        let openPaths = ownProps.openPaths ? ownProps.openPaths : [];\r\n\r\n        let pickerEntries = [];\r\n        let nodesById = {};\r\n        let jcr = data.jcr;\r\n\r\n        let addNode = function (node, depth, index) {\r\n            let selected = false;\r\n            if (node.selectable) {\r\n                selected = _.indexOf(selectedPaths, node.path) !== -1\r\n            }\r\n            let pickerNode = {\r\n                name: node.name,\r\n                path: node.path,\r\n                open: node.openable && _.indexOf(openPaths, node.path) !== -1,\r\n                selected: selected,\r\n                openable: node.openable,\r\n                selectable: node.selectable,\r\n                depth: depth,\r\n                prefix: _.repeat(\"&nbsp;\", depth * 3),\r\n                node: node,\r\n                hidden: false,\r\n                hasChildren: node.children.pageInfo.totalCount > 0\r\n            };\r\n            pickerEntries.splice(index, 0, pickerNode);\r\n            nodesById[node.uuid] = pickerNode;\r\n            return pickerNode;\r\n        };\r\n\r\n        if (jcr) {\r\n            if (jcr.rootNodes) {\r\n                _.forEach(jcr.rootNodes, rootNode => {\r\n                    let root = addNode(rootNode, 0, 0);\r\n                    root.hidden = ownProps.hideRoot;\r\n                });\r\n            }\r\n            if (jcr.openNodes) {\r\n                _.sortBy(jcr.openNodes, ['path']).forEach((node) => {\r\n                    let parent = nodesById[node.uuid];\r\n                    if (parent) {\r\n                        let parentIndex = _.indexOf(pickerEntries, parent);\r\n                        _.forEachRight(node.children.nodes, (child) => {\r\n                            addNode(child, parent.depth + 1, parentIndex + 1)\r\n                        })\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        // Nodes loaded, fill selection list\r\n        let selectedNodes = _.filter(pickerEntries, (node) => {\r\n            return node.selected\r\n        }).map((node) => {\r\n            return node.node\r\n        });\r\n\r\n        selectedPaths = _.map(selectedNodes, \"path\");\r\n        pickerEntries = _.filter(pickerEntries, pickerNode => {\r\n            return !pickerNode.hidden;\r\n        });\r\n\r\n        return {\r\n            ...ownProps,\r\n            pickerEntries: pickerEntries,\r\n        };\r\n    }\r\n\r\n    mapPropsToOptions(props) {\r\n        let openPaths = props.openPaths ? props.openPaths : [];\r\n\r\n        let fullyOpenPath = (props, path) => {\r\n            let rootFound = false;\r\n            _.tail(_.split(path, \"/\")).reduce((acc, it) => {\r\n                if (!rootFound) {\r\n                    _.forEach(props.rootPaths, rootPath => {\r\n                        rootFound = rootFound || _.startsWith(acc, rootPath);\r\n                    })\r\n                }\r\n                if (rootFound && _.indexOf(openPaths, acc) === -1) {\r\n                    openPaths.push(acc);\r\n                }\r\n                return acc + \"/\" + it\r\n            }, \"\");\r\n        };\r\n\r\n        if (props.selectedPaths) {\r\n            _.each(props.selectedPaths, path => fullyOpenPath(props, path));\r\n        }\r\n\r\n        let vars = {\r\n            rootPaths: props.rootPaths,\r\n            types: _.union(props.openableTypes, props.selectableTypes),\r\n            selectable: props.selectableTypes,\r\n            openable: props.openableTypes,\r\n            openPaths: openPaths,\r\n        };\r\n\r\n        if (props.queryVariables) {\r\n            _.assign(vars, props.queryVariables);\r\n        }\r\n\r\n        return {\r\n            variables: vars\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let GraphQLComponent = this.GraphQLComponent;\r\n\r\n        return <GraphQLComponent {...this.graphqlComponentProps} {...this.state} />\r\n    }\r\n}\r\n\r\nPicker.propTypes = {\r\n    /**\r\n     * List of root paths for the picker\r\n     */\r\n    rootPaths: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n    /**\r\n     * List of folder paths that are open by default (uncontrolled mode)\r\n     */\r\n    defaultOpenPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * List of node types that can be \"opened\" (folders)\r\n     */\r\n    openableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n    /**\r\n     * List of open folders in controlled mode\r\n     */\r\n    openPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * List of node types that can be \"selected\" (items)\r\n     */\r\n    selectableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n    /**\r\n     * Preselected items path (uncontrolled mode)\r\n     */\r\n    defaultSelectedPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * List of selected path in controlled mode\r\n     */\r\n    selectedPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * Callback when the selection has changed\r\n     */\r\n    onSelectionChange: PropTypes.func,\r\n\r\n    /**\r\n     * Component to use to do the full rendering of the tree. Should accept : pickerEntries,onSelectItem,onOpenItem . Other properties are passed through.\r\n     */\r\n    render: PropTypes.func,\r\n\r\n    /**\r\n     * Optional set of fragments to add to the graphQL query. Can be a string that identify a predefinedFragment or a fragment definition\r\n     */\r\n    fragments: PropTypes.arrayOf(PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.shape({\r\n            applyFor: PropTypes.string.isRequired,\r\n            variables: PropTypes.string,\r\n            gql: PropTypes.object.isRequired\r\n        })\r\n    ])),\r\n\r\n    /**\r\n     * Optional set of variable to pass to the graphQL query, in order to fulfill fragments needs\r\n     */\r\n    queryVariables: PropTypes.object\r\n\r\n};\r\n\r\n\r\nexport {Picker}","import React from 'react';\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\nimport {connect} from 'react-redux'\r\n\r\nfunction withPathFromSelection(reduxStoreId) {\r\n    return (WrappedComponent) => {\r\n        return connect(\r\n            (state, ownProps) => ({\r\n                ...ownProps,\r\n                path: (state[\"selectedPaths_\" + reduxStoreId] && state[\"selectedPaths_\" + reduxStoreId].length === 1) ? state[\"selectedPaths_\" + reduxStoreId][0] : null,\r\n            }),\r\n            () => ({}))(WrappedComponent);\r\n    }\r\n}\r\n\r\nexport { withPathFromSelection }","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction withNotifications() {\r\n    return (WrappedComponent) => {\r\n        let Component = class extends React.Component {\r\n            render() {\r\n                return (<WrappedComponent notificationContext={this.context.notificationContext} {...this.props} />)\r\n            }\r\n        };\r\n\r\n        Component.contextTypes = {\r\n            notificationContext: PropTypes.object\r\n        };\r\n\r\n        return Component\r\n    }\r\n}\r\n\r\nexport { withNotifications }"]}