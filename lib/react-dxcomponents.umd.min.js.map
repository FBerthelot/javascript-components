{"version":3,"sources":["../src/javascript/i18n/getI18n.js","../src/javascript/reduxStore.js","../src/javascript/theme/theme.js","../src/javascript/router/createOutletHistory.js","../src/javascript/theme/ThemeTester.jsx","../src/javascript/router/OutletRouter.jsx","../src/javascript/notification/NotificationProvider.jsx","../src/javascript/context/DxContextProvider.jsx","../src/javascript/context/withDxContext.jsx","../src/javascript/i18n/LanguageSwitcher.jsx","../src/javascript/layout/SettingsLayout.jsx","../src/javascript/layout/SearchBar.jsx","../src/javascript/picker/PickerViewMaterial.jsx","../src/javascript/picker/PickerViewMaterialMultiple.jsx","../src/javascript/picker/Picker.jsx","../src/javascript/helpers/withNodeFromPath.jsx","../src/javascript/helpers/withNodesFromPath.jsx","../src/javascript/helpers/withPathFromSelection.jsx","../src/javascript/notification/withNotifications.jsx"],"names":["getI18n","options","backends","XHR","backendOptions","contextPath","getData","splice","url","callback","data","split","ns","_url$split2","lang","value","JSON","stringify","status","defaults","_","use","ChainedBackend","init","i18n","debugTool","reducers","store","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","state","arguments","length","undefined","action","key","theme","createMuiTheme","grey","blueGrey","lightBlue","red","deepOrange","green","darkTheme","purple","createOutletHistory","baseHistory","outletName","getPath","path","parts","base","location","pathname","newPath","indexOf","substr","p","startsWith","push","getState","newState","extractPath","s","part","initialLocation","listeners","history","createHref","replace","n","go","goBack","goForward","prompt","block","listener","unlisten","listen","event","assign","call","_this","ThemeTester","props","switch","bind","themes","setState","previous","dxContext","setTheme","checked","React","Switch","color","onChange","this","Component","withDxContext","OutletRouter","createHashHistory","outletHistory","outlet","dispose","children","NotificationProvider","notificationContext","notify","message","closeNotification","Snackbar","notification","open","id","propTypes","PropTypes","object","isRequired","childContextTypes","DxContextProvider","_this$props","apollo","mui","redux","apolloClient","router","_typeof","currentTheme","client","_props","_state","Children","only","lng","uilang","createElement","I18nextProvider","HashRouter","type","ApolloProvider","Provider","generateClassName","createGenerateClassName","sheetsRegistry","sheetRegistry","SheetsRegistry","JssProvider","registry","MuiThemeProvider","sheetsManager","Map","WrappedComponent","_extends","context","contextTypes","LanguageSwitcher","anchorEl","target","changeLanguage","onClick","handleClick","t","Boolean","onClose","handleClose","map","locale","_this2","translate","SettingsLayout","classes","appBar","footer","appBarStyle","className","root","position","style","main","element","string","withStyles","palette","background","global","typography","fontFamily","text","secondary","SearchBar","handleChange","onFocus","onBlur","onClear","persist","timeout","setTimeout","onChangeFilter","placeholderLabel","Input","focus","rootFocus","input","searchIcon","Search","closeIcon","hidden","Close","primary","light","exports","PickerViewMaterial","pickerEntries","onOpenItem","onSelectItem","textRenderer","iconRenderer","loading","loadingContainer","padding","entry","button","selectable","selected","selectedText","openable","hasChildren","stopPropagation","ExpandLess","ExpandMore","opacity","paddingLeft","depth","spacing","unit","ListItemText","inset","name","array","func","withTheme","fade","contrastText","PickerViewMaterialMultiple","CheckBox","CheckBoxOutlineBlank","Picker","fragments","openPaths","render","rootPaths","queryVariables","hideRoot","openableTypes","selectableTypes","selectedPaths","defaultSelectedPaths","onSelectionChange","defaultOpenPaths","otherProps","onLoading","objectWithoutProperties","isOpenControlled","isSelectionControlled","query","gql","_templateObject$2","eventsHandlers","prevState","thispath","multiple","newSelectedPaths","vars","nodesById","jcr","addNode","node","index","pickerNode","pageInfo","totalCount","uuid","rootNodes","rootNode","openNodes","forEach","parent","parentIndex","nodes","child","selectedNodes","nextProps","nextState","nextOpenPaths","nextSelectedPaths","nextPropsToCompare","_props2","previousPropsToCompare","_props3","rootFound","reduce","acc","it","rootPath","getVariables","variables","fetchPolicy","error","_ref","Render","_this3","previousEntries","renderProps","getPickerEntries","arrayOf","oneOfType","shape","ViewComponent","_templateObject","graphql","ownProps","workspace","_templateObject$1","types","reduxStoreId","connect"],"mappings":"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","sourcesContent":["import i18n from 'i18next';\r\nimport XHR from 'i18next-xhr-backend';\r\nimport ChainedBackend from 'i18next-chained-backend';\r\n\r\nimport * as _ from 'lodash';\r\n\r\nfunction getI18n(options) {\r\n\r\n    let backends = [ XHR ];\r\n    let backendOptions = [ {\r\n        loadPath: (options.contextPath ? options.contextPath : '') + '/modules/{{ns}}/javascript/locales/{{lng}}.json'\r\n    }];\r\n\r\n    if (options['getData']) {\r\n        let getData = options['getData'];\r\n        backends.splice(0,0,XHR);\r\n        backendOptions.splice(0,0,\r\n            {\r\n                loadPath: \"{{ns}}/{{lng}}\",\r\n                ajax:(url, options, callback, data) => {\r\n                    let [ns,lang] = url.split('/');\r\n                    let value = getData(ns,lang);\r\n                    if (value) {\r\n                        callback(JSON.stringify(value), {status: 200});\r\n                    } else {\r\n                        callback(null, {status:400});\r\n                    }\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    let defaults = {\r\n        fallbackLng: 'en',\r\n        debug: true,\r\n\r\n        interpolation: {\r\n            escapeValue: false, // not needed for react!!\r\n        },\r\n\r\n        // react i18next special options (optional)\r\n        react: {\r\n            wait: true,\r\n            bindI18n: 'languageChanged loaded',\r\n            bindStore: 'added removed',\r\n            nsMode: 'default'\r\n        },\r\n\r\n\r\n        backend: {\r\n            backends: backends,\r\n            backendOptions: backendOptions\r\n        }\r\n    };\r\n\r\n    options = _.merge(defaults, options);\r\n\r\n    i18n\r\n        .use(ChainedBackend)\r\n        .init(options);\r\n    return i18n;\r\n}\r\n\r\n\r\nexport { getI18n };","import {createStore} from 'redux'\r\nimport * as _ from \"lodash\";\r\n\r\nconst reducers = {};\r\n\r\nconst store = function () {\r\n    let debugTool;\r\n    if (typeof window !== 'undefined') {\r\n        debugTool = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\r\n            name: \"DX Redux\",\r\n            instanceId: \"dx\"\r\n        });\r\n    }\r\n\r\n    return createStore((state = {}, action) => _.mapValues(reducers, (value, key) => value(state[key], action)), debugTool);\r\n}();\r\n\r\nconst resetStateReducer = function(state, action) {\r\n    if (action.type === 'RESET_STATE') {\r\n        return undefined;\r\n    }\r\n    return state;\r\n};\r\n\r\nexport {reducers, store, resetStateReducer};\r\n","import {createMuiTheme} from 'material-ui';\r\nimport {blueGrey, deepOrange, green, grey, lightBlue, purple, red} from 'material-ui/colors/index'\r\n\r\n// All the following keys are optional.\r\n// We try our best to provide a great default value.\r\nlet theme = createMuiTheme({\r\n\tpalette: {\r\n        background: {\r\n            global: grey[200],\r\n        },\r\n        contrastThreshold: 2.5,\r\n        tonalOffset: 0.2,\r\n        primary: {\r\n            main: blueGrey[600],\r\n        },\r\n        secondary: {\r\n            main: lightBlue[600],\r\n        },\r\n        error: {\r\n            main: red[400],\r\n        },\r\n        publish: {\r\n            main: deepOrange[500],\r\n        },\r\n        enabled: {\r\n            main: green[400],\r\n        },\r\n        delete: {\r\n            main: red[600],\r\n        }\r\n    },\r\n    overrides: {\r\n        MuiButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n\t\tMuiTableRow: {\r\n\t\t\troot: {}\r\n\t\t},\r\n        MuiTableCell: {\r\n            body: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiIconButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n\t\t\t\twidth: '38px'\r\n            }\r\n        },\r\n\t\tMuiInput: {\r\n\t\t\troot: {\r\n\t\t\t\t'&:before': {\r\n\t\t\t\t\tdisplay: 'none'\r\n\t\t\t\t},\r\n\t\t\t\t'&:after': {\r\n\t\t\t\t\tdisplay: 'none'\r\n\t\t\t\t},\r\n\t\t\t\tboxShadow: '2px 2px 3px 1px rgba(38,38,38,0.3)',\r\n\t\t\t\tbackground: 'white',\r\n\t\t\t\tpadding: '2px 11px 0',\r\n\t\t\t\tboxSizing: 'border-box'\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tcolor: '#00a0e3',\r\n\t\t\t\tfontSize: '0.875rem'\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTypography: {\r\n\t\t\troot: {\r\n\t\t\t},\r\n\t\t\tsubheading: {\r\n\t\t\t\tfontSize: '1.2rem'\r\n\t\t\t},\r\n\t\t\tcaption: {\r\n\t\t\t\tfontWeight: '800',\r\n\t\t\t\ttextTransform: 'uppercase'\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n});\r\n\r\nlet darkTheme = createMuiTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        background: {\r\n            global: grey[900]\r\n        },\r\n        contrastThreshold: 3.0,\r\n        tonalOffset: 0.2,\r\n        primary: {\r\n            main: purple[500]\r\n        },\r\n        secondary: {\r\n            main: green[400]\r\n        },\r\n        error: {\r\n            main: red[200]\r\n        },\r\n        publish: {\r\n            main: deepOrange[500],\r\n        },\r\n        enabled: {\r\n            main: green[400],\r\n        },\r\n        delete: {\r\n            main: red[600],\r\n        }\r\n    },\r\n    overrides: {\r\n        MuiButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiTableCell: {\r\n            body: {\r\n                color: \"inherit\",\r\n            }\r\n        },\r\n        MuiIconButton: {\r\n            root: {\r\n                color: \"inherit\",\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n\r\nexport {theme, darkTheme}\r\n","import * as _ from \"lodash\";\r\n\r\nfunction createOutletHistory(baseHistory, outletName) {\r\n\r\n    const getPath = (path) => {\r\n        let parts = [];\r\n        let base = baseHistory.location.pathname;\r\n        let newPath = outletName + ':' + path;\r\n        if (base.indexOf('(') > -1) {\r\n            base = base.substr(base.indexOf('(')+1);\r\n            base = base.substr(0,base.indexOf(')'));\r\n            parts = base.split('//')\r\n            parts = _.map(parts, (p)=> (p.startsWith(outletName + ':') ? newPath : p));\r\n        }\r\n        if (parts.indexOf(newPath) === -1) {\r\n            parts.push(newPath);\r\n        }\r\n        return '/('+ _.join(parts,'//') + ')';\r\n    };\r\n\r\n    const getState = function (state) {\r\n        let newState;\r\n        if (state) {\r\n            newState = baseHistory.location.state ? baseHistory.location.state : {};\r\n            newState['router_' + outletName] = state;\r\n        } else if (baseHistory.location.state) {\r\n            newState = baseHistory.location.state;\r\n            delete newState['router_' + outletName]\r\n        }\r\n        return newState;\r\n    };\r\n\r\n    const extractPath = function(base) {\r\n        if (base.indexOf('(') > -1) {\r\n            base = base.substr(base.indexOf('(') + 1);\r\n            base = base.substr(0, base.indexOf(')'));\r\n            let parts = base.split('//')\r\n            let s = outletName + ':';\r\n            let part = _.find(parts, (p)=> (p.startsWith(s)));\r\n            if (part) {\r\n                return part.substr(s.length)\r\n            }\r\n        }\r\n        return '';\r\n    };\r\n\r\n    let initialLocation = _.clone(baseHistory.location);\r\n    initialLocation.pathname = extractPath(initialLocation.pathname);\r\n\r\n    let listeners = [];\r\n\r\n    const history = {\r\n        length: baseHistory.length,\r\n        action: baseHistory.action,\r\n        location: initialLocation,\r\n        createHref: (location) => {\r\n            return baseHistory.createHref({pathname:getPath(location.pathname)});\r\n        },\r\n        push: (path, state) => {\r\n            return baseHistory.push(getPath(path),getState(state));\r\n        },\r\n        replace: (path, state) => {\r\n            baseHistory.replace(getPath(path),getState(state));\r\n        },\r\n        go: (n) => {\r\n            baseHistory.go(n)\r\n        },\r\n        goBack: () => {\r\n            baseHistory.goBack()\r\n        },\r\n        goForward: () => {\r\n            baseHistory.goForward()\r\n        },\r\n        block:(prompt) => {\r\n            return baseHistory.block(prompt)\r\n        },\r\n        listen: (listener) => {\r\n            listeners.push(listener);\r\n            return () => {\r\n                _.pull(listeners, listener);\r\n            }\r\n        },\r\n        dispose: () => {\r\n            unlisten();\r\n        }\r\n    };\r\n\r\n    const unlisten = baseHistory.listen( (event) => {\r\n        let path = extractPath(event.pathname);\r\n        let state;\r\n        if (event.state && event.state['router_' + outletName]) {\r\n            state = event.state['router_' + outletName];\r\n        }\r\n        if (history.location.pathname !== path || history.location.state !== state) {\r\n            Object.assign(history.location, event);\r\n            history.location.pathname = path;\r\n            history.location.state = state;\r\n            _.each(listeners, (listener) => listener.call(this,history.location))\r\n        }\r\n    });\r\n\r\n    // unlisten when not used anymore !\r\n\r\n    return history\r\n}\r\n\r\nexport { createOutletHistory }","import React from 'react';\r\nimport {withDxContext} from \"../context\";\r\nimport {Switch} from 'material-ui'\r\nimport {theme, darkTheme} from \"./theme\";\r\n\r\nclass ThemeTester extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.switch = this.switch.bind(this);\r\n\r\n        this.themes = [theme, darkTheme];\r\n        this.state = {\r\n            checked:false\r\n        };\r\n    }\r\n\r\n    switch() {\r\n        this.setState((previous) => {\r\n            this.props.dxContext.setTheme(previous.checked ? theme : darkTheme);\r\n            return {\r\n                checked: !previous.checked\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return <Switch color=\"default\" onChange={this.switch} checked={this.state.checked}/>\r\n    }\r\n\r\n}\r\n\r\n\r\nThemeTester = withDxContext()(ThemeTester);\r\n\r\nexport {ThemeTester}","import React from 'react';\r\n\r\nimport {createHashHistory} from \"history\";\r\nimport {createOutletHistory} from \"./createOutletHistory\"\r\nimport {Router} from 'react-router'\r\n\r\nclass OutletRouter extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        let baseHistory = createHashHistory();\r\n        this.outletHistory = createOutletHistory(baseHistory, props.outlet);\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.outletHistory.dispose();\r\n    }\r\n\r\n    render() {\r\n        return (<Router history={this.outletHistory}>{this.props.children}</Router>)\r\n    }\r\n}\r\n\r\nexport { OutletRouter };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Component } from \"react\";\r\nimport {Snackbar} from \"material-ui\";\r\n\r\nclass NotificationProvider extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let {notificationContext} = this.props;\r\n\r\n        this.state = {\r\n            notification: {\r\n                message: \"\",\r\n                open: false\r\n            }\r\n        };\r\n\r\n        notificationContext.notify = (message) => {\r\n            this.setState({\r\n                notification: {\r\n                    message: message,\r\n                    open:true\r\n                }\r\n            });\r\n        };\r\n\r\n        notificationContext.closeNotification = () => {\r\n            this.setState({\r\n                notification: {\r\n                    message: '',\r\n                    open: false\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n    getChildContext() {\r\n        return {\r\n            notificationContext: this.props.notificationContext\r\n        };\r\n    }\r\n\r\n    render() {\r\n        // TODO make it configurable\r\n        return <div>\r\n            {this.props.children}\r\n\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                autoHideDuration={5000}\r\n                onClose={this.props.notificationContext.closeNotification}\r\n                open={this.state.notification.open}\r\n                SnackbarContentProps={{\r\n                    'aria-describedby': 'message-id',\r\n                }}\r\n                message={<span id=\"message-id\">{this.state.notification.message}</span>}\r\n            />\r\n        </div>;\r\n    }\r\n}\r\n\r\nNotificationProvider.propTypes = {\r\n    notificationContext: PropTypes.object.isRequired\r\n};\r\n\r\nNotificationProvider.childContextTypes = {\r\n    notificationContext: PropTypes.object.isRequired\r\n};\r\n\r\nexport {NotificationProvider}","import React from 'react';\r\nimport {MuiThemeProvider} from 'material-ui';\r\nimport {createGenerateClassName} from 'material-ui/styles/index';\r\nimport {getI18n} from \"../i18n/getI18n\";\r\nimport {store} from '../reduxStore';\r\nimport {theme} from '../theme'\r\nimport {client} from '@jahia/apollo-dx';\r\nimport {ApolloProvider} from 'react-apollo';\r\nimport {Provider} from 'react-redux'\r\nimport {I18nextProvider} from 'react-i18next'\r\nimport {HashRouter} from 'react-router-dom'\r\nimport {OutletRouter} from '../router'\r\nimport PropTypes from 'prop-types';\r\nimport {JssProvider, SheetsRegistry} from 'react-jss';\r\nimport {NotificationProvider} from \"../notification/NotificationProvider\";\r\n\r\nclass DxContextProvider extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let {dxContext, children, i18n, apollo, redux, mui, router, apolloClient} = this.props;\r\n        let state = {};\r\n        if (mui) {\r\n            if (typeof mui === 'object') {\r\n                state.currentTheme = mui;\r\n            } else {\r\n                state.currentTheme = theme;\r\n            }\r\n            dxContext.setTheme = (theme) => {\r\n                // theTheme = _.merge({}, theme, this.state.theme);\r\n                this.setState({\r\n                    currentTheme: theme\r\n                });\r\n            };\r\n        }\r\n\r\n        if (dxContext.apolloClient) {\r\n            state.apolloClient = dxContext.apolloClient;\r\n        } else if (apolloClient) {\r\n            state.apolloClient = apolloClient;\r\n        } else if (apollo) {\r\n            let options = {contextPath:dxContext.contextPath};\r\n            if (typeof apollo === 'object') {\r\n                Object.assign(options, apollo)\r\n            }\r\n            state.apolloClient = client(options);\r\n        }\r\n\r\n        this.state = state;\r\n    }\r\n\r\n    getChildContext() {\r\n        return {dxContext: this.props.dxContext};\r\n    }\r\n\r\n    render() {\r\n        let {dxContext, children, i18n, apollo, redux, mui, router} = this.props;\r\n        let {currentTheme, apolloClient} = this.state;\r\n\r\n        let Component = React.Children.only(children);\r\n        if (i18n) {\r\n            let options = {lng:dxContext.uilang, contextPath:dxContext.contextPath};\r\n            if (typeof i18n === 'object') {\r\n                Object.assign(options, i18n)\r\n            }\r\n            Component = React.createElement(I18nextProvider, {i18n:getI18n(options)}, Component);\r\n        }\r\n        if (router) {\r\n            let router = HashRouter;\r\n            let options = {};\r\n            if (typeof router === 'object') {\r\n                if (router.type === 'outlet') {\r\n                    router = OutletRouter;\r\n                    options.outlet = router.outlet;\r\n                }\r\n            }\r\n            Component = React.createElement(HashRouter, options, Component);\r\n        }\r\n        if (apolloClient) {\r\n            Component = React.createElement(ApolloProvider, {client:apolloClient}, Component);\r\n        }\r\n        if (redux) {\r\n            Component = React.createElement(Provider, {store:store}, Component);\r\n        }\r\n\r\n        if (currentTheme) {\r\n            let generateClassName = dxContext.generateClassName ? dxContext.generateClassName : createGenerateClassName();\r\n            let sheetsRegistry = dxContext.sheetRegistry ? dxContext.sheetRegistry : new SheetsRegistry();\r\n\r\n            Component = React.createElement(JssProvider, {registry: sheetsRegistry,  generateClassName:generateClassName},\r\n                React.createElement(MuiThemeProvider, {theme: currentTheme, sheetsManager:new Map()},\r\n                    React.createElement(NotificationProvider, {notificationContext:{}}, Component)));\r\n        }\r\n\r\n        return Component;\r\n    }\r\n}\r\n\r\nDxContextProvider.childContextTypes = {\r\n    dxContext: PropTypes.object\r\n};\r\n\r\nexport {DxContextProvider}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction withDxContext() {\r\n    return (WrappedComponent) => {\r\n        let Component = class extends React.Component {\r\n            render() {\r\n                return (<WrappedComponent dxContext={this.context.dxContext} {...this.props} />)\r\n            }\r\n        }\r\n\r\n        Component.contextTypes = {\r\n            dxContext: PropTypes.object\r\n        };\r\n\r\n        return Component\r\n    }\r\n}\r\n\r\nexport { withDxContext }","import React from 'react';\r\nimport {Button, Menu, MenuItem} from 'material-ui';\r\nimport {translate} from 'react-i18next';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LanguageSwitcher extends React.Component {\r\n\r\n    constructor(props,context) {\r\n        super(props,context);\r\n        this.state = {\r\n            anchorEl: null,\r\n        };\r\n    }\r\n\r\n    handleClick(event) {\r\n        this.setState({anchorEl: event.target});\r\n    }\r\n\r\n    handleClose(lang) {\r\n        this.setState({anchorEl: null});\r\n        if (lang) {\r\n            this.context.i18n.changeLanguage(lang);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let availableLocales = ['fr', 'en'];\r\n\r\n        return (<div>\r\n            <Button onClick={this.handleClick.bind(this)}\r\n            >{this.props.t('label.languages')}</Button>\r\n            <Menu open={Boolean(this.state.anchorEl)} onClose={this.handleClose.bind(this, null)}\r\n                  anchorEl={this.state.anchorEl}>\r\n                {availableLocales.map((locale) => (\r\n                    <MenuItem onClick={this.handleClose.bind(this, locale)} key={locale}\r\n                              value={locale}>{locale}</MenuItem>))}\r\n            </Menu>\r\n        </div>);\r\n    }\r\n}\r\n\r\nLanguageSwitcher.contextTypes = {\r\n    i18n: PropTypes.object\r\n};\r\n\r\nLanguageSwitcher = translate('react-dxcomponents')(LanguageSwitcher);\r\n\r\n\r\nexport {LanguageSwitcher}\r\n","import React from 'react';\r\nimport {AppBar, Toolbar, Typography, withStyles} from 'material-ui';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.global\r\n    },\r\n    main: {\r\n        minHeight: 'calc(100% - 96px)',\r\n        marginTop: 64,\r\n        padding: 1\r\n    },\r\n    footer: {\r\n        fontSize: '14px',\r\n        fontFamily: theme.typography.fontFamily,\r\n        fontWeight: 300,\r\n        padding: \"8px\",\r\n        textAlign: \"center\",\r\n        color: theme.palette.text.secondary\r\n    },\r\n    appBar: {\r\n        transition: \"all 200ms ease-in-out\"\r\n    }\r\n});\r\n\r\n\r\nclass SettingsLayout extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        let { classes, appBar, children, footer, appBarStyle } = this.props;\r\n        return (\r\n            <section className={classes.root} >\r\n                <AppBar position=\"fixed\" classes={{root:classes.appBar}} style={appBarStyle}>\r\n                    {appBar}\r\n                </AppBar>\r\n                <section className={classes.main}>\r\n                    {children}\r\n                </section>\r\n                <footer className={classes.footer}>\r\n                    {footer}\r\n                </footer>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nSettingsLayout.propTypes = {\r\n    appBar: PropTypes.element,\r\n    footer: PropTypes.string\r\n};\r\n\r\nSettingsLayout = withStyles(styles)(SettingsLayout);\r\n\r\nexport {SettingsLayout};\r\n","import React from 'react';\r\nimport {Input, InputAdornment, withStyles, Icon, IconButton} from 'material-ui';\r\nimport {Search, Close} from 'material-ui-icons';\r\nimport {translate} from 'react-i18next';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: '0',\r\n        color : 'inherit',\r\n        backgroundColor : theme.palette.primary.light,\r\n        width: '720px',\r\n        height: '44px',\r\n        lineHeight: '40px',\r\n        borderRadius: '3px',\r\n        fontWeight: '200'\r\n    },\r\n    rootFocus: {\r\n        margin: '0',\r\n        color: theme.palette.text.secondary,\r\n        backgroundColor : '#fff',\r\n        width: '720px',\r\n        height: '44px',\r\n        lineHeight: '40px',\r\n        borderRadius: '3px',\r\n        fontWeight: '100',\r\n        boxShadow: \"0 1px 8px 0 rgba(0, 0, 0, 0.4)\",\r\n        // '& $input': {\r\n        //     width: '300px'\r\n        // }\r\n    },\r\n    input: {\r\n        transitionProperty: 'width',\r\n        transitionDuration: '300ms',\r\n        transitionTimingFunction: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n        transitionDelay: '0ms',\r\n\r\n    },\r\n    searchIcon: {\r\n        'marginTop': 'auto',\r\n        'marginBottom': 'auto',\r\n        'paddingLeft': '14px',\r\n        'opacity': '0.87'\r\n    },\r\n    hidden: {\r\n        opacity: 0,\r\n        marginTop: 'auto',\r\n        marginBottom: 'auto'\r\n    },\r\n    closeIcon: {\r\n        marginTop: 'auto',\r\n        marginBottom: 'auto',\r\n        opacity: 0.87\r\n    }\r\n});\r\n\r\nclass SearchBar extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.onFocus = this.onFocus.bind(this);\r\n        this.onBlur = this.onBlur.bind(this);\r\n        this.onClear = this.onClear.bind(this);\r\n        this.state = {\r\n            focus: false\r\n        }\r\n    }\r\n\r\n    handleChange(event) {\r\n        // Let the handler deal with the change only when the user has paused changing the filter text for a second.\r\n        event.persist();\r\n        if (this.timeout) {\r\n            clearTimeout(this.timeout);\r\n        }\r\n        this.timeout = setTimeout(function() {\r\n            this.props.onChangeFilter(event.target.value)\r\n        }.bind(this), 1000);\r\n    }\r\n\r\n    onClear() {\r\n        this.props.onChangeFilter('');\r\n    }\r\n\r\n    onFocus() {\r\n        this.setState({\r\n            focus: true\r\n        });\r\n        this.props.onFocus();\r\n    }\r\n\r\n    onBlur() {\r\n        this.setState({\r\n            focus: false\r\n        });\r\n        this.props.onBlur();\r\n    }\r\n\r\n    render() {\r\n\r\n        const { classes, t, placeholderLabel } = this.props;\r\n\r\n        return (\r\n            <Input classes={{root: (this.state.focus ? classes.rootFocus : classes.root), input: classes.input}}\r\n                   onChange={this.handleChange}\r\n                   onBlur={this.onBlur}\r\n                   onFocus={this.onFocus}\r\n                   disableUnderline={true}\r\n                   type=\"text\"\r\n                   placeholder={placeholderLabel || t('label.searchPlaceholder')}\r\n                   value={this.props.value}\r\n                   startAdornment={<InputAdornment classes={{root: classes.searchIcon}} position=\"start\"><Search/></InputAdornment>}\r\n                   endAdornment={<InputAdornment position=\"end\" classes={{root: (this.state.focus ? classes.closeIcon : classes.hidden)}}>\r\n                       <IconButton onClick={this.onClear}>\r\n                           <Icon><Close/></Icon>\r\n                       </IconButton>\r\n                   </InputAdornment>}\r\n                   style={this.props.style}>\r\n            </Input>\r\n        )\r\n    }\r\n}\r\n\r\nSearchBar = withStyles(styles)(translate('react-dxcomponents')(SearchBar));\r\n\r\nexport {SearchBar};","import React from 'react';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    SvgIcon,\r\n    withStyles,\r\n    withTheme\r\n} from 'material-ui';\r\nimport {ExpandLess, ExpandMore} from 'material-ui-icons'\r\nimport PropTypes from 'prop-types';\r\nimport {fade} from 'material-ui/styles/colorManipulator'\r\n\r\n\r\nlet styles = (theme) => ({\r\n    root: {\r\n        position:\"relative\"\r\n    },\r\n    loading: {\r\n        opacity:0.8\r\n    },\r\n    padding: {\r\n        paddingTop:0,\r\n        paddingBottom:0\r\n    },\r\n    selected: {\r\n        backgroundColor: theme.palette.secondary.light,\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.secondary.light, 0.7)\r\n        }\r\n    },\r\n    selectedText: {\r\n        color: theme.palette.secondary.contrastText\r\n    },\r\n    loadingContainer: {\r\n        position:\"absolute\",\r\n        width:\"100%\",\r\n        height:\"100%\",\r\n        zIndex:999\r\n    }\r\n});\r\n\r\nlet PickerViewMaterial = function (props) {\r\n    let {theme, classes, pickerEntries, onOpenItem, onSelectItem, textRenderer, iconRenderer, loading} = props;\r\n    return (<div className={classes.root}>\r\n        { loading && <div className={classes.loadingContainer} />}\r\n        <List classes={{root:loading ? (classes.root + ' ' + classes.loading) : classes.root, padding:classes.padding}}>\r\n            {pickerEntries.map((entry) =>\r\n                (<ListItem button\r\n                           onClick={() => entry.selectable ? onSelectItem(entry.path, !entry.selected) : onOpenItem(entry.path, !entry.open)}\r\n                           key={entry.path}\r\n                           divider={true}\r\n                           classes={entry.selected ? {root:classes.selected} : {} }\r\n                    >\r\n                        <ListItemIcon classes={entry.selected ? {root:classes.selectedText} : {}}>\r\n                            {entry.openable && entry.hasChildren ? (\r\n                                <IconButton onClick={(event) => {onOpenItem(entry.path, !entry.open); event.stopPropagation()}}>{entry.open ?\r\n                                    <ExpandLess/> : <ExpandMore/>}</IconButton>) : <ExpandMore style={{opacity:0}}/>}\r\n                        </ListItemIcon>\r\n\r\n                        <ListItemIcon classes={entry.selected ? {root:classes.selectedText} : {}}\r\n                                      style={{paddingLeft: entry.depth * theme.spacing.unit}}>\r\n                            { iconRenderer && iconRenderer.call(this,entry) }\r\n                        </ListItemIcon>\r\n\r\n                        <ListItemText classes={entry.selected ? {primary:classes.selectedText} : {}} inset\r\n                                      primary={textRenderer ? textRenderer.call(this, entry) : entry.name} />\r\n                    </ListItem>\r\n                )\r\n            )}\r\n        </List>\r\n    </div>)\r\n};\r\n\r\nPickerViewMaterial.propTypes = {\r\n    pickerEntries: PropTypes.array.isRequired,\r\n    onSelectItem: PropTypes.func,\r\n    onOpenItem: PropTypes.func,\r\n    textRenderer: PropTypes.func\r\n};\r\n\r\nPickerViewMaterial = withTheme()(withStyles(styles)(PickerViewMaterial));\r\n\r\nexport {PickerViewMaterial};","import React from 'react';\r\nimport {IconButton, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, withTheme} from 'material-ui';\r\nimport {ExpandLess, ExpandMore, CheckBoxOutlineBlank, CheckBox} from 'material-ui-icons'\r\nimport PropTypes from 'prop-types';\r\n\r\nlet PickerViewMaterialMultiple = function (props) {\r\n    return (<List>\r\n        {props.pickerEntries.map((entry) =>\r\n            (<ListItem button\r\n                       onClick={() => entry.selectable ? props.onSelectItem(entry.path, !entry.selected, true) : props.onOpenItem(entry.path, !entry.open)}\r\n                       key={entry.path}\r\n                >\r\n                    <ListItemIcon style={entry.selectable ? {} : {opacity: 0}}>{entry.selected ? <CheckBox/> :\r\n                        <CheckBoxOutlineBlank/>}</ListItemIcon>\r\n                    <ListItemText style={{paddingLeft: entry.depth * props.theme.spacing.unit}} inset\r\n                                  primary={props['textRenderer'] ? props['textRenderer'].call(this, entry) : entry.name} />\r\n                    <ListItemSecondaryAction>\r\n                        {entry.openable && entry.hasChildren ? (\r\n                            <IconButton onClick={() => props.onOpenItem(entry.path, !entry.open)}>{entry.open ?\r\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : null}\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>\r\n            )\r\n        )}\r\n    </List>)\r\n};\r\n\r\nPickerViewMaterialMultiple.propTypes = {\r\n    pickerEntries: PropTypes.array.isRequired,\r\n    onSelectItem:  PropTypes.func,\r\n    onOpenItem: PropTypes.func,\r\n    textRenderer: PropTypes.func,\r\n};\r\n\r\nPickerViewMaterialMultiple = withTheme()(PickerViewMaterialMultiple);\r\n\r\nexport { PickerViewMaterialMultiple };","import React from 'react';\r\nimport {Query} from 'react-apollo';\r\nimport gql from \"graphql-tag\";\r\nimport * as _ from \"lodash\";\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Picker extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let {\r\n            fragments, render, rootPaths, queryVariables, hideRoot,\r\n            openableTypes, selectableTypes,\r\n            openPaths, onOpenItem,\r\n            selectedPaths, onSelectItem,\r\n            defaultSelectedPaths, onSelectionChange,\r\n            defaultOpenPaths,\r\n            onLoading,\r\n            ...otherProps\r\n        } = props;\r\n\r\n        this.isOpenControlled = openPaths != null;\r\n        this.isSelectionControlled = selectedPaths != null;\r\n\r\n        this.query = gql`\r\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\r\n                jcr {\r\n                    rootNodes:nodesByPath(paths: $rootPaths) {\r\n                        path\r\n                        uuid\r\n                        name\r\n                        children(typesFilter:{types:$types}, limit:1) {\r\n                            pageInfo {\r\n                                totalCount\r\n                            }\r\n                        }\r\n                        selectable : isNodeType(type: {types:$selectable})\r\n                        openable : isNodeType(type: {types:$openable})\r\n                        ... node\r\n                    },\r\n                    openNodes:nodesByPath(paths: $openPaths) {\r\n                        path\r\n                        uuid\r\n                        children(typesFilter:{types:$types}) {\r\n                            nodes {\r\n                                path\r\n                                uuid\r\n                                name\r\n                                children(typesFilter:{types:$types}, limit:1) {\r\n                                    pageInfo {\r\n                                        totalCount\r\n                                    }\r\n                                }\r\n                                selectable : isNodeType(type: {types:$selectable})\r\n                                openable : isNodeType(type: {types:$openable})\r\n                                ... node\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }`;\r\n\r\n\r\n        replaceFragmentsInDocument(this.query, fragments);\r\n\r\n        let eventsHandlers = {};\r\n\r\n        let state = {\r\n            renderProps: otherProps,\r\n            eventsHandlers: eventsHandlers\r\n        };\r\n\r\n\r\n        if (!this.isOpenControlled) {\r\n            state.openPaths = defaultOpenPaths ? _.clone(defaultOpenPaths) : [];\r\n            eventsHandlers.onOpenItem = (path, open) => {\r\n                this.setState((prevState) => ({\r\n                    openPaths: open ?\r\n                        [...prevState.openPaths, path] :\r\n                        _.filter(prevState.openPaths, (thispath) => thispath !== path)\r\n                }));\r\n            };\r\n        } else {\r\n            eventsHandlers.onOpenItem = onOpenItem;\r\n        }\r\n\r\n        if (!this.isSelectionControlled) {\r\n            state.selectedPaths = defaultSelectedPaths ? _.clone(defaultSelectedPaths) : [];\r\n            eventsHandlers.onSelectItem = (path, selected, multiple) => {\r\n                this.setState((prevState) => {\r\n                    let newSelectedPaths = selected ?\r\n                        [...(multiple ? prevState.selectedPaths : []), path] :\r\n                        _.filter(prevState.selectedPaths, (thispath) => thispath !== path);\r\n                    onSelectionChange(newSelectedPaths);\r\n                    return {\r\n                        selectedPaths: newSelectedPaths\r\n                    };\r\n                });\r\n            };\r\n        } else {\r\n            eventsHandlers.onSelectItem = onSelectItem;\r\n        }\r\n\r\n        this.state = state;\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        let {\r\n            fragments, render, rootPaths, queryVariables, hideRoot,\r\n            openableTypes, selectableTypes,\r\n            openPaths, onOpenItem,\r\n            selectedPaths, onSelectItem,\r\n            defaultSelectedPaths, onSelectionChange,\r\n            defaultOpenPaths,\r\n            onLoading,\r\n            ...otherProps\r\n        } = nextProps;\r\n\r\n        if (!_.isEqual(_.omit(otherProps, _.functions(otherProps)), _.omit(prevState.renderProps, _.functions(prevState.renderProps)))) {\r\n            return {\r\n                renderProps: otherProps\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getVariables(selectedPaths, openPaths) {\r\n        let {rootPaths, openableTypes, selectableTypes, queryVariables} = this.props;\r\n\r\n        let vars = {\r\n            rootPaths: rootPaths,\r\n            types: _.union(openableTypes, selectableTypes),\r\n            selectable: selectableTypes,\r\n            openable: openableTypes,\r\n            openPaths: openPaths,\r\n        };\r\n\r\n        if (queryVariables) {\r\n            _.assign(vars, queryVariables);\r\n        }\r\n\r\n        return vars;\r\n    }\r\n\r\n    getPickerEntries(data, selectedPaths, openPaths) {\r\n        let pickerEntries = [];\r\n        let nodesById = {};\r\n        let jcr = data.jcr;\r\n\r\n        let addNode = function (node, depth, index) {\r\n            let selected = false;\r\n            if (node.selectable) {\r\n                selected = _.indexOf(selectedPaths, node.path) !== -1\r\n            }\r\n            let pickerNode = {\r\n                name: node.name,\r\n                path: node.path,\r\n                open: node.openable && _.indexOf(openPaths, node.path) !== -1,\r\n                selected: selected,\r\n                openable: node.openable,\r\n                selectable: node.selectable,\r\n                depth: depth,\r\n                prefix: _.repeat(\"&nbsp;\", depth * 3),\r\n                node: node,\r\n                hidden: false,\r\n                hasChildren: node.children.pageInfo.totalCount > 0\r\n            };\r\n            pickerEntries.splice(index, 0, pickerNode);\r\n            nodesById[node.uuid] = pickerNode;\r\n            return pickerNode;\r\n        };\r\n\r\n        if (jcr) {\r\n            if (jcr.rootNodes) {\r\n                _.forEach(jcr.rootNodes, rootNode => {\r\n                    let root = addNode(rootNode, 0, 0);\r\n                    root.hidden = this.props.hideRoot;\r\n                });\r\n            }\r\n            if (jcr.openNodes) {\r\n                _.sortBy(jcr.openNodes, ['path']).forEach((node) => {\r\n                    let parent = nodesById[node.uuid];\r\n                    if (parent) {\r\n                        let parentIndex = _.indexOf(pickerEntries, parent);\r\n                        _.forEachRight(node.children.nodes, (child) => {\r\n                            addNode(child, parent.depth + 1, parentIndex + 1)\r\n                        })\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        // Nodes loaded, fill selection list\r\n        let selectedNodes = _.filter(pickerEntries, (node) => {\r\n            return node.selected\r\n        }).map((node) => {\r\n            return node.node\r\n        });\r\n\r\n        selectedPaths = _.map(selectedNodes, \"path\");\r\n        pickerEntries = _.filter(pickerEntries, pickerNode => {\r\n            return !pickerNode.hidden;\r\n        });\r\n\r\n        return pickerEntries;\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        let {\r\n            render:nextRender, rootPaths:nextRootPaths, hideRoot:nextHideRoot,\r\n            openPaths:nextOpenPaths, selectedPaths:nextSelectedPaths, defaultSelectedPaths:nextDefaultSelectedPaths, defaultOpenPaths:nextDefaultOpenPaths,\r\n            ...nextPropsToCompare\r\n        } = nextProps;\r\n\r\n        let {\r\n            render, rootPaths, hideRoot,\r\n            openPaths, selectedPaths, defaultSelectedPaths, defaultOpenPaths,\r\n            ...previousPropsToCompare\r\n        } = this.props;\r\n\r\n        nextPropsToCompare = _.omit(nextPropsToCompare, _.functions(nextPropsToCompare));\r\n        previousPropsToCompare = _.omit(previousPropsToCompare, _.functions(previousPropsToCompare));\r\n\r\n        let changed = (this.isSelectionControlled ? !_.isEqual(selectedPaths, nextSelectedPaths) : !_.isEqual(this.state.selectedPaths,nextState.selectedPaths))\r\n            || (this.isOpenControlled ? !_.isEqual(openPaths, nextOpenPaths) : !_.isEqual(this.state.openPaths,nextState.openPaths))\r\n            || !(_.isEqual(nextPropsToCompare, previousPropsToCompare));\r\n\r\n        return changed;\r\n        // return true;\r\n    }\r\n\r\n    render() {\r\n        let selectedPaths = this.isSelectionControlled ? this.props.selectedPaths : this.state.selectedPaths;\r\n        let openPaths = this.isOpenControlled ? this.props.openPaths : this.state.openPaths;\r\n        let {rootPaths, openableTypes, selectableTypes, queryVariables} = this.props;\r\n\r\n        openPaths = _.clone(openPaths);\r\n        let fullyOpenPath = (path) => {\r\n            let rootFound = false;\r\n            _.tail(_.split(path, \"/\")).reduce((acc, it) => {\r\n                if (!rootFound) {\r\n                    _.forEach(rootPaths, rootPath => {\r\n                        rootFound = rootFound || _.startsWith(acc, rootPath);\r\n                    })\r\n                }\r\n                if (rootFound && _.indexOf(openPaths, acc) === -1) {\r\n                    openPaths.push(acc);\r\n                }\r\n                return acc + \"/\" + it\r\n            }, \"\");\r\n        };\r\n\r\n        _.each(selectedPaths, path => fullyOpenPath(path));\r\n\r\n        let vars = this.getVariables(selectedPaths, openPaths);\r\n\r\n        return <Query query={this.query} variables={vars} fetchPolicy={\"cache-first\"} >\r\n            {\r\n                ({error, loading, data}) => {\r\n                    let Render = this.props.render;\r\n                    if (this.props.onLoading) {\r\n                        this.props.onLoading(loading);\r\n                    }\r\n                    if (loading) {\r\n                        if (this.previousEntries) {\r\n                            return <Render {...this.state.eventsHandlers} {...this.state.renderProps}\r\n                                           pickerEntries={this.previousEntries} loading={true}/>\r\n                        } else {\r\n                            return <Render {...this.state.eventsHandlers} {...this.state.renderProps}\r\n                                           pickerEntries={[]} loading={true}/>\r\n                        }\r\n                    }\r\n                    if (error) return `Error! ${error.message}`;\r\n                    let pickerEntries = this.getPickerEntries(data, selectedPaths, openPaths);\r\n                    this.previousEntries = pickerEntries;\r\n                    return <Render {...this.state.eventsHandlers} {...this.state.renderProps}\r\n                                   pickerEntries={pickerEntries} loading={false || this.props.loading}/>\r\n                }\r\n            }\r\n        </Query>\r\n    }\r\n\r\n}\r\n\r\nPicker.propTypes = {\r\n    /**\r\n     * List of root paths for the picker\r\n     */\r\n    rootPaths: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n    /**\r\n     * List of folder paths that are open by default (uncontrolled mode)\r\n     */\r\n    defaultOpenPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * List of node types that can be \"opened\" (folders)\r\n     */\r\n    openableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n    /**\r\n     * List of open folders in controlled mode\r\n     */\r\n    openPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * List of node types that can be \"selected\" (items)\r\n     */\r\n    selectableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\r\n    /**\r\n     * Preselected items path (uncontrolled mode)\r\n     */\r\n    defaultSelectedPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * List of selected path in controlled mode\r\n     */\r\n    selectedPaths: PropTypes.arrayOf(PropTypes.string),\r\n\r\n    /**\r\n     * Callback when the selection has changed\r\n     */\r\n    onSelectionChange: PropTypes.func,\r\n\r\n    /**\r\n     * Component to use to do the full rendering of the tree. Should accept : pickerEntries,onSelectItem,onOpenItem . Other properties are passed through.\r\n     */\r\n    render: PropTypes.func,\r\n\r\n    /**\r\n     * Optional set of fragments to add to the graphQL query. Can be a string that identify a predefinedFragment or a fragment definition\r\n     */\r\n    fragments: PropTypes.arrayOf(PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.shape({\r\n            applyFor: PropTypes.string.isRequired,\r\n            variables: PropTypes.string,\r\n            gql: PropTypes.object.isRequired\r\n        })\r\n    ])),\r\n\r\n    /**\r\n     * Optional set of variable to pass to the graphQL query, in order to fulfill fragments needs\r\n     */\r\n    queryVariables: PropTypes.object\r\n\r\n};\r\n\r\n\r\nexport {Picker}","import React from 'react';\r\nimport {graphql} from 'react-apollo';\r\nimport gql from \"graphql-tag\";\r\nimport * as _ from \"lodash\";\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\n\r\nfunction withNodeFromPath(fragments) {\r\n    return (ViewComponent) => {\r\n        // GraphQL maps\r\n        let mapResultsToProps = ({data, ownProps}) => {\r\n            let node;\r\n\r\n            if (data.jcr && data.jcr.node) {\r\n                node = data.jcr.node;\r\n            }\r\n\r\n            return {\r\n                ...ownProps,\r\n                node: node,\r\n            };\r\n        };\r\n\r\n        let mapPropsToOptions = (props) => {\r\n            let vars = {\r\n                path: props.path,\r\n                workspace: props.workspace ? props.workspace : 'EDIT'\r\n            };\r\n            if (props.queryVariables) {\r\n                _.assign(vars, props.queryVariables);\r\n            }\r\n\r\n            return {\r\n                variables: vars,\r\n                skip: !props.path\r\n            }\r\n        };\r\n\r\n        let query = gql`\r\n            query NodeQuery($path:String!, $workspace:Workspace!) {\r\n                jcr(workspace:$workspace) {\r\n                    workspace\r\n                    node:nodeByPath(path: $path) {\r\n                        workspace\r\n                        path\r\n                        uuid\r\n                        ... node\r\n                    }\r\n                }\r\n            }`;\r\n\r\n        replaceFragmentsInDocument(query, fragments);\r\n\r\n        return graphql(query, {\r\n            props: mapResultsToProps,\r\n            options: mapPropsToOptions\r\n        })(ViewComponent);\r\n    }\r\n}\r\n\r\nexport {withNodeFromPath};\r\n","import React from 'react';\r\nimport {graphql} from 'react-apollo';\r\nimport gql from \"graphql-tag\";\r\nimport * as _ from \"lodash\";\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\n\r\nfunction withNodesFromPath(fragments) {\r\n    return (ViewComponent) => {\r\n        // GraphQL maps\r\n        let mapResultsToProps = ({data, ownProps}) => {\r\n            let nodes = [];\r\n\r\n            let jcr = data.jcr;\r\n\r\n            if (jcr) {\r\n                if (jcr.node) {\r\n                    nodes = jcr.node.children.nodes;\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...ownProps,\r\n                nodes: nodes,\r\n            };\r\n        };\r\n\r\n        let mapPropsToOptions = (props) => {\r\n            let vars = {\r\n                path: props.path,\r\n                types: props.types,\r\n            };\r\n            if (props.queryVariables) {\r\n                _.assign(vars, props.queryVariables);\r\n            }\r\n\r\n            return {\r\n                variables: vars,\r\n                skip: !props.path\r\n            }\r\n        };\r\n\r\n        let query = gql`\r\n            query NodesQuery($path:String!, $types:[String]!) {\r\n                jcr {\r\n                    node:nodeByPath(path: $path) {\r\n                        path\r\n                        uuid\r\n                        name\r\n                        children(typesFilter:{types:$types}) {\r\n                            nodes {\r\n                                path\r\n                                uuid\r\n                                name\r\n                                ... node\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }`;\r\n\r\n        replaceFragmentsInDocument(query, fragments);\r\n\r\n        return graphql(query, {\r\n            props: mapResultsToProps,\r\n            options: mapPropsToOptions\r\n        })(ViewComponent);\r\n    }\r\n}\r\n\r\nexport {withNodesFromPath};\r\n","import React from 'react';\r\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\r\nimport {connect} from 'react-redux'\r\n\r\nfunction withPathFromSelection(reduxStoreId) {\r\n    return (WrappedComponent) => {\r\n        return connect(\r\n            (state, ownProps) => ({\r\n                ...ownProps,\r\n                path: (state[\"selectedPaths_\" + reduxStoreId] && state[\"selectedPaths_\" + reduxStoreId].length === 1) ? state[\"selectedPaths_\" + reduxStoreId][0] : null,\r\n            }),\r\n            () => ({}))(WrappedComponent);\r\n    }\r\n}\r\n\r\nexport { withPathFromSelection }","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction withNotifications() {\r\n    return (WrappedComponent) => {\r\n        let Component = class extends React.Component {\r\n            render() {\r\n                return (<WrappedComponent notificationContext={this.context.notificationContext} {...this.props} />)\r\n            }\r\n        };\r\n\r\n        Component.contextTypes = {\r\n            notificationContext: PropTypes.object\r\n        };\r\n\r\n        return Component\r\n    }\r\n}\r\n\r\nexport { withNotifications }"]}