!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("material-ui"),require("i18next"),require("i18next-xhr-backend"),require("react-i18next"),require("redux"),require("lodash"),require("@jahia/apollo-dx"),require("react-apollo"),require("react-redux"),require("react-router-dom"),require("history"),require("react-router"),require("prop-types"),require("react-dom"),require("graphql-tag"),require("material-ui-icons")):"function"==typeof define&&define.amd?define(["exports","react","material-ui","i18next","i18next-xhr-backend","react-i18next","redux","lodash","@jahia/apollo-dx","react-apollo","react-redux","react-router-dom","history","react-router","prop-types","react-dom","graphql-tag","material-ui-icons"],t):t((e.jahia=e.jahia||{},e.jahia.reactcomponents={}),e.React,e.materialUi,e.i18n,e.XHR,e.reactI18next,e.redux,e._,e.jahia.apollodx,e.reactApollo,e.reactRedux,e.reactRouterDom,e.history,e.reactRouter,e.PropTypes,e.ReactDOM,e.gql,e.materialUiIcons)}(this,function(e,t,n,r,a,o,i,l,u,s,c,p,d,h,m,f,y,g){"use strict";var v="default"in t?t.default:t;r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a,m=m&&m.hasOwnProperty("default")?m.default:m,f=f&&f.hasOwnProperty("default")?f.default:f,y=y&&y.hasOwnProperty("default")?y.default:y;function b(e){return e=e||{},r.use(a).init({lng:e.currentLanguage?e.currentLanguage:void 0,fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},backend:{loadPath:(e.contextPath?e.contextPath:"")+"/modules/{{ns}}/javascript/locales/{{lng}}.json"}}),r}var P={},E=function(){var e=void 0;return"undefined"!=typeof window&&(e=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({name:"DX Redux",instanceId:"dx"})),i.createStore(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return l.mapValues(P,function(n,r){return n(e[r],t)})},e)}(),O=n.createMuiTheme();function x(e,t){var n=this,r=function(n){var r=[],a=e.location.pathname,o=t+":"+n;return a.indexOf("(")>-1&&(r=(a=(a=a.substr(a.indexOf("(")+1)).substr(0,a.indexOf(")"))).split("//"),r=l.map(r,function(e){return e.startsWith(t+":")?o:e})),-1===r.indexOf(o)&&r.push(o),"/("+l.join(r,"//")+")"},a=function(n){var r=void 0;return n?(r=e.location.state?e.location.state:{})["router_"+t]=n:e.location.state&&delete(r=e.location.state)["router_"+t],r},o=function(e){if(e.indexOf("(")>-1){var n=(e=(e=e.substr(e.indexOf("(")+1)).substr(0,e.indexOf(")"))).split("//"),r=t+":",a=l.find(n,function(e){return e.startsWith(r)});if(a)return a.substr(r.length)}return""},i=l.clone(e.location);i.pathname=o(i.pathname);var u=[],s={length:e.length,action:e.action,location:i,createHref:function(t){return e.createHref({pathname:r(t.pathname)})},push:function(t,n){return e.push(r(t),a(n))},replace:function(t,n){e.replace(r(t),a(n))},go:function(t){e.go(t)},goBack:function(){e.goBack()},goForward:function(){e.goForward()},block:function(t){return e.block(t)},listen:function(e){return u.push(e),function(){l.pull(u,e)}},dispose:function(){c()}},c=e.listen(function(e){var r=o(e.pathname),a=void 0;e.state&&e.state["router_"+t]&&(a=e.state["router_"+t]),s.location.pathname===r&&s.location.state===a||(Object.assign(s.location,e),s.location.pathname=r,s.location.state=a,l.each(u,function(e){return e.call(n,s.location)}))});return s}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},j=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},$=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},q=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},I=d.createHashHistory(),N=function(e){w(t,e);function t(e){T(this,t);var n=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.outletHistory=x(I,e.outlet),n}return k(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.outletHistory.dispose()}},{key:"render",value:function(){return v.createElement(h.Router,{history:this.outletHistory},this.props.children)}}]),t}(v.Component),R=function(e){w(t,e);function t(e){return T(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return k(t,[{key:"render",value:function(){return v.createElement(N,{outlet:this.props.id},v.createElement("div",null,v.createElement(p.Link,{to:"/test1/value1"},"test1/value1"),v.createElement(p.Link,{to:"/test1/value2"},"Test1/value2"),v.createElement(p.Link,{to:"/test2"},"test2"),v.createElement(p.Link,{to:"/test3"},"test3"),v.createElement(p.Route,{path:"/test1/:value",component:function(e){return v.createElement(n.Paper,{elevation:4},v.createElement(n.Typography,{type:"headline",component:"h3"},"Page 1"),v.createElement(n.Typography,{component:"p"},"Param = ",e.match.params.value))}}),v.createElement(p.Route,{path:"/test2",component:function(e){return v.createElement(n.Paper,{elevation:4},v.createElement(n.Typography,{type:"headline",component:"h3"},"Page 2"))}}),v.createElement(p.Route,{path:"/test3",component:function(e){return v.createElement(n.Paper,{elevation:4},v.createElement(n.Typography,{type:"headline",component:"h3"},"Page 3"))}})))}}]),t}(v.Component),L=function(e){w(t,e);function t(e){return T(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return k(t,[{key:"getChildContext",value:function(){return{dxContext:this.props.dxContext}}},{key:"render",value:function(){var e=this.props,t=e.dxContext,r=e.children,a=e.i18n,i=e.apollo,l=e.redux,d=e.mui,h=e.router,m=v.Children.only(r);if(a){var f={currentLanguage:t.uilang,contextPath:t.contextPath};"object"===(void 0===a?"undefined":C(a))&&Object.assign(f,a),m=v.createElement(o.I18nextProvider,{i18n:b(f)},m)}if(h){var y=p.HashRouter,g={};"object"===(void 0===y?"undefined":C(y))&&"outlet"===y.type&&(y=N,g.outlet=y.outlet),m=v.createElement(p.HashRouter,g,m)}if(i){var P={contextPath:t.contextPath};"object"===(void 0===i?"undefined":C(i))&&Object.assign(P,i),m=v.createElement(s.ApolloProvider,{client:u.client(P)},m)}return l&&(m=v.createElement(c.Provider,{store:E},m)),d&&(m=v.createElement(n.MuiThemeProvider,{theme:O},m)),m}}]),t}(v.Component);L.childContextTypes={dxContext:m.object};var M=function(e){w(t,e);function t(e){T(this,t);var n=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={reactElements:[]},n}return k(t,[{key:"componentDidMount",value:function(){var e=this;this.props.components&&!this.done&&this.props.components.then(function(t){e.done=!0,e.setState({reactElements:t})})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return this.done?v.createElement("div",null,this.state.reactElements):v.createElement("div",null)}}]),t}(v.Component),B=$(['\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedView(templateType:"js", view:"react") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }'],['\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedView(templateType:"js", view:"react") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }']),V=function(e){w(t,e);function t(e){T(this,t);var n=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentCache=[],n}return k(t,[{key:"mapResultsToProps",value:function(e){var t=e.data,n=e.ownProps,r=[],a=t.jcr,o=eval;a&&a.nodesByQuery&&(r=l.map(l.flatMap(a.nodesByQuery.nodes,"children.nodes"),function(e){return o("("+e.renderedView.output+")")}));var i=[];l.each(r,function(e){i=i.concat(e.getImports())});var u=void 0;return i.length>0&&(u=Promise.all(l.map(i,function(e){return SystemJS.import(e)})).then(function(e){return l.map(r,function(t){var n=t.getImports().length,r=t.createElement.apply(t,[v,f].concat(q(e)));return e.splice(n),r})})),S({},n,{components:u})}},{key:"mapPropsToOptions",value:function(e){return{variables:{query:"select * from [reactnt:componentsFolder] where [react:id]='"+e.id+"'"}}}},{key:"render",value:function(){var e=this.props.renderComponent,t=l.find(this.componentCache,function(t){return t.renderComponent===e}),n=void 0;if(t)n=t.dataComponent;else{var r=y(B);n=s.graphql(r,{props:this.mapResultsToProps,options:this.mapPropsToOptions})(e||M),this.componentCache.push({renderComponent:e,dataComponent:n})}return v.createElement(n,this.props)}}]),t}(v.Component);V.propTypes={id:m.string.isRequired,renderComponent:m.element},e.LanguageSwitcher=function(e){w(t,e);function t(e,n){T(this,t);var r=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={anchorEl:null},r}return k(t,[{key:"handleClick",value:function(e){this.setState({anchorEl:e.target})}},{key:"handleClose",value:function(e){this.setState({anchorEl:null}),e&&this.context.i18n.changeLanguage(e)}},{key:"render",value:function(){var e=this;return v.createElement("div",null,v.createElement(n.Button,{onClick:this.handleClick.bind(this)},this.props.t("label.languages")),v.createElement(n.Menu,{open:Boolean(this.state.anchorEl),onClose:this.handleClose.bind(this,null),anchorEl:this.state.anchorEl},["fr","en"].map(function(t){return v.createElement(n.MenuItem,{onClick:e.handleClose.bind(e,t),key:t,value:t},t)})))}}]),t}(v.Component),e.LanguageSwitcher.contextTypes={i18n:m.object},e.LanguageSwitcher=o.translate("react-dxcomponents")(e.LanguageSwitcher);var D=function(e){return v.createElement(n.Grid,{container:!0},v.createElement(n.Grid,{item:!0,xs:12,md:6},v.createElement(n.Paper,null," ",e.leftCol)),v.createElement(n.Grid,{item:!0,xs:12,md:6},v.createElement(n.Paper,null,e.rightCol)))};D.propTypes={leftCol:m.element,rightCol:m.element};var Q=$(["\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"],["\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"]);function F(e){return function(t){var n=y(Q);return u.replaceFragmentsInDocument(n,e),s.graphql(n,{props:function(e){var t=e.data,n=e.ownProps,r=[],a=t.jcr;return a&&a.node&&(r=a.node.children.nodes),S({},n,{nodes:r})},options:function(e){var t={path:e.path,types:e.types};return e.queryVariables&&l.assign(t,e.queryVariables),{variables:t,skip:!e.path}}})(t)}}var H=$(['fragment Test on JCRNode {\n                myprop:property(name:"myprop") {\n                    value\n                }\n            }'],['fragment Test on JCRNode {\n                myprop:property(name:"myprop") {\n                    value\n                }\n            }']),U=$(['\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n'],['\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n']),A=$(['\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:"/",name:$name,primaryNodeType:"nt:unstructured") {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n            }\n        }\n    }\n'],['\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:"/",name:$name,primaryNodeType:"nt:unstructured") {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n            }\n        }\n    }\n']),W=$(["\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path)\n        }\n    }\n"],["\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path)\n        }\n    }\n"]),X=function(e){w(t,e);function t(e){T(this,t);var r=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.Component=F([{applyFor:"node",gql:y(H)}])(function(e){return v.createElement(n.Table,null,v.createElement(n.TableHead,null,v.createElement(n.TableRow,null,v.createElement(n.TableCell,null,"Name"),v.createElement(n.TableCell,null,"Value"),v.createElement(n.TableCell,null,"Update"),v.createElement(n.TableCell,null,"Delete"))),v.createElement(n.TableBody,null,e.nodes?e.nodes.map(function(e){return v.createElement(n.TableRow,{key:e.uuid},v.createElement(n.TableCell,null,e.name),v.createElement(n.TableCell,null,e.myprop.value),v.createElement(n.TableCell,null,v.createElement(n.Button,{onClick:function(){return r.props.setPropertyMutation({variables:{path:e.path,value:"test:"+new Date},refetchQueries:["NodesQuery"]})}},"Update")),v.createElement(n.TableCell,null,v.createElement(n.Button,{onClick:function(){return r.props.removeNodeMutation({variables:{path:e.path},refetchQueries:["NodesQuery"]})}},"Delete")))}):[]))}),r}return k(t,[{key:"render",value:function(){var e=this,t=this.Component;return v.createElement("div",null,v.createElement(n.Button,{onClick:function(){return e.props.addNodeMutation({variables:{name:"name-"+(new Date).getTime(),value:"test:"+new Date},refetchQueries:["NodesQuery"]})}},"New"),v.createElement(t,{path:"/",types:["nt:unstructured"]}))}}]),t}(t.Component),G=y(U),J=y(A),z=y(W),K=s.graphql(G,{name:"setPropertyMutation"})(s.graphql(J,{name:"addNodeMutation"})(s.graphql(z,{name:"removeNodeMutation"})(X))),Y=function(e){var t=this,r=e.headers?e.headers:function(){return v.createElement(n.TableRow,null,v.createElement(n.TableCell,null,"Name"))},a=e.row?e.row:function(r){return v.createElement(n.TableRow,{key:r.path},v.createElement(n.TableCell,null,e.textRenderer?e.textRenderer.call(t,r):r.name))};return v.createElement(n.Table,null,v.createElement(n.TableHead,null,r()),v.createElement(n.TableBody,null,e.nodes?e.nodes.map(a):[]))};Y.propTypes={headers:m.func,row:m.func,textRenderer:m.func,nodes:m.arrayOf(m.object)};e.PickerViewMaterial=function(e){var t=this;return v.createElement(n.List,null,e.pickerEntries.map(function(r){return v.createElement(n.ListItem,{button:!0,onClick:function(){return r.selectable?e.onSelectItem(r.path,!r.selected):e.onOpenItem(r.path,!r.open)},key:r.path},v.createElement(n.ListItemIcon,{style:r.selectable?{}:{opacity:0}},r.selected?v.createElement(g.RadioButtonChecked,null):v.createElement(g.RadioButtonUnchecked,null)),v.createElement(n.ListItemText,{style:{paddingLeft:r.depth*e.theme.spacing.unit},inset:!0,primary:e.textRenderer?e.textRenderer.call(t,r):r.name}),v.createElement(n.ListItemSecondaryAction,null,r.openable&&r.hasChildren?v.createElement(n.IconButton,{onClick:function(){return e.onOpenItem(r.path,!r.open)}},r.open?v.createElement(g.ExpandLess,null):v.createElement(g.ExpandMore,null)):null))}))},e.PickerViewMaterial.propTypes={pickerEntries:m.array.isRequired,onSelectItem:m.func,onOpenItem:m.func,textRenderer:m.func},e.PickerViewMaterial=n.withTheme()(e.PickerViewMaterial),e.PickerViewMaterialMultiple=function(e){var t=this;return v.createElement(n.List,null,e.pickerEntries.map(function(r){return v.createElement(n.ListItem,{button:!0,onClick:function(){return r.selectable?e.onSelectItem(r.path,!r.selected,!0):e.onOpenItem(r.path,!r.open)},key:r.path},v.createElement(n.ListItemIcon,{style:r.selectable?{}:{opacity:0}},r.selected?v.createElement(g.CheckBox,null):v.createElement(g.CheckBoxOutlineBlank,null)),v.createElement(n.ListItemText,{style:{paddingLeft:r.depth*e.theme.spacing.unit},inset:!0,primary:e.textRenderer?e.textRenderer.call(t,r):r.name}),v.createElement(n.ListItemSecondaryAction,null,r.openable&&r.hasChildren?v.createElement(n.IconButton,{onClick:function(){return e.onOpenItem(r.path,!r.open)}},r.open?v.createElement(g.ExpandLess,null):v.createElement(g.ExpandMore,null)):null))}))},e.PickerViewMaterialMultiple.propTypes={pickerEntries:m.array.isRequired,onSelectItem:m.func,onOpenItem:m.func,textRenderer:m.func},e.PickerViewMaterialMultiple=n.withTheme()(e.PickerViewMaterialMultiple);var Z=$(["\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"],["\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"]),ee=function(e){w(t,e);function t(e){T(this,t);var n=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=y(Z),a=e.fragments,o=_(e,["fragments"]);u.replaceFragmentsInDocument(r,a),n.graphqlComponentProps=o;var i={},c=n;return e.openPaths||(i.openPaths=e.defaultOpenPaths?l.clone(e.defaultOpenPaths):[],o.onOpenItem=function(t,n){c.setState(function(e,r){return{openPaths:n?[].concat(q(e.openPaths),[t]):l.filter(e.openPaths,function(e){return e!==t})}}),e.onOpenItem&&e.onOpenItem(t,n)}),e.selectedPaths||(i.selectedPaths=e.defaultSelectedPaths?l.clone(e.defaultSelectedPaths):[],o.onSelectItem=function(t,n,r){c.setState(function(e,a){return{selectedPaths:n?[].concat(q(r?e.selectedPaths:[]),[t]):l.filter(e.selectedPaths,function(e){return e!==t})}}),e.onSelectItem&&e.onSelectItem(t,select,r)}),n.state=i,n.GraphQLComponent=s.graphql(r,{props:n.mapResultsToProps,options:n.mapPropsToOptions})(n.props.render),n}return k(t,[{key:"componentDidUpdate",value:function(e,t,n){this.props.onSelectionChange&&!l.isEqual(this.state.selectedPaths,t.selectedPaths)&&this.props.onSelectionChange(this.state.selectedPaths)}},{key:"componentWillReceiveProps",value:function(e,t){e.fragments,e.onOpenItem,e.onSelectItem;var n=_(e,["fragments","onOpenItem","onSelectItem"]);l.assign(this.graphqlComponentProps,n)}},{key:"mapResultsToProps",value:function(e){var t=e.data,n=e.ownProps,r=n.selectedPaths,a=n.openPaths?n.openPaths:[],o=[],i={},u=t.jcr,s=function(e,t,n){var u=!1;e.selectable&&(u=-1!==l.indexOf(r,e.path));var s={name:e.name,path:e.path,open:e.openable&&-1!==l.indexOf(a,e.path),selected:u,openable:e.openable,selectable:e.selectable,depth:t,prefix:l.repeat("&nbsp;",3*t),node:e,hidden:!1,hasChildren:e.children.pageInfo.totalCount>0};return o.splice(n,0,s),i[e.uuid]=s,s};u&&(u.rootNodes&&l.forEach(u.rootNodes,function(e){s(e,0,0).hidden=n.hideRoot}),u.openNodes&&l.sortBy(u.openNodes,["path"]).forEach(function(e){var t=i[e.uuid];if(t){var n=l.indexOf(o,t);l.forEachRight(e.children.nodes,function(e){s(e,t.depth+1,n+1)})}}));var c=l.filter(o,function(e){return e.selected}).map(function(e){return e.node});return r=l.map(c,"path"),o=l.filter(o,function(e){return!e.hidden}),S({},n,{pickerEntries:o})}},{key:"mapPropsToOptions",value:function(e){var t=e.openPaths?e.openPaths:[];e.selectedPaths&&l.each(e.selectedPaths,function(n){return function(e,n){var r=!1;l.tail(l.split(n,"/")).reduce(function(n,a){return r||l.forEach(e.rootPaths,function(e){r=r||l.startsWith(n,e)}),r&&-1===l.indexOf(t,n)&&t.push(n),n+"/"+a},"")}(e,n)});var n={rootPaths:e.rootPaths,types:l.union(e.openableTypes,e.selectableTypes),selectable:e.selectableTypes,openable:e.openableTypes,openPaths:t};return e.queryVariables&&l.assign(n,e.queryVariables),{variables:n}}},{key:"render",value:function(){var e=this.GraphQLComponent;return v.createElement(e,S({},this.graphqlComponentProps,this.state))}}]),t}(v.Component);ee.propTypes={rootPaths:m.arrayOf(m.string).isRequired,defaultOpenPaths:m.arrayOf(m.string),openableTypes:m.arrayOf(m.string).isRequired,openPaths:m.arrayOf(m.string),selectableTypes:m.arrayOf(m.string).isRequired,defaultSelectedPaths:m.arrayOf(m.string),selectedPaths:m.arrayOf(m.string),onSelectionChange:m.func,render:m.func,fragments:m.arrayOf(m.oneOfType([m.string,m.shape({applyFor:m.string.isRequired,variables:m.string,gql:m.object.isRequired})])),queryVariables:m.object},e.DxContextProvider=L,e.withDxContext=function(){return function(e){var t=function(t){w(n,t);function n(){return T(this,n),j(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return k(n,[{key:"render",value:function(){return v.createElement(e,S({dxContext:this.context.dxContext},this.props))}}]),n}(v.Component);return t.contextTypes={dxContext:m.object},t}},e.DynamicComponentsList=V,e.SimpleListView=M,e.getI18n=b,e.TestLayout=D,e.MutationExample=K,e.NodesTableViewMaterial=Y,e.withNodesFromPath=F,e.withPathFromSelection=function(e){return function(t){return c.connect(function(t,n){return S({},n,{path:t["selectedPaths_"+e]&&1===t["selectedPaths_"+e].length?t["selectedPaths_"+e][0]:null})},function(){return{}})(t)}},e.Picker=ee,e.createOutletHistory=x,e.OutletRouter=N,e.RouterExample=R,e.reducers=P,e.store=E,e.resetStateReducer=function(e,t){if("RESET_STATE"!==t.type)return e},e.theme=O,Object.defineProperty(e,"__esModule",{value:!0})});