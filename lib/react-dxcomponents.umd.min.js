!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("react-apollo"),require("graphql-tag"),require("lodash"),require("@jahia/apollo-dx"),require("prop-types"),require("react-redux"),require("redux"),require("material-ui"),require("material-ui-icons"),require("history"),require("react-router"),require("react-router-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","react-apollo","graphql-tag","lodash","@jahia/apollo-dx","prop-types","react-redux","redux","material-ui","material-ui-icons","history","react-router","react-router-dom"],t):t((e.jahia=e.jahia||{},e.jahia.reactcomponents={}),e.React,e.ReactDOM,e.reactApollo,e.gql,e._,e.jahia.apollodx,e.PropTypes,e.reactRedux,e.redux,e.materialUi,e.materialUiIcons,e.history,e.reactRouter,e.reactRouterDom)}(this,function(e,t,n,r,o,a,l,i,u,c,p,s,d,h,m){"use strict";var f="default"in t?t.default:t;n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o,i=i&&i.hasOwnProperty("default")?i.default:i;var y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},_=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},T=function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={reactElements:[]},n}return E(t,[{key:"componentDidMount",value:function(){var e=this;this.props.components&&!this.done&&this.props.components.then(function(t){e.done=!0,e.setState({reactElements:t})})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return this.done?f.createElement("div",null,this.state.reactElements):f.createElement("div",null)}}]),t}(f.Component),k=g(['\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedView(templateType:"js", view:"react") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }'],['\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedView(templateType:"js", view:"react") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }']),C=function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentCache=[],n}return E(t,[{key:"mapResultsToProps",value:function(e){var t=e.data,r=e.ownProps,o=[],l=t.jcr,i=eval;l&&l.nodesByQuery&&(o=a.map(a.flatMap(l.nodesByQuery.nodes,"children.nodes"),function(e){return i("("+e.renderedView.output+")")}));var u=[];a.each(o,function(e){u=u.concat(e.getImports())});var c=void 0;return u.length>0&&(c=Promise.all(a.map(u,function(e){return SystemJS.import(e)})).then(function(e){return a.map(o,function(t){var r=t.getImports().length,o=t.createElement.apply(t,[f,n].concat(_(e)));return e.splice(r),o})})),v({},r,{components:c})}},{key:"mapPropsToOptions",value:function(e){return{variables:{query:"select * from [reactnt:componentsFolder] where [react:id]='"+e.id+"'"}}}},{key:"render",value:function(){var e=this.props.renderComponent,t=a.find(this.componentCache,function(t){return t.renderComponent===e}),n=void 0;if(t)n=t.dataComponent;else{var i=o(k);n=r.graphql(i,{props:this.mapResultsToProps,options:this.mapPropsToOptions})(e||T),this.componentCache.push({renderComponent:e,dataComponent:n})}return f.createElement(r.ApolloProvider,{client:l.client},f.createElement(n,this.props))}}]),t}(f.Component);C.propTypes={id:i.string.isRequired,renderComponent:i.element};var O={},N=function(){var e=void 0;return"undefined"!=typeof window&&(e=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({name:"DX Redux",instanceId:"dx"})),c.createStore(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return a.mapValues(O,function(n,r){return n(e[r],t)})},e)}(),S=function(e,t){if("RESET_STATE"!==t.type)return e},I=g(["\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"],["\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"]);e.PickerViewMaterial=function(e){var t=this;return f.createElement(p.List,null,e.pickerEntries.map(function(n){return f.createElement(p.ListItem,{button:!0,onClick:function(){return n.selectable?e.onSelectItem(n.path,!n.selected):e.onOpenItem(n.path,!n.open)},key:n.path},f.createElement(p.ListItemIcon,{style:n.selectable?{}:{opacity:0}},n.selected?f.createElement(s.RadioButtonChecked,null):f.createElement(s.RadioButtonUnchecked,null)),f.createElement(p.ListItemText,{style:{paddingLeft:n.depth*e.theme.spacing.unit},inset:!0,primary:e.textRenderer?e.textRenderer.call(t,n):n.name}),f.createElement(p.ListItemSecondaryAction,null,n.openable&&n.hasChildren?f.createElement(p.IconButton,{onClick:function(){return e.onOpenItem(n.path,!n.open)}},n.open?f.createElement(s.ExpandLess,null):f.createElement(s.ExpandMore,null)):null))}))},e.PickerViewMaterial.propTypes={pickerEntries:i.array.isRequired,onSelectItem:i.func,onOpenItem:i.func,textRenderer:i.func},e.PickerViewMaterial=p.withTheme()(e.PickerViewMaterial),e.PickerViewMaterialMultiple=function(e){var t=this;return f.createElement(p.List,null,e.pickerEntries.map(function(n){return f.createElement(p.ListItem,{button:!0,onClick:function(){return n.selectable?e.onSelectItem(n.path,!n.selected,!0):e.onOpenItem(n.path,!n.open)},key:n.path},f.createElement(p.ListItemIcon,{style:n.selectable?{}:{opacity:0}},n.selected?f.createElement(s.CheckBox,null):f.createElement(s.CheckBoxOutlineBlank,null)),f.createElement(p.ListItemText,{style:{paddingLeft:n.depth*e.theme.spacing.unit},inset:!0,primary:e.textRenderer?e.textRenderer.call(t,n):n.name}),f.createElement(p.ListItemSecondaryAction,null,n.openable&&n.hasChildren?f.createElement(p.IconButton,{onClick:function(){return e.onOpenItem(n.path,!n.open)}},n.open?f.createElement(s.ExpandLess,null):f.createElement(s.ExpandMore,null)):null))}))},e.PickerViewMaterialMultiple.propTypes={pickerEntries:i.array.isRequired,onSelectItem:i.func,onOpenItem:i.func,textRenderer:i.func},e.PickerViewMaterialMultiple=p.withTheme()(e.PickerViewMaterialMultiple);var R=function(e){var t=this,n=e.headers?e.headers:function(){return f.createElement(p.TableRow,null,f.createElement(p.TableCell,null,"Name"))},r=e.row?e.row:function(n){return f.createElement(p.TableRow,{key:n.path},f.createElement(p.TableCell,null,e.textRenderer?e.textRenderer.call(t,n):n.name))};return f.createElement(p.Table,null,f.createElement(p.TableHead,null,n()),f.createElement(p.TableBody,null,e.nodes?e.nodes.map(r):[]))};R.propTypes={headers:i.func,row:i.func,textRenderer:i.func,nodes:i.arrayOf(i.object)};var $=g(["\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"],["\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"]);function w(e){return function(t){var n=o($);return l.replaceFragmentsInDocument(n,e),r.graphql(n,{props:function(e){var t=e.data,n=e.ownProps,r=[],o=t.jcr;return o&&o.node&&(r=o.node.children.nodes),v({},n,{nodes:r})},options:function(e){var t={path:e.path,types:e.types};return e.queryVariables&&a.assign(t,e.queryVariables),{variables:t,skip:!e.path}}})(t)}}var x=function(e){return f.createElement(p.Grid,{container:!0},f.createElement(p.Grid,{item:!0,xs:12,md:6},f.createElement(p.Paper,null," ",e.leftCol)),f.createElement(p.Grid,{item:!0,xs:12,md:6},f.createElement(p.Paper,null,e.rightCol)))};x.propTypes={leftCol:i.element,rightCol:i.element};function j(e,t){var n=this,r=function(n){var r=[],o=e.location.pathname,l=t+":"+n;return o.indexOf("(")>-1&&(r=(o=(o=o.substr(o.indexOf("(")+1)).substr(0,o.indexOf(")"))).split("//"),r=a.map(r,function(e){return e.startsWith(t+":")?l:e})),-1===r.indexOf(l)&&r.push(l),"/("+a.join(r,"//")+")"},o=function(n){var r=void 0;return n?(r=e.location.state?e.location.state:{})["router_"+t]=n:e.location.state&&delete(r=e.location.state)["router_"+t],r},l=function(e){if(e.indexOf("(")>-1){var n=(e=(e=e.substr(e.indexOf("(")+1)).substr(0,e.indexOf(")"))).split("//"),r=t+":",o=a.find(n,function(e){return e.startsWith(r)});if(o)return o.substr(r.length)}return""},i=a.clone(e.location);i.pathname=l(i.pathname);var u=[],c={length:e.length,action:e.action,location:i,createHref:function(t){return e.createHref({pathname:r(t.pathname)})},push:function(t,n){return e.push(r(t),o(n))},replace:function(t,n){e.replace(r(t),o(n))},go:function(t){e.go(t)},goBack:function(){e.goBack()},goForward:function(){e.goForward()},block:function(t){return e.block(t)},listen:function(e){return u.push(e),function(){a.pull(u,e)}},dispose:function(){p()}},p=e.listen(function(e){var r=l(e.pathname),o=void 0;e.state&&e.state["router_"+t]&&(o=e.state["router_"+t]),c.location.pathname===r&&c.location.state===o||(Object.assign(c.location,e),c.location.pathname=r,c.location.state=o,a.each(u,function(e){return e.call(n,c.location)}))});return c}var q=d.createHashHistory(),L=function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.outletHistory=j(q,e.outlet),n}return E(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.outletHistory.dispose()}},{key:"render",value:function(){return f.createElement(h.Router,{history:this.outletHistory},this.props.children)}}]),t}(f.Component),M=function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n.components=[{link:"/link1",label:"Link 1",component:function(e){return f.createElement("div",null,"toto")}},{link:"/link2",label:"Link 2",component:function(e){return f.createElement("div",null,"titi")}}],n}return E(t,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return f.createElement("div",null,f.createElement(p.Button,{onClick:function(){return e.handleOpen()}},"Open"),f.createElement(p.Dialog,{open:this.state.open,onClose:function(){return e.handleClose()}},f.createElement(p.DialogTitle,null,"Dialog"),f.createElement(p.DialogContent,null,f.createElement(L,{outlet:"outlet1"},f.createElement("div",null,f.createElement("div",null,a.map(this.components,function(e){return f.createElement(m.Link,{key:e.link,to:e.link},e.label)})),f.createElement("div",null,a.map(this.components,function(e){return f.createElement(m.Route,{key:e.link,path:e.link,component:e.component})})))),f.createElement(L,{outlet:"outlet2"},f.createElement("div",null,f.createElement("div",null,a.map(this.components,function(e){return f.createElement(m.Link,{key:e.link,to:e.link},e.label)})),f.createElement("div",null,a.map(this.components,function(e){return f.createElement(m.Route,{key:e.link,path:e.link,component:e.component})}))))),f.createElement(p.DialogActions,null,f.createElement(p.Button,{onClick:function(){return e.handleClose()}},"Cancel"),",",f.createElement(p.Button,{onClick:function(){return e.handleClose()}},"Submit"))))}}]),t}(f.Component),B=function(e){P(t,e);function t(e){return y(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,[{key:"render",value:function(){return f.createElement(L,{outlet:this.props.id},f.createElement("div",null,f.createElement(m.Link,{to:"/test1/toto"},"test1/value1"),f.createElement(m.Link,{to:"/test1/tutu"},"Test1/value2"),f.createElement(m.Link,{to:"/test2"},"test2"),f.createElement(m.Link,{to:"/test3"},"test3"),f.createElement(m.Route,{path:"/test1/:value",component:function(e){return f.createElement(p.Paper,{elevation:4},f.createElement(p.Typography,{type:"headline",component:"h3"},"Page 1"),f.createElement(p.Typography,{component:"p"},"Paper can be used to build surface or other elements for your application. Param = ",e.match.params.value))}}),f.createElement(m.Route,{path:"/test2",component:function(e){return f.createElement(p.Paper,{elevation:4},f.createElement(p.Typography,{type:"headline",component:"h3"},"Page 2"))}}),f.createElement(m.Route,{path:"/test3",component:function(e){return f.createElement(p.Paper,{elevation:4},f.createElement(p.Typography,{type:"headline",component:"h3"},"Page 3"))}})))}}]),t}(f.Component),V=g(['fragment Test on JCRNode {\n            myprop:property(name:"myprop") {\n                value\n            }\n        }'],['fragment Test on JCRNode {\n            myprop:property(name:"myprop") {\n                value\n            }\n        }']),D=g(['\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n'],['\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n']),F=g(['\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:"/",name:$name,primaryNodeType:"nt:unstructured") {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n            }\n        }\n    }\n'],['\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:"/",name:$name,primaryNodeType:"nt:unstructured") {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n            }\n        }\n    }\n']),Q=g(["\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path) \n        }\n    }\n"],["\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path) \n        }\n    }\n"]),U=function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.Component=w([{applyFor:"node",gql:o(V)}])(function(e){return f.createElement(p.Table,null,f.createElement(p.TableHead,null,f.createElement(p.TableRow,null,f.createElement(p.TableCell,null,"Name"),f.createElement(p.TableCell,null,"Value"),f.createElement(p.TableCell,null,"Update"),f.createElement(p.TableCell,null,"Delete"))),f.createElement(p.TableBody,null,e.nodes?e.nodes.map(function(e){return f.createElement(p.TableRow,{key:e.uuid},f.createElement(p.TableCell,null,e.name),f.createElement(p.TableCell,null,e.myprop.value),f.createElement(p.TableCell,null,f.createElement(p.Button,{onClick:function(){return n.props.setPropertyMutation({variables:{path:e.path,value:"test:"+new Date},refetchQueries:["NodesQuery"]})}},"Update")),f.createElement(p.TableCell,null,f.createElement(p.Button,{onClick:function(){return n.props.removeNodeMutation({variables:{path:e.path},refetchQueries:["NodesQuery"]})}},"Delete")))}):[]))}),n}return E(t,[{key:"render",value:function(){var e=this,t=this.Component;return f.createElement("div",null,f.createElement(p.Button,{onClick:function(){return e.props.addNodeMutation({variables:{name:"name-"+(new Date).getTime(),value:"test:"+new Date},refetchQueries:["NodesQuery"]})}},"New"),f.createElement(t,{path:"/",types:["nt:unstructured"]}))}}]),t}(t.Component),A=o(D),H=o(F),K=o(Q),Y=function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.Component=r.graphql(A,{name:"setPropertyMutation"})(r.graphql(H,{name:"addNodeMutation"})(r.graphql(K,{name:"removeNodeMutation"})(U))),n}return E(t,[{key:"render",value:function(){var e=this.Component;return f.createElement(r.ApolloProvider,{client:l.client},f.createElement(e,null))}}]),t}(f.Component),W=p.createMuiTheme();console.log(W),e.DynamicComponentsList=C,e.SimpleListView=T,e.withPickerModel=function(e,t){return function(n){var i=o(I);l.replaceFragmentsInDocument(i,e);var c=r.graphql(i,{props:function(e){var t=e.data,n=e.ownProps,r=n.selectedPaths,o=n.openPaths?n.openPaths:[],l=[],i={},u=t.jcr,c=function(e,t,n){var u=!1;e.selectable&&(u=-1!==a.indexOf(r,e.path));var c={name:e.name,path:e.path,open:e.openable&&-1!==a.indexOf(o,e.path),selected:u,openable:e.openable,selectable:e.selectable,depth:t,prefix:a.repeat("&nbsp;",3*t),node:e,hidden:!1,hasChildren:e.children.pageInfo.totalCount>0};return l.splice(n,0,c),i[e.uuid]=c,c};u&&(u.rootNodes&&a.forEach(u.rootNodes,function(e){c(e,0,0).hidden=n.hideRoot}),u.openNodes&&a.sortBy(u.openNodes,["path"]).forEach(function(e){var t=i[e.uuid];if(t){var n=a.indexOf(l,t);a.forEachRight(e.children.nodes,function(e){c(e,t.depth+1,n+1)})}}));var p=a.filter(l,function(e){return e.selected}).map(function(e){return e.node});return r=a.map(p,"path"),l=a.filter(l,function(e){return!e.hidden}),v({},n,{pickerEntries:l})},options:function(e){var t=e.openPaths?e.openPaths:[];e.selectedPaths&&a.each(e.selectedPaths,function(n){return function(e,n){var r=!1;a.tail(a.split(n,"/")).reduce(function(n,o){return r||a.forEach(e.rootPaths,function(e){r=r||a.startsWith(n,e)}),r&&-1===a.indexOf(t,n)&&t.push(n),n+"/"+o},"")}(e,n)});var n={rootPaths:e.rootPaths,types:a.union(e.openableTypes,e.selectableTypes),selectable:e.selectableTypes,openable:e.openableTypes,openPaths:t};return e.queryVariables&&a.assign(n,e.queryVariables),{variables:n}}})(n);if(t){var p=u.connect(function(e,n){return v({},n,{openPaths:e["openPaths_"+t]?e["openPaths_"+t]:n.openPaths,selectedPaths:e["selectedPaths_"+t]?e["selectedPaths_"+t]:n.selectedPaths})},function(e,n){return{onSelectItem:function(n,r,o){e({type:r?"SELECT_PICKER_ENTRY_"+(o?"MULTIPLE_":"SINGLE_")+t:"UNSELECT_PICKER_ENTRY_"+t,path:n})},onOpenItem:function(n,r){e({type:r?"OPEN_PICKER_ENTRY_"+t:"CLOSE_PICKER_ENTRY_"+t,path:n})}}})(c);return function(e){P(n,e);function n(e){return y(this,n),b(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return E(n,[{key:"componentWillMount",value:function(){var e=this;O["openPaths_"+t]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.openPaths||[],r=arguments[1],o=n.indexOf(r.path);return r.type==="OPEN_PICKER_ENTRY_"+t&&-1===o?[].concat(_(n),[r.path]):r.type==="CLOSE_PICKER_ENTRY_"+t&&-1!==o?a.filter(n,function(e){return e!==r.path}):n},O["selectedPaths_"+t]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.selectedPaths||[],r=arguments[1],o=n.indexOf(r.path);return r.type==="SELECT_PICKER_ENTRY_MULTIPLE_"+t&&-1===o?[].concat(_(n),[r.path]):r.type==="SELECT_PICKER_ENTRY_SINGLE_"+t?[r.path]:r.type==="UNSELECT_PICKER_ENTRY_"+t&&-1!==o?a.filter(n,function(e){return e!==r.path}):n}}},{key:"componentWillUnmount",value:function(){O["openPaths_"+t]=S,O["selectedPaths_"+t]=S,N.dispatch({type:"RESET_STATE"}),delete O["openPaths_"+t],delete O["selectedPaths_"+t]}},{key:"render",value:function(){return f.createElement(p,this.props)}}]),n}(f.Component)}return function(e){P(t,e);function t(e){y(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={openPaths:e.openPaths?e.openPaths:[],selectedPaths:e.selectedPaths?e.selectedPaths:e.selectedPath?[e.selectedPath]:[]},n}return E(t,[{key:"onSelectItem",value:function(e,t,n,r){this.setState({openPaths:e.openPaths,selectedPaths:n?[].concat(_(r?e.selectedPaths:[]),[t]):a.filter(e.selectedPaths,function(e){return e!==t})})}},{key:"onOpenItem",value:function(e,t,n){this.setState({openPaths:n?[].concat(_(e.openPaths),[t]):a.filter(e.openPaths,function(e){return e!==t}),selectedPaths:e.selectedPaths})}},{key:"render",value:function(){return f.createElement(c,v({},this.props,{onOpenItem:this.onOpenItem.bind(this,this.state),onSelectItem:this.onSelectItem.bind(this,this.state),openPaths:this.state.openPaths,selectedPaths:this.state.selectedPaths}))}}]),t}(f.Component)}},e.NodesTableViewMaterial=R,e.withNodesFromPath=w,e.withPathFromSelection=function(e){return function(t){return u.connect(function(t,n){return v({},n,{path:t["selectedPaths_"+e]&&1===t["selectedPaths_"+e].length?t["selectedPaths_"+e][0]:null})},function(){return{}})(t)}},e.TestLayout=x,e.Engine=M,e.createOutletHistory=j,e.OutletRouter=L,e.RouterExample=B,e.MutationExample=Y,e.reducers=O,e.store=N,e.resetStateReducer=S,e.theme=W,Object.defineProperty(e,"__esModule",{value:!0})});