!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("material-ui"),require("material-ui/styles/index"),require("i18next"),require("i18next-xhr-backend"),require("i18next-chained-backend"),require("lodash"),require("redux"),require("material-ui/colors/index"),require("@jahia/apollo-dx"),require("react-apollo"),require("react-redux"),require("react-i18next"),require("react-router-dom"),require("history"),require("react-router"),require("prop-types"),require("react-jss"),require("material-ui-icons"),require("graphql-tag"),require("material-ui/styles/colorManipulator")):"function"==typeof define&&define.amd?define(["exports","react","material-ui","material-ui/styles/index","i18next","i18next-xhr-backend","i18next-chained-backend","lodash","redux","material-ui/colors/index","@jahia/apollo-dx","react-apollo","react-redux","react-i18next","react-router-dom","history","react-router","prop-types","react-jss","material-ui-icons","graphql-tag","material-ui/styles/colorManipulator"],t):t((e.jahia=e.jahia||{},e.jahia.reactcomponents={}),e.React,e.materialUi,e.materialUiStyles,e.i18n,e.XHR,e.ChainedBackend,e._,e.redux,e.index$1,e.jahia.apollodx,e.reactApollo,e.reactRedux,e.reactI18next,e.reactRouterDom,e.history,e.reactRouter,e.PropTypes,e.reactJss,e.materialUiIcons,e.gql,e.colorManipulator)}(this,function(e,t,m,y,r,a,i,f,n,o,g,b,x,P,v,s,l,c,k,u,S,p){"use strict";var C="default"in t?t.default:t;r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a,i=i&&i.hasOwnProperty("default")?i.default:i,c=c&&c.hasOwnProperty("default")?c.default:c,S=S&&S.hasOwnProperty("default")?S.default:S;var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),h=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},T=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},I=function(e,t){var n={};for(var o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},j=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},q=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},R=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function M(e){var t=[a],n=[{loadPath:(e.contextPath?e.contextPath:"")+"/modules/{{ns}}/javascript/locales/{{lng}}.json"}];if(e.getData){var c=e.getData;t.splice(0,0,a),n.splice(0,0,{loadPath:"{{ns}}/{{lng}}",ajax:function(e,t,n,o){var r=e.split("/"),a=j(r,2),i=a[0],s=a[1],l=c(i,s);l?n(JSON.stringify(l),{status:200}):n(null,{status:400})}})}var o={fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},react:{wait:!0,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"},backend:{backends:t,backendOptions:n}};return e=f.merge(o,e),r.use(i).init(e),r}var N,B,$={},L=(N=void 0,"undefined"!=typeof window&&(N=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({name:"DX Redux",instanceId:"dx"})),n.createStore(function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1];return f.mapValues($,function(e,t){return e(n[t],o)})},N)),F=m.createMuiTheme({palette:{background:{global:o.grey[200]},contrastThreshold:2.5,tonalOffset:.2,primary:{main:o.blueGrey[600]},secondary:{main:"#00a0e3"},error:{main:o.red[400]},publish:{main:o.deepOrange[500]},enabled:{main:o.green[400]},delete:{main:o.red[600]},cancelButton:{main:"#676767"},confirmColor:{main:"#00a0e3"}},overrides:(B={MuiList:{root:{}},MuiListItem:{root:{}},MuiListItemText:{root:{}},MuiDialogTitle:{root:{width:"600px",boxSizing:"border-box",padding:"24px 24px 0px 24px",fontSize:"1rem"}},MuiDialogContent:{root:{padding:"4px 24px 10px 24px"}},MuiDialogContentText:{root:{fontSize:"0.875rem"}},MuiDialogActions:{root:{justifyContent:"left",padding:"0 20px",marginTop:"30px"}},MuiSwitch:{root:{width:"52px"}},MuiButton:{root:{color:"inherit",padding:"8px",minWidth:"68px"},"&:hover":{background:"red"}},MuiTableRow:{root:{borderBottom:"1px solid rgba(224, 224, 224, 1)","&:hover":{backgroundColor:"#F7F7F7!important"}}},MuiTableCell:{body:{color:"inherit"}},MuiIconButton:{root:{color:"inherit",width:"38px"}},MuiCheckbox:{default:{color:"inherit"}},MuiFormControlLabel:{label:{color:"#676767",fontSize:"13px"}},MuiInput:{root:{"&:before":{display:"none"},"&:after":{display:"none"},boxShadow:"inset 1px 1px 1px 0 rgba(38, 38, 38, 0.3)",borderRadius:"2px",background:"whitesmoke",padding:"2px 11px 0",boxSizing:"border-box"},input:{color:"#676767",fontSize:"0.8rem"}},MuiFormControl:{root:{width:"100%","& error":{},"& message":{display:"none"},"& label":{}}},MuiFormHelperText:{root:{right:"10px",color:"red",position:"absolute",background:"whitesmoke",height:"calc(100% - 6px)",top:"3px",margin:"0",marginTop:"0",lineHeight:"0.3rem",zIndex:"99",padding:"11px 5px 11px 11px",boxSizing:"border-box","&:hover message":{display:"block"},"& error":{},"& message":h({top:"24px",width:"280px",right:"0",padding:"9px",zIndex:"9",display:"none",position:"absolute",background:"#fc922f",boxShadow:"1px 1px 2px 0px rgba(38, 38, 38, 0.3)",borderRadius:"2px",color:"white"},"padding","14px"),"& label":{}}},MuiTypography:{root:{},body:{fontSize:"0.8rem"},colorTextSecondary:{color:"rgba(0, 0, 0, 0.3)"},title:{fontSize:"1.2rem"},subheading:{fontSize:"0.875rem"},caption:{fontSize:"0.65rem",fontWeight:"800",textTransform:"uppercase"}},MuiSelect:{root:{color:"#EBEBEB"},select:{},selectMenu:{color:"whitesmoke",paddingRight:"23px","&:focus":{backgroundColor:"inherit"}},disabled:{},icon:{}},MuiMenuItem:{root:{backgroundColor:"transparent!important",padding:"10px",paddingLeft:"10px",paddingRight:"10px"},selected:{}}},h(B,"MuiListItemText",{root:{padding:"0"}}),h(B,"MuiPaper",{root:{}}),B)}),V=m.createMuiTheme({palette:{type:"dark",background:{global:o.grey[900]},contrastThreshold:3,tonalOffset:.2,primary:{main:o.purple[500]},secondary:{main:o.green[400]},error:{main:o.red[200]},publish:{main:o.deepOrange[500]},enabled:{main:o.green[400]},delete:{main:o.red[600]}},overrides:{MuiButton:{root:{color:"inherit"}},MuiTableCell:{body:{color:"inherit"}},MuiIconButton:{root:{color:"inherit"}}}});function D(r,a){var o=this,n=function(e){var t=[],n=r.location.pathname,o=a+":"+e;return-1<n.indexOf("(")&&(t=(n=(n=n.substr(n.indexOf("(")+1)).substr(0,n.indexOf(")"))).split("//"),t=f.map(t,function(e){return e.startsWith(a+":")?o:e})),-1===t.indexOf(o)&&t.push(o),"/("+f.join(t,"//")+")"},i=function(e){var t=void 0;return e?(t=r.location.state?r.location.state:{})["router_"+a]=e:r.location.state&&delete(t=r.location.state)["router_"+a],t},s=function(e){if(-1<e.indexOf("(")){var t=(e=(e=e.substr(e.indexOf("(")+1)).substr(0,e.indexOf(")"))).split("//"),n=a+":",o=f.find(t,function(e){return e.startsWith(n)});if(o)return o.substr(n.length)}return""},e=f.clone(r.location);e.pathname=s(e.pathname);var l=[],c={length:r.length,action:r.action,location:e,createHref:function(e){return r.createHref({pathname:n(e.pathname)})},push:function(e,t){return r.push(n(e),i(t))},replace:function(e,t){r.replace(n(e),i(t))},go:function(e){r.go(e)},goBack:function(){r.goBack()},goForward:function(){r.goForward()},block:function(e){return r.block(e)},listen:function(e){return l.push(e),function(){f.pull(l,e)}},dispose:function(){t()}},t=r.listen(function(e){var t=s(e.pathname),n=void 0;e.state&&e.state["router_"+a]&&(n=e.state["router_"+a]),c.location.pathname===t&&c.location.state===n||(Object.assign(c.location,e),c.location.pathname=t,c.location.state=n,f.each(l,function(e){return e.call(o,c.location)}))});return c}e.ThemeTester=function(e){function n(e){E(this,n);var t=_(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.switch=t.switch.bind(t),t.themes=[F,V],t.state={checked:!1},t}return T(n,e),d(n,[{key:"switch",value:function(){var t=this;this.setState(function(e){return t.props.dxContext.setTheme(e.checked?F:V),{checked:!e.checked}})}},{key:"render",value:function(){return C.createElement(m.Switch,{color:"default",onChange:this.switch,checked:this.state.checked})}}]),n}(C.Component),e.ThemeTester=W()(e.ThemeTester);var H=function(e){function o(e){E(this,o);var t=_(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=s.createHashHistory();return t.outletHistory=D(n,e.outlet),t}return T(o,e),d(o,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.outletHistory.dispose()}},{key:"render",value:function(){return C.createElement(l.Router,{history:this.outletHistory},this.props.children)}}]),o}(C.Component),z=function(e){function o(e){E(this,o);var t=_(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=t.props.notificationContext;return t.state={notification:{message:"",open:!1}},n.notify=function(e){t.setState({notification:{message:e,open:!0}})},n.closeNotification=function(){t.setState({notification:{message:"",open:!1}})},t}return T(o,e),d(o,[{key:"getChildContext",value:function(){return{notificationContext:this.props.notificationContext}}},{key:"render",value:function(){return C.createElement("div",null,this.props.children,C.createElement(m.Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:this.props.notificationContext.closeNotification,open:this.state.notification.open,SnackbarContentProps:{"aria-describedby":"message-id"},message:C.createElement("span",{id:"message-id"},this.state.notification.message)}))}}]),o}(t.Component);z.propTypes={notificationContext:c.object.isRequired},z.childContextTypes={notificationContext:c.object.isRequired};var A=function(e){function c(e){E(this,c);var t=_(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e)),n=t.props,o=n.dxContext,r=(n.children,n.i18n,n.apollo),a=(n.redux,n.mui),i=(n.router,n.apolloClient),s={};if(a&&("object"===(void 0===a?"undefined":O(a))?s.currentTheme=a:s.currentTheme=F,o.setTheme=function(e){t.setState({currentTheme:e})}),o.apolloClient)s.apolloClient=o.apolloClient;else if(i)s.apolloClient=i;else if(r){var l={contextPath:o.contextPath};"object"===(void 0===r?"undefined":O(r))&&Object.assign(l,r),s.apolloClient=g.client(l)}return t.state=s,t}return T(c,e),d(c,[{key:"getChildContext",value:function(){return{dxContext:this.props.dxContext}}},{key:"render",value:function(){var e=this.props,t=e.dxContext,n=e.children,o=e.i18n,r=(e.apollo,e.redux),a=(e.mui,e.router),i=this.state,s=i.currentTheme,l=i.apolloClient,c=C.Children.only(n);if(o){var u={lng:t.uilang,contextPath:t.contextPath};"object"===(void 0===o?"undefined":O(o))&&Object.assign(u,o),c=C.createElement(P.I18nextProvider,{i18n:M(u)},c)}if(a){var p=v.HashRouter,d={};"object"===(void 0===p?"undefined":O(p))&&"outlet"===p.type&&(p=H,d.outlet=p.outlet),c=C.createElement(v.HashRouter,d,c)}if(l&&(c=C.createElement(b.ApolloProvider,{client:l},c)),r&&(c=C.createElement(x.Provider,{store:L},c)),s){var h=t.generateClassName?t.generateClassName:y.createGenerateClassName(),f=t.sheetRegistry?t.sheetRegistry:new k.SheetsRegistry;c=C.createElement(k.JssProvider,{registry:f,generateClassName:h},C.createElement(m.MuiThemeProvider,{theme:s,sheetsManager:new Map},C.createElement(z,{notificationContext:{}},c)))}return c}}]),c}(C.Component);function W(){return function(n){var e=function(e){function t(){return E(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),d(t,[{key:"render",value:function(){return C.createElement(n,w({dxContext:this.context.dxContext},this.props))}}]),t}(C.Component);return e.contextTypes={dxContext:c.object},e}}A.childContextTypes={dxContext:c.object},e.LanguageSwitcher=function(e){function o(e,t){E(this,o);var n=_(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return n.state={anchorEl:null},n}return T(o,e),d(o,[{key:"handleClick",value:function(e){this.setState({anchorEl:e.target})}},{key:"handleClose",value:function(e){this.setState({anchorEl:null}),e&&this.context.i18n.changeLanguage(e)}},{key:"render",value:function(){var t=this;return C.createElement("div",null,C.createElement(m.Button,{onClick:this.handleClick.bind(this)},this.props.t("label.languages")),C.createElement(m.Menu,{open:Boolean(this.state.anchorEl),onClose:this.handleClose.bind(this,null),anchorEl:this.state.anchorEl},["fr","en"].map(function(e){return C.createElement(m.MenuItem,{onClick:t.handleClose.bind(t,e),key:e,value:e},e)})))}}]),o}(C.Component),e.LanguageSwitcher.contextTypes={i18n:c.object},e.LanguageSwitcher=P.translate("react-dxcomponents")(e.LanguageSwitcher);e.SettingsLayout=function(e){function t(e){return E(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return T(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.appBar,o=e.children,r=e.footer,a=e.appBarStyle;return C.createElement("section",{className:t.root},C.createElement(m.AppBar,{position:"fixed",classes:{root:t.appBar},style:a},n),C.createElement("section",{className:t.main},o),C.createElement("footer",{className:t.footer},r))}}]),t}(C.Component),e.SettingsLayout.propTypes={appBar:c.element,footer:c.string},e.SettingsLayout=m.withStyles(function(e){return{root:{backgroundColor:e.palette.background.global},main:{minHeight:"calc(100% - 96px)",marginTop:64,padding:1},footer:{fontSize:"14px",fontFamily:e.typography.fontFamily,fontWeight:300,padding:"8px",textAlign:"center",color:e.palette.text.secondary},appBar:{transition:"all 200ms ease-in-out"}}})(e.SettingsLayout);e.SearchBar=function(e){function n(e){E(this,n);var t=_(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleChange=t.handleChange.bind(t),t.onFocus=t.onFocus.bind(t),t.onBlur=t.onBlur.bind(t),t.onClear=t.onClear.bind(t),t.state={focus:!1},t}return T(n,e),d(n,[{key:"handleChange",value:function(e){e.persist(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.props.onChangeFilter(e.target.value)}.bind(this),1e3)}},{key:"onClear",value:function(){this.inputSearchBar.value="",this.props.onChangeFilter("")}},{key:"onFocus",value:function(){this.setState({focus:!0}),this.props.onFocus()}},{key:"onBlur",value:function(){this.setState({focus:!1}),this.props.onBlur()}},{key:"render",value:function(){var t=this,e=this.props,n=e.classes,o=e.t,r=e.placeholderLabel;return C.createElement(m.Input,{classes:{root:this.state.focus?n.rootFocus:n.root,input:this.state.focus?n.inputFocus:n.input},onChange:this.handleChange,onBlur:this.onBlur,onFocus:this.onFocus,disableUnderline:!0,type:"text",inputRef:function(e){t.inputSearchBar=e},placeholder:r||o("label.searchPlaceholder"),startAdornment:C.createElement(m.InputAdornment,{classes:{root:n.searchIcon},position:"start"},C.createElement(u.Search,null)),endAdornment:C.createElement(m.InputAdornment,{position:"end",classes:{root:this.state.focus?n.closeIcon:n.hidden}},C.createElement(m.IconButton,{onClick:this.onClear},C.createElement(m.Icon,null,C.createElement(u.Close,null)))),style:this.props.style})}}]),n}(C.Component),e.SearchBar=m.withStyles(function(e){return{root:{margin:"0",color:"inherit",backgroundColor:e.palette.primary.light,width:"720px",height:"44px",lineHeight:"40px",borderRadius:"3px",fontWeight:"200"},rootFocus:{margin:"0",color:e.palette.text.secondary,backgroundColor:"#fff",width:"720px",height:"44px",lineHeight:"40px",borderRadius:"3px",fontWeight:"100",boxShadow:"0 1px 8px 0 rgba(0, 0, 0, 0.4)"},input:{transitionProperty:"width",transitionDuration:"300ms",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDelay:"0ms",color:"whitesmoke"},inputFocus:{color:"#707070"},searchIcon:{marginTop:"auto",marginBottom:"auto",paddingLeft:"14px",opacity:"0.87"},hidden:{opacity:0,marginTop:"auto",marginBottom:"auto"},closeIcon:{marginTop:"auto",marginBottom:"auto",opacity:.87}}})(P.translate("react-dxcomponents")(e.SearchBar));var U=q(["\n            query NodeQuery($path:String!, $workspace:Workspace!) {\n                jcr(workspace:$workspace) {\n                    workspace\n                    node:nodeByPath(path: $path) {\n                        workspace\n                        path\n                        uuid\n                        ... node\n                    }\n                }\n            }"],["\n            query NodeQuery($path:String!, $workspace:Workspace!) {\n                jcr(workspace:$workspace) {\n                    workspace\n                    node:nodeByPath(path: $path) {\n                        workspace\n                        path\n                        uuid\n                        ... node\n                    }\n                }\n            }"]);var Q=q(["\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"],["\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"]);e.PickerViewMaterial=function(e){var n=this,o=(e.theme,e.classes),t=e.pickerEntries,r=e.onOpenItem,a=e.onSelectItem,i=e.textRenderer,s=e.iconRenderer,l=e.loading;return C.createElement("div",{className:o.root},l&&C.createElement("div",{className:o.loadingContainer}),C.createElement(m.List,{disablePadding:!0,classes:{root:l?o.root+" "+o.loading:o.root}},t.map(function(t){return C.createElement(m.ListItem,{button:!0,onClick:function(){return t.selectable?a(t.path,!t.selected):r(t.path,!t.open)},key:t.path,divider:!0,className:t.selected?o.listItem+" "+o.listItemSelected:o.listItem},C.createElement(m.ListItemIcon,{className:t.selected?o.listItemToggle+" "+o.selectedText:o.listItemToggle,style:{paddingLeft:20*(t.depth+1)}},t.openable&&t.hasChildren?C.createElement(m.IconButton,{className:o.buttonContainer,onClick:function(e){r(t.path,!t.open),e.stopPropagation()}},t.open?C.createElement(u.KeyboardArrowDown,{className:t.selected?o.toggleSelected:o.toggleUnSelected}):C.createElement(u.KeyboardArrowRight,{className:t.selected?o.toggleSelected:o.toggleUnSelected})):C.createElement(u.KeyboardArrowDown,{className:t.selected?o.toggleSelected:o.toggleUnSelected})),C.createElement(m.ListItemIcon,{className:t.selected?o.listItemNodeTypeIcon+" "+o.selectedText:o.listItemNodeTypeIcon},s&&s.call(n,t)),C.createElement(m.ListItemText,{classes:t.selected?{root:o.listItemLabel,primary:o.selectedText}:{root:o.listItemLabel},inset:!0,primary:i?i.call(n,t):t.name}))})))},e.PickerViewMaterial.propTypes={pickerEntries:c.array.isRequired,onSelectItem:c.func,onOpenItem:c.func,textRenderer:c.func},e.PickerViewMaterial=m.withTheme()(m.withStyles(function(e){return{root:{position:"relative"},loading:{opacity:.8},listItemSelected:{background:"#00a0e3",color:"whitesmoke","&:hover":{background:"#00a0e3",color:"whitesmoke"}},selectedIcon:{color:"pink"},listItem:{padding:"5px 10px 5px 0"},listItemLabel:{padding:"0px","& h3":{fontSize:"0.875rem",color:"#676767",fontWeight:"100"}},listItemToggle:{marginRight:"10px"},listItemNodeTypeIcon:{marginRight:"5px"},selected:{backgroundColor:"pink","&:hover":{backgroundColor:p.fade(e.palette.secondary.light,.7)}},selectedText:{color:"whitesmoke!important"},loadingContainer:{position:"absolute",width:"100%",height:"100%",zIndex:999},toggleUnSelected:{color:"#00a0e3"},toggleSelected:{color:"whitesmoke"},buttonContainer:{"&:hover":{backgroundColor:"transparent"}}}})(e.PickerViewMaterial)),e.PickerViewMaterialMultiple=function(t){var n=this;return C.createElement(m.List,null,t.pickerEntries.map(function(e){return C.createElement(m.ListItem,{button:!0,onClick:function(){return e.selectable?t.onSelectItem(e.path,!e.selected,!0):t.onOpenItem(e.path,!e.open)},key:e.path},C.createElement(m.ListItemIcon,{style:e.selectable?{}:{opacity:0}},e.selected?C.createElement(u.CheckBox,null):C.createElement(u.CheckBoxOutlineBlank,null)),C.createElement(m.ListItemText,{style:{paddingLeft:e.depth*t.theme.spacing.unit},inset:!0,primary:t.textRenderer?t.textRenderer.call(n,e):e.name}),C.createElement(m.ListItemSecondaryAction,null,e.openable&&e.hasChildren?C.createElement(m.IconButton,{onClick:function(){return t.onOpenItem(e.path,!e.open)}},e.open?C.createElement(u.ExpandLess,null):C.createElement(u.ExpandMore,null)):null))}))},e.PickerViewMaterialMultiple.propTypes={pickerEntries:c.array.isRequired,onSelectItem:c.func,onOpenItem:c.func,textRenderer:c.func},e.PickerViewMaterialMultiple=m.withTheme()(e.PickerViewMaterialMultiple);var X=q(["\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"],["\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }"]),J=function(e){function h(e){E(this,h);var a=_(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e)),t=e.fragments,n=(e.render,e.rootPaths,e.queryVariables,e.hideRoot,e.openableTypes,e.selectableTypes,e.openPaths),o=e.onOpenItem,r=e.selectedPaths,i=e.onSelectItem,s=e.defaultSelectedPaths,l=e.onSelectionChange,c=e.defaultOpenPaths,u=(e.onLoading,I(e,["fragments","render","rootPaths","queryVariables","hideRoot","openableTypes","selectableTypes","openPaths","onOpenItem","selectedPaths","onSelectItem","defaultSelectedPaths","onSelectionChange","defaultOpenPaths","onLoading"]));a.isOpenControlled=null!=n,a.isSelectionControlled=null!=r,a.query=S(X),g.replaceFragmentsInDocument(a.query,t);var p={},d={renderProps:u,eventsHandlers:p};return a.isOpenControlled?p.onOpenItem=o:(d.openPaths=c?f.clone(c):[],p.onOpenItem=function(t,n){a.setState(function(e){return{openPaths:n?[].concat(R(e.openPaths),[t]):f.filter(e.openPaths,function(e){return e!==t})}})}),a.isSelectionControlled?p.onSelectItem=i:(d.selectedPaths=s?f.clone(s):[],p.onSelectItem=function(n,o,r){a.setState(function(e){var t=o?[].concat(R(r?e.selectedPaths:[]),[n]):f.filter(e.selectedPaths,function(e){return e!==n});return l(t),{selectedPaths:t}})}),a.state=d,a}return T(h,e),d(h,[{key:"getVariables",value:function(e,t){var n=this.props,o=n.rootPaths,r=n.openableTypes,a=n.selectableTypes,i=n.queryVariables,s={rootPaths:o,types:f.union(r,a),selectable:a,openable:r,openPaths:t};return i&&f.assign(s,i),s}},{key:"getPickerEntries",value:function(e,a,i){var t=this,s=[],l={},n=e.jcr,o=function(e,t,n){var o=!1;e.selectable&&(o=-1!==f.indexOf(a,e.path));var r={name:e.name,path:e.path,open:e.openable&&-1!==f.indexOf(i,e.path),selected:o,openable:e.openable,selectable:e.selectable,depth:t,prefix:f.repeat("&nbsp;",3*t),node:e,hidden:!1,hasChildren:0<e.children.pageInfo.totalCount};return s.splice(n,0,r),l[e.uuid]=r};n&&(n.rootNodes&&f.forEach(n.rootNodes,function(e){o(e,0,0).hidden=t.props.hideRoot}),n.openNodes&&f.sortBy(n.openNodes,["path"]).forEach(function(e){var t=l[e.uuid];if(t){var n=f.indexOf(s,t);f.forEachRight(e.children.nodes,function(e){o(e,t.depth+1,n+1)})}}));var r=f.filter(s,function(e){return e.selected}).map(function(e){return e.node});return a=f.map(r,"path"),s=f.filter(s,function(e){return!e.hidden})}},{key:"shouldComponentUpdate",value:function(e,t){e.render,e.rootPaths,e.hideRoot;var n=e.openPaths,o=e.selectedPaths,r=(e.defaultSelectedPaths,e.defaultOpenPaths,I(e,["render","rootPaths","hideRoot","openPaths","selectedPaths","defaultSelectedPaths","defaultOpenPaths"])),a=this.props,i=(a.render,a.rootPaths,a.hideRoot,a.openPaths),s=a.selectedPaths,l=(a.defaultSelectedPaths,a.defaultOpenPaths,I(a,["render","rootPaths","hideRoot","openPaths","selectedPaths","defaultSelectedPaths","defaultOpenPaths"]));return r=f.omit(r,f.functions(r)),l=f.omit(l,f.functions(l)),!((this.isSelectionControlled?f.isEqual(s,o):f.isEqual(this.state.selectedPaths,t.selectedPaths))&&(this.isOpenControlled?f.isEqual(i,n):f.isEqual(this.state.openPaths,t.openPaths))&&f.isEqual(r,l))}},{key:"render",value:function(){var i=this,s=this.isSelectionControlled?this.props.selectedPaths:this.state.selectedPaths,l=this.isOpenControlled?this.props.openPaths:this.state.openPaths,e=this.props,o=e.rootPaths;e.openableTypes,e.selectableTypes,e.queryVariables;l=f.clone(l);f.each(s,function(e){return t=e,n=!1,void f.tail(f.split(t,"/")).reduce(function(t,e){return n||f.forEach(o,function(e){n=n||f.startsWith(t,e)}),n&&-1===f.indexOf(l,t)&&l.push(t),t+"/"+e},"");var t,n});var t=this.getVariables(s,l);return C.createElement(b.Query,{query:this.query,variables:t,fetchPolicy:"cache-first"},function(e){var t=e.error,n=e.loading,o=e.data,r=i.props.render;if(i.props.onLoading&&i.props.onLoading(n),n)return i.previousEntries?C.createElement(r,w({},i.state.eventsHandlers,i.state.renderProps,{pickerEntries:i.previousEntries,loading:!0})):C.createElement(r,w({},i.state.eventsHandlers,i.state.renderProps,{pickerEntries:[],loading:!0}));if(t)return"Error! "+t.message;var a=i.getPickerEntries(o,s,l);return i.previousEntries=a,C.createElement(r,w({},i.state.eventsHandlers,i.state.renderProps,{pickerEntries:a,loading:i.props.loading}))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){e.fragments,e.render,e.rootPaths,e.queryVariables,e.hideRoot,e.openableTypes,e.selectableTypes,e.openPaths,e.onOpenItem,e.selectedPaths,e.onSelectItem,e.defaultSelectedPaths,e.onSelectionChange,e.defaultOpenPaths,e.onLoading;var n=I(e,["fragments","render","rootPaths","queryVariables","hideRoot","openableTypes","selectableTypes","openPaths","onOpenItem","selectedPaths","onSelectItem","defaultSelectedPaths","onSelectionChange","defaultOpenPaths","onLoading"]);return f.isEqual(f.omit(n,f.functions(n)),f.omit(t.renderProps,f.functions(t.renderProps)))?null:{renderProps:n}}}]),h}(C.Component);J.propTypes={rootPaths:c.arrayOf(c.string).isRequired,defaultOpenPaths:c.arrayOf(c.string),openableTypes:c.arrayOf(c.string).isRequired,openPaths:c.arrayOf(c.string),selectableTypes:c.arrayOf(c.string).isRequired,defaultSelectedPaths:c.arrayOf(c.string),selectedPaths:c.arrayOf(c.string),onSelectionChange:c.func,render:c.func,fragments:c.arrayOf(c.oneOfType([c.string,c.shape({applyFor:c.string.isRequired,variables:c.string,gql:c.object.isRequired})])),queryVariables:c.object},e.DxContextProvider=A,e.withDxContext=W,e.getI18n=M,e.withNodeFromPath=function(n){return function(e){var t=S(U);return g.replaceFragmentsInDocument(t,n),b.graphql(t,{props:function(e){var t=e.data,n=e.ownProps,o=void 0;return t.jcr&&t.jcr.node&&(o=t.jcr.node),w({},n,{node:o})},options:function(e){var t={path:e.path,workspace:e.workspace?e.workspace:"EDIT"};return e.queryVariables&&f.assign(t,e.queryVariables),{variables:t,skip:!e.path}}})(e)}},e.withNodesFromPath=function(n){return function(e){var t=S(Q);return g.replaceFragmentsInDocument(t,n),b.graphql(t,{props:function(e){var t=e.data,n=e.ownProps,o=[],r=t.jcr;return r&&r.node&&(o=r.node.children.nodes),w({},n,{nodes:o})},options:function(e){var t={path:e.path,types:e.types};return e.queryVariables&&f.assign(t,e.queryVariables),{variables:t,skip:!e.path}}})(e)}},e.withPathFromSelection=function(n){return function(e){return x.connect(function(e,t){return w({},t,{path:e["selectedPaths_"+n]&&1===e["selectedPaths_"+n].length?e["selectedPaths_"+n][0]:null})},function(){return{}})(e)}},e.NotificationProvider=z,e.withNotifications=function(){return function(n){var e=function(e){function t(){return E(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),d(t,[{key:"render",value:function(){return C.createElement(n,w({notificationContext:this.context.notificationContext},this.props))}}]),t}(C.Component);return e.contextTypes={notificationContext:c.object},e}},e.Picker=J,e.createOutletHistory=D,e.OutletRouter=H,e.reducers=$,e.store=L,e.resetStateReducer=function(e,t){if("RESET_STATE"!==t.type)return e},e.theme=F,e.darkTheme=V,Object.defineProperty(e,"__esModule",{value:!0})});