!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("material-ui/styles/index"),require("lodash"),require("react-apollo"),require("graphql-tag"),require("@jahia/apollo-dx"),require("react-redux"),require("material-ui"),require("material-ui-icons"),require("redux"),require("react-flexbox-grid"),require("history"),require("react-router"),require("react-router-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","material-ui/styles/index","lodash","react-apollo","graphql-tag","@jahia/apollo-dx","react-redux","material-ui","material-ui-icons","redux","react-flexbox-grid","history","react-router","react-router-dom"],t):t((e.jahia=e.jahia||{},e.jahia.reactcomponents={}),e.React,e.ReactDOM,e.materialUiStyles,e._,e.reactApollo,e.gql,e.jahia.apollodx,e.reactRedux,e.materialUi,e.materialUiIcons,e.redux,e.reactFlexboxGrid,e.history,e.reactRouter,e.reactRouterDom)}(this,function(e,t,n,r,o,a,i,l,s,u,p,c,h,d,m,f){"use strict";var y="default"in t?t.default:t;n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;function v(){if("undefined"==typeof window){var e=global.request,t=o.clone(r.lightBaseTheme);return t.userAgent=e.getHeader("User-Agent"),r.getMuiTheme(t)}return r.getMuiTheme(r.lightBaseTheme)}var P=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},k=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},C=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},O=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={reactElements:[]},n}return E(t,[{key:"componentDidMount",value:function(){var e=this;this.props.components&&!this.done&&this.props.components.then(function(t){e.done=!0,e.setState({reactElements:t})})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return this.done?y.createElement(r.MuiThemeProvider,{muiTheme:v()},y.createElement("div",null,this.state.reactElements)):y.createElement("div",null)}}]),t}(y.Component),S=k(['\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedView(templateType:"js", view:"react") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }'],['\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedView(templateType:"js", view:"react") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }']),N=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentCache=[],n}return E(t,[{key:"mapResultsToProps",value:function(e){var t=e.data,r=e.ownProps,a=[],i=t.jcr,l=eval;i&&i.nodesByQuery&&(a=o.map(o.flatMap(i.nodesByQuery.nodes,"children.nodes"),function(e){return l("("+e.renderedView.output+")")}));var s=[];o.each(a,function(e){s=s.concat(e.getImports())});var u=void 0;return s.length>0&&(u=Promise.all(o.map(s,function(e){return SystemJS.import(e)})).then(function(e){return o.map(a,function(t){var r=t.getImports().length,o=t.createElement.apply(t,[y,n].concat(C(e)));return e.splice(r),o})})),b({},r,{components:u})}},{key:"mapPropsToOptions",value:function(e){return{variables:{query:"select * from [reactnt:componentsFolder] where [react:id]='"+e.id+"'"}}}},{key:"render",value:function(){var e=this.props.renderComponent,t=o.find(this.componentCache,function(t){return t.renderComponent===e}),n=void 0;if(t)n=t.dataComponent;else{var r=i(S);n=a.graphql(r,{props:this.mapResultsToProps,options:this.mapPropsToOptions})(e||O),this.componentCache.push({renderComponent:e,dataComponent:n})}return y.createElement(a.ApolloProvider,{client:l.client},y.createElement(n,this.props))}}]),t}(y.Component),R=u.makeSelectable(u.List),x=function(e){var t=this;return y.createElement(r.MuiThemeProvider,{muiTheme:v()},y.createElement(R,{value:e.selectedPath,onChange:function(t,n){n&&e.pickerEntries.find(function(e){return e.path===n}).selectable&&e.onSelectItem(n,!0)}},e.pickerEntries.map(function(n){return y.createElement(u.ListItem,{value:n.path,key:n.path,nestedLevel:n.depth+1,primaryText:e.textRenderer?e.textRenderer.call(t,n):n.name,rightIconButton:n.openable?y.createElement(u.IconButton,{onClick:function(){return e.onOpenItem(n.path,!n.open)}},n.open?y.createElement(p.ExpandLess,null):y.createElement(p.ExpandMore,null)):null})})))},$=function(e){var t=this;return y.createElement(r.MuiThemeProvider,{muiTheme:v()},y.createElement(u.List,null,e.pickerEntries.map(function(n){return y.createElement(u.ListItem,{primaryTogglesNestedList:!0,key:n.path,nestedLevel:n.depth+1,primaryText:e.textRenderer?e.textRenderer.call(t,n):n.name,leftCheckbox:n.selectable?y.createElement(u.Checkbox,{checked:n.selected}):null,onClick:function(){n.selectable&&e.onSelectItem(n.path,!n.selected)},rightIconButton:n.openable?y.createElement(u.IconButton,{onClick:function(){return e.onOpenItem(n.path,!n.open)}},n.open?y.createElement(p.ExpandLess,null):y.createElement(p.ExpandMore,null)):null})})))},w=k(["\n                query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                    jcr {\n                        rootNodes:nodesByPath(paths: $rootPaths) {\n                            path\n                            uuid\n                            name\n                            selectable : isNodeType(type: {types:$selectable})\n                            openable : isNodeType(type: {types:$openable})\n                            ... node\n                        },\n                        openNodes:nodesByPath(paths: $openPaths) {\n                            path\n                            uuid\n                            children(typesFilter:{types:$types}) {\n                                nodes {\n                                    path\n                                    uuid\n                                    name\n                                    selectable : isNodeType(type: {types:$selectable})\n                                    openable : isNodeType(type: {types:$openable})\n                                    ... node\n                                }\n                            }\n                        }\n                    }\n                }"],["\n                query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                    jcr {\n                        rootNodes:nodesByPath(paths: $rootPaths) {\n                            path\n                            uuid\n                            name\n                            selectable : isNodeType(type: {types:$selectable})\n                            openable : isNodeType(type: {types:$openable})\n                            ... node\n                        },\n                        openNodes:nodesByPath(paths: $openPaths) {\n                            path\n                            uuid\n                            children(typesFilter:{types:$types}) {\n                                nodes {\n                                    path\n                                    uuid\n                                    name\n                                    selectable : isNodeType(type: {types:$selectable})\n                                    openable : isNodeType(type: {types:$openable})\n                                    ... node\n                                }\n                            }\n                        }\n                    }\n                }"]),j=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentCache=[],n}return E(t,[{key:"mapResultsToProps",value:function(e){var t=e.data,n=e.ownProps,r=n.multipleSelection?n.selectedPaths:[n.selectedPath],a=n.openPaths,i=[],l={},s=t.jcr,u=function(e,t,n){var s=!1;e.selectable&&(s=-1!==o.indexOf(r,e.path));var u={name:e.name,path:e.path,open:e.openable&&-1!==o.indexOf(a,e.path),selected:s,openable:e.openable,selectable:e.selectable,depth:t,prefix:o.repeat("&nbsp;",3*t),node:e,hidden:!1};return i.splice(n,0,u),l[e.uuid]=u,u};s&&(s.rootNodes&&o.forEach(s.rootNodes,function(e){u(e,0,0).hidden=n.hideRoot}),s.openNodes&&o.sortBy(s.openNodes,["path"]).forEach(function(e){var t=l[e.uuid];if(t){var n=o.indexOf(i,t);o.forEachRight(e.children.nodes,function(e){u(e,t.depth+1,n+1)})}}));var p=o.filter(i,function(e){return e.selected}).map(function(e){return e.node});return r=o.map(p,"path"),i=o.filter(i,function(e){return!e.hidden}),b({},n,{pickerEntries:i})}},{key:"mapPropsToOptions",value:function(e){var t=function(e,t){var n=!1;o.tail(o.split(t,"/")).reduce(function(t,r){return n||o.forEach(e.rootPaths,function(e){n=n||o.startsWith(t,e)}),n&&-1===o.indexOf(e.openPaths,t)&&e.openPaths.push(t),t+"/"+r},"")};e.multipleSelection?o.each(e.selectedPaths,function(n){return t(e,n)}):t(e,e.selectedPath);var n={rootPaths:e.rootPaths,types:o.union(e.openableTypes,e.selectableTypes),selectable:e.selectableTypes,openable:e.openableTypes,openPaths:e.openPaths};return e.variables&&o.assign(n,e.variables),{variables:n}}},{key:"render",value:function(){var e=this.props.fragments,t=this.props.renderComponent,n=o.find(this.componentCache,function(n){return JSON.stringify(n.fragments)===JSON.stringify(e)&&n.renderComponent===t}),r=void 0;if(n)r=n.dataComponent;else{var s=i(w);l.replaceFragmentsInDocument(s,e),r=a.graphql(s,{props:this.mapResultsToProps,options:this.mapPropsToOptions})(t||this.props.multipleSelection?$:x),this.componentCache.push({fragments:e,renderComponent:t,dataComponent:r})}return y.createElement(a.ApolloProvider,{client:l.client},y.createElement(r,this.props))}}]),t}(y.Component),I={},q=function(){var e=void 0;return"undefined"!=typeof window&&(e=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({name:"DX Redux",instanceId:"dx"})),c.createStore(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return o.mapValues(I,function(n,r){return n(e[r],t)})},e)}(),L=function(e,t){if("RESET_STATE"!==t.type)return e},M=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.PickerReduxWithoutStore=s.connect(n.mapStateToProps,n.mapDispatchToProps)(j),n}return E(t,[{key:"mapStateToProps",value:function(e,t){return t.multipleSelection?b({},t,{openPaths:e["openPaths_"+t.id]?e["openPaths_"+t.id]:t.openPaths,selectedPaths:e["selectedPaths_"+t.id]?e["selectedPaths_"+t.id]:t.selectedPaths}):b({},t,{openPaths:e["openPaths_"+t.id]?e["openPaths_"+t.id]:t.openPaths,selectedPath:e["selectedPath_"+t.id]?e["selectedPath_"+t.id]:t.selectedPath})}},{key:"mapDispatchToProps",value:function(e,t){return{onSelectItem:function(n,r){e({type:r?"SELECT_PICKER_ENTRY_"+t.id:"UNSELECT_PICKER_ENTRY_"+t.id,path:n})},onOpenItem:function(n,r){e({type:r?"OPEN_PICKER_ENTRY_"+t.id:"CLOSE_PICKER_ENTRY_"+t.id,path:n})}}}},{key:"openPaths",value:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.openPaths||[],n=arguments[1],r=t.indexOf(n.path);return n.type==="OPEN_PICKER_ENTRY_"+e.props.id&&-1===r?[].concat(C(t),[n.path]):n.type==="CLOSE_PICKER_ENTRY_"+e.props.id&&-1!==r?_.filter(t,function(e){return e!==n.path}):t}}},{key:"selectedPath",value:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.selectedPath,n=arguments[1];return n.type==="SELECT_PICKER_ENTRY_"+e.props.id?n.path:n.type==="UNSELECT_PICKER_ENTRY_"+e.props.id?null:t}}},{key:"selectedPaths",value:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.selectedPaths||[],n=arguments[1],r=t.indexOf(n.path);return n.type==="SELECT_PICKER_ENTRY_"+e.props.id&&-1===r?[].concat(C(t),[n.path]):n.type==="UNSELECT_PICKER_ENTRY_"+e.props.id&&-1!==r?_.filter(t,function(e){return e!==n.path}):t}}},{key:"componentWillMount",value:function(){I["openPaths_"+this.props.id]=this.openPaths(),this.props.multipleSelection?I["selectedPaths_"+this.props.id]=this.selectedPaths():I["selectedPath_"+this.props.id]=this.selectedPath()}},{key:"componentWillUnmount",value:function(){I["openPaths_"+this.props.id]=L,I["selectedPath_"+this.props.id]=L,I["selectedPaths_"+this.props.id]=L,q.dispatch({type:"RESET_STATE"}),delete I["openPaths_"+this.props.id],delete I["selectedPath_"+this.props.id],delete I["selectedPaths_"+this.props.id]}},{key:"render",value:function(){var e=this.PickerReduxWithoutStore;return y.createElement(s.Provider,{store:q},y.createElement(e,this.props))}}]),t}(y.Component),B=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.multipleSelection?n.state={openPaths:e.openPaths?e.openPaths:[],selectedPaths:e.selectedPaths?e.selectedPaths:[]}:n.state={openPaths:e.openPaths?e.openPaths:[],selectedPath:e.selectedPath?e.selectedPath:null},n}return E(t,[{key:"onSelectItem",value:function(e,t,n){this.props.multipleSelection?this.setState({openPaths:e.openPaths,selectedPaths:n?[].concat(C(e.selectedPaths),[t]):o.filter(e.selectedPaths,function(e){return e!==t})}):this.setState({openPaths:e.openPaths,selectedPath:n?t:null})}},{key:"onOpenItem",value:function(e,t,n){this.props.multipleSelection?this.setState({openPaths:n?[].concat(C(e.openPaths),[t]):o.filter(e.openPaths,function(e){return e!==t}),selectedPaths:e.selectedPaths}):this.setState({openPaths:n?[].concat(C(e.openPaths),[t]):o.filter(e.openPaths,function(e){return e!==t}),selectedPath:e.selectedPath})}},{key:"render",value:function(){return this.props.multipleSelection?y.createElement(j,b({},this.props,{openPaths:this.state.openPaths,selectedPaths:this.state.selectedPaths,onOpenItem:this.onOpenItem.bind(this,this.state),onSelectItem:this.onSelectItem.bind(this,this.state)})):y.createElement(j,b({},this.props,{openPaths:this.state.openPaths,selectedPath:this.state.selectedPath,onOpenItem:this.onOpenItem.bind(this,this.state),onSelectItem:this.onSelectItem.bind(this,this.state)}))}}]),t}(y.Component),D=function(e){var t=this,n=e.headers?e.headers:function(){return y.createElement(u.TableRow,null,y.createElement(u.TableHeaderColumn,null,"Name"))},o=e.row?e.row:function(n){return y.createElement(u.TableRow,{key:n.path},y.createElement(u.TableRowColumn,null,e.textRenderer?e.textRenderer.call(t,n):n.name))};return y.createElement(r.MuiThemeProvider,{muiTheme:v()},y.createElement(u.Table,null,y.createElement(u.TableHeader,null,n()),y.createElement(u.TableBody,null,e.nodes?e.nodes.map(o):[])))},F=k(["\n                query NodesQuery($path:String!, $types:[String]!) {\n                    jcr {\n                        node:nodeByPath(path: $path) {\n                            path\n                            uuid\n                            name\n                            children(typesFilter:{types:$types}) {\n                                nodes {\n                                    path\n                                    uuid\n                                    name\n                                    ... node\n                                }\n                            }\n                        }\n                    }\n                }"],["\n                query NodesQuery($path:String!, $types:[String]!) {\n                    jcr {\n                        node:nodeByPath(path: $path) {\n                            path\n                            uuid\n                            name\n                            children(typesFilter:{types:$types}) {\n                                nodes {\n                                    path\n                                    uuid\n                                    name\n                                    ... node\n                                }\n                            }\n                        }\n                    }\n                }"]),H=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentCache=[],n}return E(t,[{key:"mapResultsToProps",value:function(e){var t=e.data,n=e.ownProps,r=[],o=t.jcr;return o&&o.node&&(r=o.node.children.nodes),b({},n,{nodes:r})}},{key:"mapPropsToOptions",value:function(e){var t={path:e.path,types:e.types};return e.variables&&o.assign(t,e.variables),{variables:t,skip:!e.path}}},{key:"render",value:function(){var e=this.props.fragments,t=this.props.renderComponent,n=o.find(this.componentCache,function(n){return JSON.stringify(n.fragments)===JSON.stringify(e)&&n.renderComponent===t}),r=void 0;if(n)r=n.dataComponent;else{var s=i(F);l.replaceFragmentsInDocument(s,e),r=a.graphql(s,{props:this.mapResultsToProps,options:this.mapPropsToOptions})(t||D),this.componentCache.push({fragments:e,renderComponent:t,dataComponent:r})}return y.createElement(a.ApolloProvider,{client:l.client},y.createElement(r,this.props))}}]),t}(y.Component),Q=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.NodesTableWithoutStore=s.connect(n.mapStateToProps,n.mapDispatchToProps)(H),n}return E(t,[{key:"mapStateToProps",value:function(e,t){return b({},t,{path:e["selectedPath_"+t.id]?e["selectedPath_"+t.id]:t.defaultPath})}},{key:"mapDispatchToProps",value:function(e,t){return{}}},{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.NodesTableWithoutStore;return y.createElement(s.Provider,{store:q},y.createElement(e,this.props))}}]),t}(y.Component);function V(e,t){var n=this,r=function(n){var r=[],a=e.location.pathname,i=t+":"+n;return a.indexOf("(")>-1&&(r=(a=(a=a.substr(a.indexOf("(")+1)).substr(0,a.indexOf(")"))).split("//"),r=o.map(r,function(e){return e.startsWith(t+":")?i:e})),-1===r.indexOf(i)&&r.push(i),"/("+o.join(r,"//")+")"},a=function(n){var r=void 0;return n?(r=e.location.state?e.location.state:{})["router_"+t]=n:e.location.state&&delete(r=e.location.state)["router_"+t],r},i=function(e){if(e.indexOf("(")>-1){var n=(e=(e=e.substr(e.indexOf("(")+1)).substr(0,e.indexOf(")"))).split("//"),r=t+":",a=o.find(n,function(e){return e.startsWith(r)});if(a)return a.substr(r.length)}return""},l=o.clone(e.location);l.pathname=i(l.pathname);var s=[],u={length:e.length,action:e.action,location:l,createHref:function(t){return e.createHref({pathname:r(t.pathname)})},push:function(t,n){return e.push(r(t),a(n))},replace:function(t,n){e.replace(r(t),a(n))},go:function(t){e.go(t)},goBack:function(){e.goBack()},goForward:function(){e.goForward()},block:function(t){return e.block(t)},listen:function(e){return s.push(e),function(){o.pull(s,e)}},dispose:function(){p()}},p=e.listen(function(e){var r=i(e.pathname),a=void 0;e.state&&e.state["router_"+t]&&(a=e.state["router_"+t]),u.location.pathname===r&&u.location.state===a||(Object.assign(u.location,e),u.location.pathname=r,u.location.state=a,o.each(s,function(e){return e.call(n,u.location)}))});return u}var A=d.createHashHistory(),U=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.outletHistory=V(A,e.outlet),n}return E(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.outletHistory.dispose()}},{key:"render",value:function(){return y.createElement(m.Router,{history:this.outletHistory},this.props.children)}}]),t}(y.Component),W=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n.components=[{link:"/link1",label:"Link 1",component:function(e){return y.createElement("div",null,"toto")}},{link:"/link2",label:"Link 2",component:function(e){return y.createElement("div",null,"titi")}}],n}return E(t,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return y.createElement(r.MuiThemeProvider,{muiTheme:v()},y.createElement("div",null,y.createElement(u.FlatButton,{label:"Open",onClick:function(){return e.handleOpen()}}),y.createElement(u.Dialog,{title:"Dialog With Actions",actions:[y.createElement(u.FlatButton,{label:"Cancel",primary:!0,onClick:function(){return e.handleClose()}}),y.createElement(u.FlatButton,{label:"Submit",primary:!0,keyboardFocused:!0,onClick:function(){return e.handleClose()}})],modal:!1,open:this.state.open,onRequestClose:function(){return e.handleClose()}},y.createElement(U,{outlet:"outlet1"},y.createElement("div",null,y.createElement("div",null,o.map(this.components,function(e){return y.createElement(f.Link,{key:e.link,to:e.link},e.label)})),y.createElement("div",null,o.map(this.components,function(e){return y.createElement(f.Route,{key:e.link,path:e.link,component:e.component})})))),y.createElement(U,{outlet:"outlet2"},y.createElement("div",null,y.createElement("div",null,o.map(this.components,function(e){return y.createElement(f.Link,{key:e.link,to:e.link},e.label)})),y.createElement("div",null,o.map(this.components,function(e){return y.createElement(f.Route,{key:e.link,path:e.link,component:e.component})})))))))}}]),t}(y.Component),K=function(e){T(t,e);function t(e){return P(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,[{key:"render",value:function(){var e=function(e){return y.createElement("div",null,"Test1 ",e.match.params.value)},t=function(e){return y.createElement("div",null,"Test2")};return y.createElement(U,{outlet:this.props.id},y.createElement("div",null,"---- links : ----",y.createElement(f.Link,{to:"/test1/toto"},"Test1 toto")," -",y.createElement(f.Link,{to:"/test1/tutu"},"Test1 tutu")," -",y.createElement(f.Link,{to:"/test2"},"Test2")," -",y.createElement(f.Link,{to:"/test3"},"Test3")," -",y.createElement(U,{outlet:"new"},y.createElement("div",null,y.createElement(f.Link,{to:"/test1"},"Test1/other")," -",y.createElement(f.Link,{to:"/test2"},"Test2/other"))),"---- routes : ----",y.createElement(f.Route,{path:"/test1/:value",component:e}),y.createElement(f.Route,{path:"/test2",component:t}),y.createElement(f.Route,{path:"/test3",component:function(e){return y.createElement("div",null,"Test3")}}),y.createElement(U,{outlet:"new"},y.createElement("div",null,y.createElement(f.Route,{path:"/test1",component:e}),y.createElement(f.Route,{path:"/test2",component:t}))),"------------------"))}}]),t}(y.Component),Y=k(['fragment Test on JCRNode {\n            myprop:property(name:"myprop") {\n                value\n            }\n        }'],['fragment Test on JCRNode {\n            myprop:property(name:"myprop") {\n                value\n            }\n        }']),J=k(['\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n'],['\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:"myprop") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n']),X=k(['\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:"/",name:$name,primaryNodeType:"nt:unstructured") {\n                mutation {\n                    mutateProperty(name:"myprop") {\n                        setValue(value:$value)\n                    }\n                }\n            }\n        }\n    }\n'],['\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:"/",name:$name,primaryNodeType:"nt:unstructured") {\n                mutation {\n                    mutateProperty(name:"myprop") {\n                        setValue(value:$value)\n                    }\n                }\n            }\n        }\n    }\n']),z=k(["\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path) \n        }\n    }\n"],["\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path) \n        }\n    }\n"]),G=function(e){T(t,e);function t(e){return P(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,[{key:"render",value:function(){var e=this,t=[{applyFor:"node",gql:i(Y)}];return y.createElement(r.MuiThemeProvider,{muiTheme:v()},y.createElement("div",null,y.createElement(u.FlatButton,{label:"New",onClick:function(){return e.props.addNodeMutation({variables:{name:"name-"+(new Date).getTime(),value:"test:"+new Date},refetchQueries:["NodesQuery"]})}}),y.createElement(H,{path:"/",types:["nt:unstructured"],fragments:t,renderComponent:function(t){return y.createElement(u.Table,null,y.createElement(u.TableHeader,{displaySelectAll:!1},y.createElement(u.TableRow,null,y.createElement(u.TableHeaderColumn,null,"Name"),y.createElement(u.TableHeaderColumn,null,"Value"),y.createElement(u.TableHeaderColumn,null,"Update"),y.createElement(u.TableHeaderColumn,null,"Delete"))),y.createElement(u.TableBody,{displayRowCheckbox:!1,selectable:!1},t.nodes?t.nodes.map(function(t){return y.createElement(u.TableRow,{key:t.uuid},y.createElement(u.TableRowColumn,null,t.name),y.createElement(u.TableRowColumn,null,t.myprop.value),y.createElement(u.TableRowColumn,null,y.createElement(u.FlatButton,{label:"Update",onClick:function(){return e.props.setPropertyMutation({variables:{path:t.path,value:"test:"+new Date},refetchQueries:["NodesQuery"]})}})),y.createElement(u.TableRowColumn,null,y.createElement(u.FlatButton,{label:"Delete",onClick:function(){return e.props.removeNodeMutation({variables:{path:t.path},refetchQueries:["NodesQuery"]})}})))}):[]))}})))}}]),t}(t.Component),Z=i(J),ee=i(X),te=i(z),ne=function(e){T(t,e);function t(e){P(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.Component=a.graphql(Z,{name:"setPropertyMutation"})(a.graphql(ee,{name:"addNodeMutation"})(a.graphql(te,{name:"removeNodeMutation"})(G))),n}return E(t,[{key:"render",value:function(){var e=this.Component;return y.createElement(a.ApolloProvider,{client:l.client},y.createElement(e,null))}}]),t}(y.Component);e.DynamicComponentsList=N,e.SimpleListView=O,e.Picker=function(e){var t="state"===e.pickerType?B:M;return y.createElement(t,e)},e.PickerData=j,e.PickerView=function(e){var t=this;return y.createElement("div",null,e.pickerEntries.map(function(n){return y.createElement("div",{key:n.path,style:{marginLeft:10*n.depth+"px"}},y.createElement("input",{type:"checkbox",checked:n.open,onChange:function(t){return e.onOpenItem(n.path,t.target.checked)}}),y.createElement("input",{type:"checkbox",checked:n.selected,onChange:function(t){return e.onSelectItem(n.path,t.target.checked)}}),y.createElement("span",null,e.textRenderer?e.textRenderer.call(t,n):n.name))}))},e.PickerViewMaterial=x,e.PickerViewMaterialMultiple=$,e.NodesTable=Q,e.NodesTableData=H,e.NodesTableViewMaterial=D,e.TestLayout=function(e){return y.createElement(h.Grid,{fluid:!0},y.createElement(h.Row,null,y.createElement(h.Col,{xs:6,md:3},e.leftCol),y.createElement(h.Col,{xs:6,md:6},e.rightCol)))},e.Engine=W,e.createOutletHistory=V,e.OutletRouter=U,e.RouterExample=K,e.MutationExample=ne,e.reducers=I,e.store=q,e.resetStateReducer=L,e.muiTheme=v,Object.defineProperty(e,"__esModule",{value:!0})});