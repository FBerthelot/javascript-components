{"version":3,"file":"react-dxcomponents.umd.js","sources":["../src/javascript/i18n/getI18n.js","../src/javascript/reduxStore.js","../src/javascript/theme.js","../src/javascript/router/createOutletHistory.js","../src/javascript/router/OutletRouter.js","../src/javascript/router/RouterExample.jsx","../src/javascript/context/DxContextProvider.jsx","../src/javascript/context/withDxContext.jsx","../src/javascript/dynamicList/SimpleListView.jsx","../src/javascript/dynamicList/DynamicComponentsList.jsx","../src/javascript/i18n/LanguageSwitcher.jsx","../src/javascript/layout/SettingsLayout.jsx","../src/javascript/layout/SearchBar.jsx","../src/javascript/nodesTable/withNodesFromPath.jsx","../src/javascript/mutations/Mutation.jsx","../src/javascript/nodesTable/NodesTableViewMaterial.jsx","../src/javascript/nodesTable/withPathFromSelection.jsx","../src/javascript/picker/PickerViewMaterial.jsx","../src/javascript/picker/PickerViewMaterialMultiple.jsx","../src/javascript/picker/Picker.jsx"],"sourcesContent":["import i18n from 'i18next';\nimport XHR from 'i18next-xhr-backend';\n// import LanguageDetector from 'i18next-browser-languagedetector/';\nimport { reactI18nextModule } from 'react-i18next';\n\nfunction getI18n(options) {\n    options = options || {};\n    i18n\n        .use(XHR)\n        // .use(LanguageDetector)\n        // .use(reactI18nextModule) // if not using I18nextProvider\n        .init({\n            lng: (options.currentLanguage ? options.currentLanguage : undefined),\n            fallbackLng: 'en',\n            debug: true,\n\n            interpolation: {\n                escapeValue: false, // not needed for react!!\n            },\n\n            // react i18next special options (optional)\n            react: {\n                wait: false,\n                bindI18n: 'languageChanged loaded',\n                bindStore: 'added removed',\n                nsMode: 'default'\n            },\n\n            backend: {\n                loadPath: (options.contextPath ? options.contextPath : '') + '/modules/{{ns}}/javascript/locales/{{lng}}.json',\n            }\n        });\n    return i18n;\n}\n\n\nexport { getI18n };","import {createStore} from 'redux'\nimport * as _ from \"lodash\";\n\nconst reducers = {};\n\nconst store = function () {\n    let debugTool;\n    if (typeof window !== 'undefined') {\n        debugTool = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n            name: \"DX Redux\",\n            instanceId: \"dx\"\n        });\n    }\n\n    return createStore((state = {}, action) => _.mapValues(reducers, (value, key) => value(state[key], action)), debugTool);\n}();\n\nconst resetStateReducer = function(state, action) {\n    if (action.type === 'RESET_STATE') {\n        return undefined;\n    }\n    return state;\n};\n\nexport {reducers, store, resetStateReducer};\n","import {createMuiTheme} from 'material-ui';\nimport {blueGrey, lightBlue, red, grey} from 'material-ui/colors/index'\n\n// All the following keys are optional.\n// We try our best to provide a great default value.\nlet theme = createMuiTheme({\n    palette: {\n        background: {\n            global: grey[200]\n        },\n        contrastThreshold: 3.1,\n        tonalOffset: 0.07,\n        primary: {\n            main: blueGrey[600],\n            light: blueGrey[300],\n            dark: blueGrey[700]\n        },\n        secondary: {\n            main: lightBlue[600],\n            light: lightBlue[300],\n            dark: lightBlue[700]\n        },\n        error: {\n            light: red.A200,\n            main: red.A400,\n            dark: red.A700\n        },\n    },\n});\n\nexport {theme}\n","import * as _ from \"lodash\";\n\nfunction createOutletHistory(baseHistory, outletName) {\n\n    const getPath = (path) => {\n        let parts = [];\n        let base = baseHistory.location.pathname;\n        let newPath = outletName + ':' + path;\n        if (base.indexOf('(') > -1) {\n            base = base.substr(base.indexOf('(')+1);\n            base = base.substr(0,base.indexOf(')'));\n            parts = base.split('//')\n            parts = _.map(parts, (p)=> (p.startsWith(outletName + ':') ? newPath : p));\n        }\n        if (parts.indexOf(newPath) === -1) {\n            parts.push(newPath);\n        }\n        return '/('+ _.join(parts,'//') + ')';\n    };\n\n    const getState = function (state) {\n        let newState;\n        if (state) {\n            newState = baseHistory.location.state ? baseHistory.location.state : {};\n            newState['router_' + outletName] = state;\n        } else if (baseHistory.location.state) {\n            newState = baseHistory.location.state;\n            delete newState['router_' + outletName]\n        }\n        return newState;\n    };\n\n    const extractPath = function(base) {\n        if (base.indexOf('(') > -1) {\n            base = base.substr(base.indexOf('(') + 1);\n            base = base.substr(0, base.indexOf(')'));\n            let parts = base.split('//')\n            let s = outletName + ':';\n            let part = _.find(parts, (p)=> (p.startsWith(s)));\n            if (part) {\n                return part.substr(s.length)\n            }\n        }\n        return '';\n    };\n\n    let initialLocation = _.clone(baseHistory.location);\n    initialLocation.pathname = extractPath(initialLocation.pathname);\n\n    let listeners = [];\n\n    const history = {\n        length: baseHistory.length,\n        action: baseHistory.action,\n        location: initialLocation,\n        createHref: (location) => {\n            return baseHistory.createHref({pathname:getPath(location.pathname)});\n        },\n        push: (path, state) => {\n            return baseHistory.push(getPath(path),getState(state));\n        },\n        replace: (path, state) => {\n            baseHistory.replace(getPath(path),getState(state));\n        },\n        go: (n) => {\n            baseHistory.go(n)\n        },\n        goBack: () => {\n            baseHistory.goBack()\n        },\n        goForward: () => {\n            baseHistory.goForward()\n        },\n        block:(prompt) => {\n            return baseHistory.block(prompt)\n        },\n        listen: (listener) => {\n            listeners.push(listener);\n            return () => {\n                _.pull(listeners, listener);\n            }\n        },\n        dispose: () => {\n            unlisten();\n        }\n    };\n\n    const unlisten = baseHistory.listen( (event) => {\n        let path = extractPath(event.pathname);\n        let state;\n        if (event.state && event.state['router_' + outletName]) {\n            state = event.state['router_' + outletName];\n        }\n        if (history.location.pathname !== path || history.location.state !== state) {\n            Object.assign(history.location, event);\n            history.location.pathname = path;\n            history.location.state = state;\n            _.each(listeners, (listener) => listener.call(this,history.location))\n        }\n    });\n\n    // unlisten when not used anymore !\n\n    return history\n}\n\nexport { createOutletHistory }","import React from 'react';\n\nimport {createHashHistory} from \"history\";\nimport {createOutletHistory} from \"./createOutletHistory\"\nimport {Router} from 'react-router'\n\nlet baseHistory = createHashHistory();\n\nclass OutletRouter extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.outletHistory = createOutletHistory(baseHistory, props.outlet);\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentWillUnmount() {\n        this.outletHistory.dispose();\n    }\n\n    render() {\n        return (<Router history={this.outletHistory}>{this.props.children}</Router>)\n    }\n}\n\nexport { OutletRouter };","import React from 'react';\nimport {OutletRouter as Router} from './OutletRouter'\nimport {Link, Route} from 'react-router-dom'\nimport {Paper, Typography} from 'material-ui'\nclass RouterExample extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n\n        let Test1 = props => (\n            <Paper elevation={4}>\n                <Typography type=\"headline\" component=\"h3\">\n                    Page 1\n                </Typography>\n                <Typography component=\"p\">\n                    Param = {props.match.params.value}\n                </Typography>\n            </Paper>\n        );\n        let Test2 = props => (\n            <Paper elevation={4}>\n                <Typography type=\"headline\" component=\"h3\">\n                    Page 2\n                </Typography>\n            </Paper>\n\n        );\n        let Test3 = props => (\n            <Paper elevation={4}>\n                <Typography type=\"headline\" component=\"h3\">\n                    Page 3\n                </Typography>\n            </Paper>\n        );\n\n        return (<Router outlet={this.props.id}>\n            <div>\n                <Link to={'/test1/value1'}>test1/value1</Link>\n                <Link to={'/test1/value2'}>Test1/value2</Link>\n                <Link to={'/test2'}>test2</Link>\n                <Link to={'/test3'}>test3</Link>\n\n                <Route path={'/test1/:value'} component={Test1}/>\n                <Route path={'/test2'} component={Test2}/>\n                <Route path={'/test3'} component={Test3}/>\n            </div>\n        </Router>);\n    }\n\n}\n\nexport {RouterExample}\n","import React from 'react';\nimport {MuiThemeProvider} from 'material-ui';\nimport {getI18n} from \"../i18n/getI18n\";\nimport {store} from '../reduxStore';\nimport {theme} from '../theme'\nimport {client} from '@jahia/apollo-dx';\nimport {ApolloProvider} from 'react-apollo';\nimport {Provider} from 'react-redux'\nimport {I18nextProvider} from 'react-i18next'\nimport {HashRouter} from 'react-router-dom'\nimport {OutletRouter} from '../router'\nimport PropTypes from 'prop-types';\nimport * as _ from \"lodash\";\n\nclass DxContextProvider extends React.Component {\n    constructor(props) {\n        super(props);\n        if (props.mui && typeof props.mui === 'object') {\n            this.state = {\n                theme: props.mui\n            }\n        }\n        props.dxContext.setTheme = (theme) => {\n            this.setState({\n                theme: theme\n            });\n        }\n    }\n\n    getChildContext() {\n        return {dxContext: this.props.dxContext};\n    }\n\n    render() {\n        let {dxContext, children, i18n, apollo, redux, mui, router} = this.props;\n\n        let Component = React.Children.only(children);\n        if (i18n) {\n            let options = {currentLanguage:dxContext.uilang, contextPath:dxContext.contextPath};\n            if (typeof i18n === 'object') {\n                Object.assign(options, i18n)\n            }\n            Component = React.createElement(I18nextProvider, {i18n:getI18n(options)}, Component);\n        }\n        if (router) {\n            let router = HashRouter;\n            let options = {};\n            if (typeof router === 'object') {\n                if (router.type === 'outlet') {\n                    router = OutletRouter;\n                    options.outlet = router.outlet;\n                }\n            }\n            Component = React.createElement(HashRouter, options, Component);\n        }\n        if (apollo) {\n            let options = {contextPath:dxContext.contextPath};\n            if (typeof apollo === 'object') {\n                Object.assign(options, apollo)\n            }\n            Component = React.createElement(ApolloProvider, {client:client(options)}, Component);\n        }\n        if (redux) {\n            Component = React.createElement(Provider, {store:store}, Component);\n        }\n        if (mui) {\n            let theTheme = theme;\n            if (this.state && this.state.theme) {\n                theTheme = _.merge({}, theme, this.state.theme);\n            }\n            Component = React.createElement(MuiThemeProvider, {theme:theTheme}, Component);\n        }\n        return Component;\n    }\n}\n\nDxContextProvider.childContextTypes = {\n    dxContext: PropTypes.object\n};\n\nexport {DxContextProvider}","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction withDxContext() {\n    return (WrappedComponent) => {\n        let Component = class extends React.Component {\n            render() {\n                return (<WrappedComponent dxContext={this.context.dxContext} {...this.props} />)\n            }\n        }\n\n        Component.contextTypes = {\n            dxContext: PropTypes.object\n        };\n\n        return Component\n    }\n}\n\nexport { withDxContext }","import React from 'react';\n\nclass SimpleListView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            reactElements: []\n        };\n    }\n\n    // todo should move this code dynamicList itself\n    componentDidMount() {\n        if (this.props.components && !this.done) {\n            this.props.components.then((reactElements) => {\n                this.done = true;\n                this.setState({reactElements: reactElements});\n            });\n        }\n    }\n\n    componentDidUpdate() {\n        this.componentDidMount();\n    }\n\n    render() {\n        return this.done ? (<div>{this.state.reactElements}</div>) : (<div/>);\n    }\n}\n\nexport {SimpleListView}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {SimpleListView} from './SimpleListView'\nimport {graphql} from 'react-apollo';\nimport gql from \"graphql-tag\";\nimport * as _ from \"lodash\";\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\nimport PropTypes from 'prop-types';\n\nclass DynamicComponentsList extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.componentCache = [];\n    }\n\n    mapResultsToProps({data, ownProps}) {\n        let components = [];\n\n        let jcr = data.jcr;\n        let safeEval = eval;\n        if (jcr && jcr.nodesByQuery) {\n            components = _.map(_.flatMap(jcr.nodesByQuery.nodes, \"children.nodes\"),(n)=> safeEval(\"(\" + n.renderedContent.output + \")\"));\n        }\n\n        let imports = [];\n        _.each(components, c => {\n            imports = imports.concat(c.getImports())\n        });\n        let promise;\n        if (imports.length > 0) {\n            promise = Promise.all(_.map(imports, (imp) => SystemJS.import(imp))).then(m => {\n                let reactElements = _.map(components, (c) => {\n                    let s = c.getImports().length;\n                    let r = c.createElement(React, ReactDOM, ...m);\n                    m.splice(s);\n                    return r;\n                });\n                return reactElements;\n            });\n        }\n\n        return {\n            ...ownProps,\n            components: promise,\n        };\n    }\n\n    mapPropsToOptions(props) {\n        return {\n            variables : {\n                query: \"select * from [reactnt:componentsFolder] where [react:id]='\" + props.id + \"'\"\n            }\n        };\n    }\n\n    render() {\n        let renderComponent = this.props.renderComponent;\n\n        let cacheMatch = _.find(this.componentCache, (f) => f.renderComponent === renderComponent);\n        let Component;\n        if (cacheMatch) {\n            Component = cacheMatch.dataComponent;\n        } else {\n            let query = gql`\n                query ComponentsQuery($query:String!) {\n                    jcr {\n                        nodesByQuery(query:$query) {\n                            nodes {\n                                name\n                                path\n                                primaryNodeType {\n                                    name\n                                }\n                                children {\n                                    nodes {\n                                        name\n                                        path\n                                        primaryNodeType {\n                                            name\n                                        }\n                                        renderedContent(templateType:\"js\", view:\"react\") {\n                                            output\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }`;\n\n            Component = graphql(query, {\n                props: this.mapResultsToProps,\n                options: this.mapPropsToOptions\n            })(renderComponent || SimpleListView);\n\n            this.componentCache.push({renderComponent: renderComponent, dataComponent: Component});\n        }\n\n        return (<Component {...this.props} />);\n    }\n}\n\nDynamicComponentsList.propTypes = {\n    /**\n     * Id of the \"componentsFolder\" to look for\n     */\n    id: PropTypes.string.isRequired,\n\n    /**\n     * Component to use to do the rendering\n     */\n    renderComponent: PropTypes.element\n}\n\nexport {DynamicComponentsList};\n","import React from 'react';\nimport {Button, Menu, MenuItem} from 'material-ui';\nimport {translate} from 'react-i18next';\nimport PropTypes from 'prop-types';\n\nclass LanguageSwitcher extends React.Component {\n\n    constructor(props,context) {\n        super(props,context);\n        this.state = {\n            anchorEl: null,\n        };\n    }\n\n    handleClick(event) {\n        this.setState({anchorEl: event.target});\n    }\n\n    handleClose(lang) {\n        this.setState({anchorEl: null});\n        if (lang) {\n            this.context.i18n.changeLanguage(lang);\n        }\n    };\n\n    render() {\n        let availableLocales = ['fr', 'en'];\n\n        return (<div>\n            <Button onClick={this.handleClick.bind(this)}\n            >{this.props.t('label.languages')}</Button>\n            <Menu open={Boolean(this.state.anchorEl)} onClose={this.handleClose.bind(this, null)}\n                  anchorEl={this.state.anchorEl}>\n                {availableLocales.map((locale) => (\n                    <MenuItem onClick={this.handleClose.bind(this, locale)} key={locale}\n                              value={locale}>{locale}</MenuItem>))}\n            </Menu>\n        </div>);\n    }\n}\n\nLanguageSwitcher.contextTypes = {\n    i18n: PropTypes.object\n};\n\nLanguageSwitcher = translate('react-dxcomponents')(LanguageSwitcher);\n\n\nexport {LanguageSwitcher}\n","import React from 'react';\nimport {AppBar, Toolbar, Typography, withStyles} from 'material-ui';\nimport PropTypes from 'prop-types';\n\nconst styles = theme => ({\n    root: {\n        backgroundColor: theme.palette.background.global\n    },\n    main: {\n        minHeight: 'calc(100% - 96px)',\n        marginTop: 64,\n        padding: 1\n    },\n    footer: {\n        fontSize: '14px',\n        fontFamily: theme.typography.fontFamily,\n        fontWeight: 300,\n        padding: \"8px\",\n        textAlign: \"center\",\n        color: theme.palette.text.secondary\n    },\n    appBar: {\n        transition: \"all 200ms ease-in-out\"\n    }\n});\n\n\nclass SettingsLayout extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let { classes, appBar, children, footer, appBarStyle } = this.props;\n        return (\n            <section className={classes.root} >\n                <AppBar position=\"fixed\" classes={{root:classes.appBar}} style={appBarStyle}>\n                    {appBar}\n                </AppBar>\n                <section className={classes.main}>\n                    {children}\n                </section>\n                <footer className={classes.footer}>\n                    {footer}\n                </footer>\n            </section>\n        );\n    }\n}\n\n\nSettingsLayout.propTypes = {\n    appBar: PropTypes.element,\n    footer: PropTypes.string\n};\n\nSettingsLayout = withStyles(styles)(SettingsLayout);\n\nexport {SettingsLayout};","import React from 'react';\nimport {Input, InputAdornment, withStyles } from 'material-ui';\nimport { Search } from 'material-ui-icons';\nimport {translate} from 'react-i18next';\n\nconst styles = theme => ({\n    root: {\n        position: 'absolute',\n        margin: '0 auto',\n        left: '0',\n        right: '0',\n        color : 'inherit',\n        backgroundColor : theme.palette.primary.light,\n        width: '720px',\n        height: '44px',\n        lineHeight: '40px',\n        borderRadius: '3px',\n        fontWeight: '200'\n    },\n    rootFocus: {\n        position: 'absolute',\n        margin: '0 auto',\n        left: '0',\n        right: '0',\n        color: theme.palette.text.secondary,\n        backgroundColor : '#fff',\n        width: '720px',\n        height: '44px',\n        lineHeight: '40px',\n        borderRadius: '3px',\n        fontWeight: '100',\n        boxShadow: \"0 1px 8px 0 rgba(0, 0, 0, 0.4)\",\n        // '& $input': {\n        //     width: '300px'\n        // }\n    },\n    input: {\n        transitionProperty: 'width',\n        transitionDuration: '300ms',\n        transitionTimingFunction: 'cubic-bezier(0.4, 0, 0.2, 1)',\n        transitionDelay: '0ms',\n\n    },\n    searchIcon: {\n        'marginTop': 'auto',\n        'marginBottom': 'auto',\n        'paddingLeft': '14px',\n        'opacity': '0.87'\n    }\n});\n\nclass SearchBar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.onFocus = this.onFocus.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        this.state = {\n            inputStyle: props.classes.root\n        }\n    }\n\n    handleChange(event) {\n        // Let the handler deal with the change only when the user has paused changing the filter text for a second.\n        event.persist();\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n        }\n        this.timeout = setTimeout(function() {\n            this.props.onChangeFilter(event.target.value)\n        }.bind(this), 1000);\n    }\n\n    onFocus() {\n        this.setState({\n            inputStyle: this.props.classes.rootFocus\n        });\n        this.props.onFocus();\n    }\n\n    onBlur() {\n        this.setState({\n            inputStyle: this.props.classes.root\n        });\n        this.props.onBlur();\n    }\n\n    render() {\n\n        const { classes,t, placeholderLabel } = this.props;\n\n        return (\n            <Input classes={{root: this.state.inputStyle, input: classes.input}}\n                   onChange={this.handleChange}\n                   onBlur={this.onBlur}\n                   onFocus={this.onFocus}\n                   disableUnderline={true}\n                   type=\"text\"\n                   placeholder={placeholderLabel || t('label.searchPlaceholder')}\n                   startAdornment={<InputAdornment classes={{root: classes.searchIcon}} position=\"start\"><Search/></InputAdornment>}\n            />\n        )\n    }\n}\n\nSearchBar = withStyles(styles)(translate('react-dxcomponents')(SearchBar));\n\nexport {SearchBar};","import React from 'react';\nimport {graphql} from 'react-apollo';\nimport gql from \"graphql-tag\";\nimport * as _ from \"lodash\";\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\n\nfunction withNodesFromPath(fragments) {\n    return (ViewComponent) => {\n        // GraphQL maps\n        let mapResultsToProps = ({data, ownProps}) => {\n            let nodes = [];\n\n            let jcr = data.jcr;\n\n            if (jcr) {\n                if (jcr.node) {\n                    nodes = jcr.node.children.nodes;\n                }\n            }\n\n            return {\n                ...ownProps,\n                nodes: nodes,\n            };\n        };\n\n        let mapPropsToOptions = (props) => {\n            let vars = {\n                path: props.path,\n                types: props.types,\n            };\n            if (props.queryVariables) {\n                _.assign(vars, props.queryVariables);\n            }\n\n            return {\n                variables: vars,\n                skip: !props.path\n            }\n        };\n\n        let query = gql`\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }`;\n\n        replaceFragmentsInDocument(query, fragments);\n\n        return graphql(query, {\n            props: mapResultsToProps,\n            options: mapPropsToOptions\n        })(ViewComponent);\n    }\n}\n\nexport {withNodesFromPath};\n","import React, {Component} from 'react';\nimport {ApolloProvider, graphql} from 'react-apollo';\nimport gql from 'graphql-tag';\nimport {withNodesFromPath} from \"../nodesTable/withNodesFromPath\";\nimport {Button, Table, TableBody, TableCell, TableHead, TableRow} from 'material-ui';\n\n\nclass MutationExampleView extends Component {\n\n    constructor(props) {\n        super(props);\n\n        let RenderComponent = (props) => (<Table>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Name</TableCell>\n                        <TableCell>Value</TableCell>\n                        <TableCell>Update</TableCell>\n                        <TableCell>Delete</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {props.nodes ? props.nodes.map(node =>\n                        <TableRow key={node.uuid}>\n                            <TableCell>{node.name}</TableCell>\n                            <TableCell>{node.myprop.value}</TableCell>\n                            <TableCell><Button onClick={() => this.props.setPropertyMutation({\n                                variables: {\n                                    path: node.path,\n                                    value: (\"test:\" + new Date())\n                                },\n                                refetchQueries: [\"NodesQuery\"]\n                                // update: update\n                            })}>Update</Button></TableCell>\n                            <TableCell><Button onClick={() => this.props.removeNodeMutation({\n                                variables: {\n                                    path: node.path,\n                                },\n                                refetchQueries: [\"NodesQuery\"]\n                            })}>Delete</Button></TableCell>\n                        </TableRow>\n                    ) : []}\n                </TableBody>\n            </Table>\n        );\n\n        this.Component = withNodesFromPath([{\n            applyFor: \"node\",\n            gql: gql`fragment Test on JCRNode {\n                myprop:property(name:\"myprop\") {\n                    value\n                }\n            }`\n        }])(RenderComponent);\n    }\n\n\n    render() {\n        let Component = this.Component;\n        return (\n            <div>\n                <Button onClick={() => this.props.addNodeMutation({\n                    variables: {\n                        name: (\"name-\" + (new Date().getTime())),\n                        value: (\"test:\" + new Date())\n                    },\n                    refetchQueries: [\"NodesQuery\"]\n                })}>New</Button>\n\n                <Component path={\"/\"} types={[\"nt:unstructured\"]}/>\n            </div>\n        )\n    }\n}\n\nconst setProperty = gql`\n    mutation setProperty($value:String,$path:String!) {\n        jcr {\n            mutateNode(pathOrId:$path) {\n                mutateProperty(name:\"myprop\") {\n                    setValue(value:$value)\n                }\n                node {\n                    path\n                }\n            }\n        }\n    }\n`;\n\nconst addNode = gql`\n    mutation addNode($value:String, $name:String!) {\n        jcr {\n            addNode(parentPathOrId:\"/\",name:$name,primaryNodeType:\"nt:unstructured\") {\n                mutateProperty(name:\"myprop\") {\n                    setValue(value:$value)\n                }\n            }\n        }\n    }\n`;\n\nconst removeNode = gql`\n    mutation removeNode($path:String!) {\n        jcr {\n            deleteNode(pathOrId:$path)\n        }\n    }\n`;\n\nlet MutationExample = graphql(setProperty, {name: 'setPropertyMutation'})(\n    graphql(addNode, {name: 'addNodeMutation'})(\n        graphql(removeNode, {name: 'removeNodeMutation'})(MutationExampleView)));\n\nexport {MutationExample};","import React from 'react';\nimport {Table, TableBody, TableCell, TableHead, TableRow} from 'material-ui';\nimport PropTypes from 'prop-types';\n\nlet NodesTableViewMaterial = function (props) {\n\n    let headers = props['headers'] ? props['headers'] : () => (\n        <TableRow>\n            <TableCell>Name</TableCell>\n        </TableRow>);\n\n    let row = props['row'] ? props['row'] : (node) => (<TableRow key={node.path}>\n            <TableCell>{props['textRenderer'] ? props['textRenderer'].call(this, node) : node.name}</TableCell>\n        </TableRow>);\n\n    return (<Table>\n                <TableHead>\n                    {headers()}\n                </TableHead>\n                <TableBody>\n                    {props.nodes ? props.nodes.map(row) : []}\n                </TableBody>\n            </Table>)\n};\n\nNodesTableViewMaterial.propTypes = {\n    headers: PropTypes.func,\n    row: PropTypes.func,\n    textRenderer: PropTypes.func,\n    nodes: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport {NodesTableViewMaterial};","import React from 'react';\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\nimport {connect} from 'react-redux'\n\nfunction withPathFromSelection(reduxStoreId) {\n    return (WrappedComponent) => {\n        return connect(\n            (state, ownProps) => ({\n                ...ownProps,\n                path: (state[\"selectedPaths_\" + reduxStoreId] && state[\"selectedPaths_\" + reduxStoreId].length === 1) ? state[\"selectedPaths_\" + reduxStoreId][0] : null,\n            }),\n            () => ({}))(WrappedComponent);\n    }\n}\n\nexport { withPathFromSelection }","import React from 'react';\nimport {IconButton, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, withTheme} from 'material-ui';\nimport {ExpandLess, ExpandMore, RadioButtonChecked, RadioButtonUnchecked} from 'material-ui-icons'\nimport PropTypes from 'prop-types';\n\nlet PickerViewMaterial = function (props) {\n    return (<List>\n        {props.pickerEntries.map((entry) =>\n            (<ListItem button\n                       onClick={() => entry.selectable ? props.onSelectItem(entry.path, !entry.selected) : props.onOpenItem(entry.path, !entry.open)}\n                       key={entry.path}\n                >\n                    <ListItemIcon style={entry.selectable ? {} : {opacity: 0}}>{entry.selected ? <RadioButtonChecked/> :\n                        <RadioButtonUnchecked/>}</ListItemIcon>\n                    <ListItemText style={{paddingLeft: entry.depth * props.theme.spacing.unit}} inset\n                                  primary={props['textRenderer'] ? props['textRenderer'].call(this, entry) : entry.name} />\n                    <ListItemSecondaryAction>\n                        {entry.openable && entry.hasChildren ? (\n                            <IconButton onClick={() => props.onOpenItem(entry.path, !entry.open)}>{entry.open ?\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : null}\n                    </ListItemSecondaryAction>\n                </ListItem>\n            )\n        )}\n    </List>)\n};\n\nPickerViewMaterial.propTypes = {\n    pickerEntries: PropTypes.array.isRequired,\n    onSelectItem: PropTypes.func,\n    onOpenItem: PropTypes.func,\n    textRenderer: PropTypes.func\n};\n\nPickerViewMaterial = withTheme()(PickerViewMaterial);\n\nexport {PickerViewMaterial};","import React from 'react';\nimport {IconButton, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, withTheme} from 'material-ui';\nimport {ExpandLess, ExpandMore, CheckBoxOutlineBlank, CheckBox} from 'material-ui-icons'\nimport PropTypes from 'prop-types';\n\nlet PickerViewMaterialMultiple = function (props) {\n    return (<List>\n        {props.pickerEntries.map((entry) =>\n            (<ListItem button\n                       onClick={() => entry.selectable ? props.onSelectItem(entry.path, !entry.selected, true) : props.onOpenItem(entry.path, !entry.open)}\n                       key={entry.path}\n                >\n                    <ListItemIcon style={entry.selectable ? {} : {opacity: 0}}>{entry.selected ? <CheckBox/> :\n                        <CheckBoxOutlineBlank/>}</ListItemIcon>\n                    <ListItemText style={{paddingLeft: entry.depth * props.theme.spacing.unit}} inset\n                                  primary={props['textRenderer'] ? props['textRenderer'].call(this, entry) : entry.name} />\n                    <ListItemSecondaryAction>\n                        {entry.openable && entry.hasChildren ? (\n                            <IconButton onClick={() => props.onOpenItem(entry.path, !entry.open)}>{entry.open ?\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : null}\n                    </ListItemSecondaryAction>\n                </ListItem>\n            )\n        )}\n    </List>)\n};\n\nPickerViewMaterialMultiple.propTypes = {\n    pickerEntries: PropTypes.array.isRequired,\n    onSelectItem:  PropTypes.func,\n    onOpenItem: PropTypes.func,\n    textRenderer: PropTypes.func,\n};\n\nPickerViewMaterialMultiple = withTheme()(PickerViewMaterialMultiple);\n\nexport { PickerViewMaterialMultiple };","import React from 'react';\nimport {graphql} from 'react-apollo';\nimport gql from \"graphql-tag\";\nimport * as _ from \"lodash\";\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\nimport PropTypes from 'prop-types';\n\nclass Picker extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let query = gql`\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }`;\n\n        let { fragments, ...graphqlComponentProps } = props;\n\n        replaceFragmentsInDocument(query, fragments);\n\n        this.graphqlComponentProps = graphqlComponentProps;\n\n        let state = {};\n        let that = this;\n        if (!props.openPaths) {\n            state.openPaths = props.defaultOpenPaths ? _.clone(props.defaultOpenPaths) : [];\n            graphqlComponentProps.onOpenItem = (path,open) => {\n                that.setState( (prevState, props) => ({\n                    openPaths: open ? [\n                        ...prevState.openPaths,\n                        path\n                    ] : _.filter(prevState.openPaths, (thispath) => thispath !== path)\n                }));\n                if (props.onOpenItem) {\n                    props.onOpenItem(path,open);\n                }\n            }\n        }\n\n        if (!props.selectedPaths) {\n            state.selectedPaths = props.defaultSelectedPaths ? _.clone(props.defaultSelectedPaths) :  [];\n            graphqlComponentProps.onSelectItem = (path,selected,multiple) => {\n                that.setState((prevState, props)=> ({\n                    selectedPaths: selected ? [\n                        ...(multiple ? prevState.selectedPaths : []),\n                            path\n                        ] : _.filter(prevState.selectedPaths, (thispath) => thispath !== path)\n                }));\n                if (props.onSelectItem) {\n                    props.onSelectItem(path,select,multiple);\n                }\n            }\n        }\n        this.state = state;\n\n        this.GraphQLComponent = graphql(query, {\n            props: this.mapResultsToProps,\n            options: this.mapPropsToOptions\n        })(this.props.render);\n    }\n\n    componentDidUpdate(prevProps, prevState, prevContext) {\n        if (this.props.onSelectionChange && !_.isEqual(this.state.selectedPaths,prevState.selectedPaths)) {\n            this.props.onSelectionChange(this.state.selectedPaths);\n        }\n    }\n\n    componentWillReceiveProps(nextProps, nextState) {\n        let { fragments, onOpenItem, onSelectItem, ...graphqlComponentProps } = nextProps;\n        _.assign(this.graphqlComponentProps, graphqlComponentProps);\n    }\n\n    mapResultsToProps({data, ownProps}) {\n        let selectedPaths = ownProps.selectedPaths;\n        let openPaths = ownProps.openPaths ? ownProps.openPaths : [];\n\n        let pickerEntries = [];\n        let nodesById = {};\n        let jcr = data.jcr;\n\n        let addNode = function (node, depth, index) {\n            let selected = false;\n            if (node.selectable) {\n                selected = _.indexOf(selectedPaths, node.path) !== -1\n            }\n            let pickerNode = {\n                name: node.name,\n                path: node.path,\n                open: node.openable && _.indexOf(openPaths, node.path) !== -1,\n                selected: selected,\n                openable: node.openable,\n                selectable: node.selectable,\n                depth: depth,\n                prefix: _.repeat(\"&nbsp;\", depth * 3),\n                node: node,\n                hidden: false,\n                hasChildren: node.children.pageInfo.totalCount > 0\n            };\n            pickerEntries.splice(index, 0, pickerNode);\n            nodesById[node.uuid] = pickerNode;\n            return pickerNode;\n        };\n\n        if (jcr) {\n            if (jcr.rootNodes) {\n                _.forEach(jcr.rootNodes, rootNode => {\n                    let root = addNode(rootNode, 0, 0);\n                    root.hidden = ownProps.hideRoot;\n                });\n            }\n            if (jcr.openNodes) {\n                _.sortBy(jcr.openNodes, ['path']).forEach((node) => {\n                    let parent = nodesById[node.uuid];\n                    if (parent) {\n                        let parentIndex = _.indexOf(pickerEntries, parent);\n                        _.forEachRight(node.children.nodes, (child) => {\n                            addNode(child, parent.depth + 1, parentIndex + 1)\n                        })\n                    }\n                });\n            }\n        }\n\n        // Nodes loaded, fill selection list\n        let selectedNodes = _.filter(pickerEntries, (node) => {\n            return node.selected\n        }).map((node) => {\n            return node.node\n        });\n\n        selectedPaths = _.map(selectedNodes, \"path\");\n        pickerEntries = _.filter(pickerEntries, pickerNode => {\n            return !pickerNode.hidden;\n        });\n\n        return {\n            ...ownProps,\n            pickerEntries: pickerEntries,\n        };\n    }\n\n    mapPropsToOptions(props) {\n        let openPaths = props.openPaths ? props.openPaths : [];\n\n        let fullyOpenPath = (props, path) => {\n            let rootFound = false;\n            _.tail(_.split(path, \"/\")).reduce((acc, it) => {\n                if (!rootFound) {\n                    _.forEach(props.rootPaths, rootPath => {\n                        rootFound = rootFound || _.startsWith(acc, rootPath);\n                    })\n                }\n                if (rootFound && _.indexOf(openPaths, acc) === -1) {\n                    openPaths.push(acc);\n                }\n                return acc + \"/\" + it\n            }, \"\");\n        };\n\n        if (props.selectedPaths) {\n            _.each(props.selectedPaths, path => fullyOpenPath(props, path));\n        }\n\n        let vars = {\n            rootPaths: props.rootPaths,\n            types: _.union(props.openableTypes, props.selectableTypes),\n            selectable: props.selectableTypes,\n            openable: props.openableTypes,\n            openPaths: openPaths,\n        };\n\n        if (props.queryVariables) {\n            _.assign(vars, props.queryVariables);\n        }\n\n        return {\n            variables: vars\n        }\n    }\n\n    render() {\n        let GraphQLComponent = this.GraphQLComponent;\n\n        return <GraphQLComponent {...this.graphqlComponentProps} {...this.state} />\n    }\n}\n\nPicker.propTypes = {\n    /**\n     * List of root paths for the picker\n     */\n    rootPaths: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n    /**\n     * List of folder paths that are open by default (uncontrolled mode)\n     */\n    defaultOpenPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * List of node types that can be \"opened\" (folders)\n     */\n    openableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n    /**\n     * List of open folders in controlled mode\n     */\n    openPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * List of node types that can be \"selected\" (items)\n     */\n    selectableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n    /**\n     * Preselected items path (uncontrolled mode)\n     */\n    defaultSelectedPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * List of selected path in controlled mode\n     */\n    selectedPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * Callback when the selection has changed\n     */\n    onSelectionChange: PropTypes.func,\n\n    /**\n     * Component to use to do the full rendering of the tree. Should accept : pickerEntries,onSelectItem,onOpenItem . Other properties are passed through.\n     */\n    render: PropTypes.func,\n\n    /**\n     * Optional set of fragments to add to the graphQL query. Can be a string that identify a predefinedFragment or a fragment definition\n     */\n    fragments: PropTypes.arrayOf(PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.shape({\n            applyFor: PropTypes.string.isRequired,\n            variables: PropTypes.string,\n            gql: PropTypes.object.isRequired\n        })\n    ])),\n\n    /**\n     * Optional set of variable to pass to the graphQL query, in order to fulfill fragments needs\n     */\n    queryVariables: PropTypes.object\n\n};\n\n\nexport {Picker}"],"names":["getI18n","options","use","XHR","init","currentLanguage","undefined","contextPath","i18n","reducers","store","debugTool","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","state","action","_","value","key","resetStateReducer","type","theme","createMuiTheme","grey","blueGrey","lightBlue","red","A200","A400","A700","createOutletHistory","baseHistory","outletName","getPath","path","parts","base","location","pathname","newPath","indexOf","substr","split","p","startsWith","push","getState","newState","extractPath","s","part","length","initialLocation","listeners","history","createHref","replace","n","go","goBack","goForward","prompt","block","listener","unlisten","listen","event","assign","call","createHashHistory","OutletRouter","props","outletHistory","outlet","dispose","React","children","Component","RouterExample","Test1","match","params","Test2","Test3","id","Route","DxContextProvider","mui","babelHelpers.typeof","dxContext","setTheme","setState","apollo","redux","router","Children","only","uilang","createElement","I18nextProvider","HashRouter","ApolloProvider","client","Provider","theTheme","MuiThemeProvider","childContextTypes","PropTypes","object","withDxContext","WrappedComponent","context","contextTypes","SimpleListView","components","done","then","reactElements","componentDidMount","DynamicComponentsList","componentCache","data","ownProps","jcr","safeEval","eval","nodesByQuery","nodes","renderedContent","output","imports","concat","c","getImports","promise","Promise","all","imp","SystemJS","import","r","ReactDOM","m","splice","renderComponent","cacheMatch","f","dataComponent","query","gql","graphql","mapResultsToProps","mapPropsToOptions","propTypes","string","isRequired","element","LanguageSwitcher","anchorEl","target","lang","changeLanguage","availableLocales","handleClick","bind","t","Boolean","handleClose","map","locale","translate","styles","palette","background","global","typography","fontFamily","text","secondary","SettingsLayout","classes","appBar","footer","appBarStyle","root","main","withStyles","primary","light","SearchBar","handleChange","onFocus","onBlur","persist","timeout","setTimeout","onChangeFilter","rootFocus","placeholderLabel","Input","inputStyle","input","searchIcon","Search","withNodesFromPath","fragments","ViewComponent","node","vars","types","queryVariables","MutationExampleView","RenderComponent","uuid","name","myprop","setPropertyMutation","Date","removeNodeMutation","addNodeMutation","getTime","setProperty","addNode","removeNode","MutationExample","NodesTableViewMaterial","headers","row","func","arrayOf","withPathFromSelection","reduxStoreId","connect","PickerViewMaterial","pickerEntries","entry","selectable","onSelectItem","selected","onOpenItem","open","opacity","RadioButtonChecked","RadioButtonUnchecked","ListItemText","paddingLeft","depth","spacing","unit","openable","hasChildren","ExpandLess","ExpandMore","array","withTheme","PickerViewMaterialMultiple","CheckBox","CheckBoxOutlineBlank","Picker","graphqlComponentProps","that","openPaths","defaultOpenPaths","prevState","thispath","selectedPaths","defaultSelectedPaths","multiple","select","GraphQLComponent","render","prevProps","prevContext","onSelectionChange","nextProps","nextState","nodesById","index","pickerNode","pageInfo","totalCount","rootNodes","rootNode","hidden","hideRoot","openNodes","forEach","parent","parentIndex","child","selectedNodes","fullyOpenPath","rootFound","reduce","acc","it","rootPaths","rootPath","openableTypes","selectableTypes","oneOfType","shape"],"mappings":";;;;;;;;;;;;;AAEA;AACA,AAEA,SAASA,OAAT,CAAiBC,OAAjB,EAA0B;cACZA,WAAW,EAArB;SAEKC,GADL,CACSC,GADT;;;KAIKC,IAJL,CAIU;aACIH,QAAQI,eAAR,GAA0BJ,QAAQI,eAAlC,GAAoDC,SADxD;qBAEW,IAFX;eAGK,IAHL;;uBAKa;yBACE,KADF;SALb;;;eAUK;kBACG,KADH;sBAEO,wBAFP;uBAGQ,eAHR;oBAIK;SAdV;;iBAiBO;sBACK,CAACL,QAAQM,WAAR,GAAsBN,QAAQM,WAA9B,GAA4C,EAA7C,IAAmD;;KAtBzE;WAyBOC,IAAP;;;AC7BJ,IAAMC,WAAW,EAAjB;;AAEA,IAAMC,QAAQ,YAAY;QAClBC,kBAAJ;QACI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;oBACnBA,OAAOC,4BAAP,IAAuCD,OAAOC,4BAAP,CAAoC;kBAC7E,UAD6E;wBAEvE;SAFmC,CAAnD;;;WAMGC,kBAAY;YAACC,KAAD,uEAAS,EAAT;YAAaC,MAAb;eAAwBC,WAAA,CAAYR,QAAZ,EAAsB,UAACS,KAAD,EAAQC,GAAR;mBAAgBD,MAAMH,MAAMI,GAAN,CAAN,EAAkBH,MAAlB,CAAhB;SAAtB,CAAxB;KAAZ,EAAsGL,SAAtG,CAAP;CATU,EAAd;;AAYA,IAAMS,oBAAoB,SAApBA,iBAAoB,CAASL,KAAT,EAAgBC,MAAhB,EAAwB;QAC1CA,OAAOK,IAAP,KAAgB,aAApB,EAAmC;eACxBf,SAAP;;WAEGS,KAAP;CAJJ;;ACdA;;AAEA,IAAIO,QAAQC,0BAAe;aACd;oBACO;oBACAC,WAAK,GAAL;SAFP;2BAIc,GAJd;qBAKQ,IALR;iBAMI;kBACCC,eAAS,GAAT,CADD;mBAEEA,eAAS,GAAT,CAFF;kBAGCA,eAAS,GAAT;SATL;mBAWM;kBACDC,gBAAU,GAAV,CADC;mBAEAA,gBAAU,GAAV,CAFA;kBAGDA,gBAAU,GAAV;SAdL;eAgBE;mBACIC,UAAIC,IADR;kBAEGD,UAAIE,IAFP;kBAGGF,UAAIG;;;CApBV,CAAZ;;ACHA,SAASC,mBAAT,CAA6BC,WAA7B,EAA0CC,UAA1C,EAAsD;;;QAE5CC,UAAU,SAAVA,OAAU,CAACC,IAAD,EAAU;YAClBC,QAAQ,EAAZ;YACIC,OAAOL,YAAYM,QAAZ,CAAqBC,QAAhC;YACIC,UAAUP,aAAa,GAAb,GAAmBE,IAAjC;YACIE,KAAKI,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B;mBACjBJ,KAAKK,MAAL,CAAYL,KAAKI,OAAL,CAAa,GAAb,IAAkB,CAA9B,CAAP;mBACOJ,KAAKK,MAAL,CAAY,CAAZ,EAAcL,KAAKI,OAAL,CAAa,GAAb,CAAd,CAAP;oBACQJ,KAAKM,KAAL,CAAW,IAAX,CAAR;oBACQ1B,KAAA,CAAMmB,KAAN,EAAa,UAACQ,CAAD;uBAAOA,EAAEC,UAAF,CAAaZ,aAAa,GAA1B,IAAiCO,OAAjC,GAA2CI,CAAlD;aAAb,CAAR;;YAEAR,MAAMK,OAAN,CAAcD,OAAd,MAA2B,CAAC,CAAhC,EAAmC;kBACzBM,IAAN,CAAWN,OAAX;;eAEG,OAAMvB,MAAA,CAAOmB,KAAP,EAAa,IAAb,CAAN,GAA2B,GAAlC;KAbJ;;QAgBMW,WAAW,SAAXA,QAAW,CAAUhC,KAAV,EAAiB;YAC1BiC,iBAAJ;YACIjC,KAAJ,EAAW;uBACIiB,YAAYM,QAAZ,CAAqBvB,KAArB,GAA6BiB,YAAYM,QAAZ,CAAqBvB,KAAlD,GAA0D,EAArE;qBACS,YAAYkB,UAArB,IAAmClB,KAAnC;SAFJ,MAGO,IAAIiB,YAAYM,QAAZ,CAAqBvB,KAAzB,EAAgC;uBACxBiB,YAAYM,QAAZ,CAAqBvB,KAAhC;mBACOiC,SAAS,YAAYf,UAArB,CAAP;;eAEGe,QAAP;KATJ;;QAYMC,cAAc,SAAdA,WAAc,CAASZ,IAAT,EAAe;YAC3BA,KAAKI,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B;mBACjBJ,KAAKK,MAAL,CAAYL,KAAKI,OAAL,CAAa,GAAb,IAAoB,CAAhC,CAAP;mBACOJ,KAAKK,MAAL,CAAY,CAAZ,EAAeL,KAAKI,OAAL,CAAa,GAAb,CAAf,CAAP;gBACIL,QAAQC,KAAKM,KAAL,CAAW,IAAX,CAAZ;gBACIO,IAAIjB,aAAa,GAArB;gBACIkB,OAAOlC,MAAA,CAAOmB,KAAP,EAAc,UAACQ,CAAD;uBAAOA,EAAEC,UAAF,CAAaK,CAAb,CAAP;aAAd,CAAX;gBACIC,IAAJ,EAAU;uBACCA,KAAKT,MAAL,CAAYQ,EAAEE,MAAd,CAAP;;;eAGD,EAAP;KAXJ;;QAcIC,kBAAkBpC,OAAA,CAAQe,YAAYM,QAApB,CAAtB;oBACgBC,QAAhB,GAA2BU,YAAYI,gBAAgBd,QAA5B,CAA3B;;QAEIe,YAAY,EAAhB;;QAEMC,aAAU;gBACJvB,YAAYoB,MADR;gBAEJpB,YAAYhB,MAFR;kBAGFqC,eAHE;oBAIA,oBAACf,QAAD,EAAc;mBACfN,YAAYwB,UAAZ,CAAuB,EAACjB,UAASL,QAAQI,SAASC,QAAjB,CAAV,EAAvB,CAAP;SALQ;cAON,cAACJ,IAAD,EAAOpB,KAAP,EAAiB;mBACZiB,YAAYc,IAAZ,CAAiBZ,QAAQC,IAAR,CAAjB,EAA+BY,SAAShC,KAAT,CAA/B,CAAP;SARQ;iBAUH,iBAACoB,IAAD,EAAOpB,KAAP,EAAiB;wBACV0C,OAAZ,CAAoBvB,QAAQC,IAAR,CAApB,EAAkCY,SAAShC,KAAT,CAAlC;SAXQ;YAaR,YAAC2C,CAAD,EAAO;wBACKC,EAAZ,CAAeD,CAAf;SAdQ;gBAgBJ,kBAAM;wBACEE,MAAZ;SAjBQ;mBAmBD,qBAAM;wBACDC,SAAZ;SApBQ;eAsBN,eAACC,MAAD,EAAY;mBACP9B,YAAY+B,KAAZ,CAAkBD,MAAlB,CAAP;SAvBQ;gBAyBJ,gBAACE,QAAD,EAAc;sBACRlB,IAAV,CAAekB,QAAf;mBACO,YAAM;sBACT,CAAOV,SAAP,EAAkBU,QAAlB;aADJ;SA3BQ;iBA+BH,mBAAM;;;KA/BnB;;QAoCMC,WAAWjC,YAAYkC,MAAZ,CAAoB,UAACC,KAAD,EAAW;YACxChC,OAAOc,YAAYkB,MAAM5B,QAAlB,CAAX;YACIxB,cAAJ;YACIoD,MAAMpD,KAAN,IAAeoD,MAAMpD,KAAN,CAAY,YAAYkB,UAAxB,CAAnB,EAAwD;oBAC5CkC,MAAMpD,KAAN,CAAY,YAAYkB,UAAxB,CAAR;;YAEAsB,WAAQjB,QAAR,CAAiBC,QAAjB,KAA8BJ,IAA9B,IAAsCoB,WAAQjB,QAAR,CAAiBvB,KAAjB,KAA2BA,KAArE,EAA4E;mBACjEqD,MAAP,CAAcb,WAAQjB,QAAtB,EAAgC6B,KAAhC;uBACQ7B,QAAR,CAAiBC,QAAjB,GAA4BJ,IAA5B;uBACQG,QAAR,CAAiBvB,KAAjB,GAAyBA,KAAzB;kBACA,CAAOuC,SAAP,EAAkB,UAACU,QAAD;uBAAcA,SAASK,IAAT,QAAmBd,WAAQjB,QAA3B,CAAd;aAAlB;;KAVS,CAAjB;;;;WAgBOiB,UAAP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjGJ,IAAIvB,cAAcsC,2BAAlB;;IAEMC;;;0BAEUC,KAAZ,EAAmB;;;+HACTA,KADS;;cAEVC,aAAL,GAAqB1C,oBAAoBC,WAApB,EAAiCwC,MAAME,MAAvC,CAArB;;;;;;6CAGiB;;;+CAIE;iBACdD,aAAL,CAAmBE,OAAnB;;;;iCAGK;mBACGC;kCAAA;kBAAQ,SAAS,KAAKH,aAAtB;qBAA2CD,KAAL,CAAWK;aAAzD;;;;EAhBmBD,eAAME;;ICJ3BC;;;2BAEUP,KAAZ,EAAmB;;4HACTA,KADS;;;;;iCAIV;;gBAEDQ,QAAQ,SAARA,KAAQ;uBACRJ;oCAAA;sBAAO,WAAW,CAAlB;;6CACI;0BAAY,MAAK,UAAjB,EAA4B,WAAU,IAAtC;;qBADJ;;6CAII;0BAAY,WAAU,GAAtB;;8BACmBK,KAAN,CAAYC,MAAZ,CAAmBhE;;iBAN5B;aAAZ;gBAUIiE,QAAQ,SAARA,KAAQ;uBACRP;oCAAA;sBAAO,WAAW,CAAlB;;6CACI;0BAAY,MAAK,UAAjB,EAA4B,WAAU,IAAtC;;;iBAFI;aAAZ;gBAQIQ,QAAQ,SAARA,KAAQ;uBACRR;oCAAA;sBAAO,WAAW,CAAlB;;6CACI;0BAAY,MAAK,UAAjB,EAA4B,WAAU,IAAtC;;;iBAFI;aAAZ;;mBAQQA;4BAAA;kBAAQ,QAAQ,KAAKJ,KAAL,CAAWa,EAA3B;;;;;2CAEA;0BAAM,IAAI,eAAV;;qBADJ;;2CAEI;0BAAM,IAAI,eAAV;;qBAFJ;;2CAGI;0BAAM,IAAI,QAAV;;qBAHJ;;2CAII;0BAAM,IAAI,QAAV;;qBAJJ;iDAMKC,oBAAD,IAAO,MAAM,eAAb,EAA8B,WAAWN,KAAzC,GANJ;iDAOKM,oBAAD,IAAO,MAAM,QAAb,EAAuB,WAAWH,KAAlC,GAPJ;iDAQKG,oBAAD,IAAO,MAAM,QAAb,EAAuB,WAAWF,KAAlC;;aATR;;;;EAlCoBR,eAAME;;ICU5BS;;;+BACUf,KAAZ,EAAmB;;;yIACTA,KADS;;YAEXA,MAAMgB,GAAN,IAAaC,QAAOjB,MAAMgB,GAAb,MAAqB,QAAtC,EAAgD;kBACvCzE,KAAL,GAAa;uBACFyD,MAAMgB;aADjB;;cAIEE,SAAN,CAAgBC,QAAhB,GAA2B,UAACrE,QAAD,EAAW;kBAC7BsE,QAAL,CAAc;uBACHtE;aADX;SADJ;;;;;;0CAOc;mBACP,EAACoE,WAAW,KAAKlB,KAAL,CAAWkB,SAAvB,EAAP;;;;iCAGK;yBACyD,KAAKlB,KAD9D;gBACAkB,SADA,UACAA,SADA;gBACWb,QADX,UACWA,QADX;gBACqBrE,OADrB,UACqBA,IADrB;gBAC2BqF,MAD3B,UAC2BA,MAD3B;gBACmCC,QADnC,UACmCA,KADnC;gBAC0CN,GAD1C,UAC0CA,GAD1C;gBAC+CO,MAD/C,UAC+CA,MAD/C;;;gBAGDjB,eAAYF,eAAMoB,QAAN,CAAeC,IAAf,CAAoBpB,QAApB,CAAhB;gBACIrE,OAAJ,EAAU;oBACFP,UAAU,EAACI,iBAAgBqF,UAAUQ,MAA3B,EAAmC3F,aAAYmF,UAAUnF,WAAzD,EAAd;oBACI,QAAOC,OAAP,yCAAOA,OAAP,OAAgB,QAApB,EAA8B;2BACnB4D,MAAP,CAAcnE,OAAd,EAAuBO,OAAvB;;+BAEQoE,eAAMuB,aAAN,CAAoBC,4BAApB,EAAqC,EAAC5F,MAAKR,QAAQC,OAAR,CAAN,EAArC,EAA8D6E,YAA9D,CAAZ;;gBAEAiB,MAAJ,EAAY;oBACJA,UAASM,yBAAb;oBACIpG,WAAU,EAAd;oBACI,QAAO8F,OAAP,yCAAOA,OAAP,OAAkB,QAAtB,EAAgC;wBACxBA,QAAO1E,IAAP,KAAgB,QAApB,EAA8B;kCACjBkD,YAAT;iCACQG,MAAR,GAAiBqB,QAAOrB,MAAxB;;;+BAGIE,eAAMuB,aAAN,CAAoBE,yBAApB,EAAgCpG,QAAhC,EAAyC6E,YAAzC,CAAZ;;gBAEAe,MAAJ,EAAY;oBACJ5F,YAAU,EAACM,aAAYmF,UAAUnF,WAAvB,EAAd;oBACI,QAAOsF,MAAP,yCAAOA,MAAP,OAAkB,QAAtB,EAAgC;2BACrBzB,MAAP,CAAcnE,SAAd,EAAuB4F,MAAvB;;+BAEQjB,eAAMuB,aAAN,CAAoBG,0BAApB,EAAoC,EAACC,QAAOA,gBAAOtG,SAAP,CAAR,EAApC,EAA8D6E,YAA9D,CAAZ;;gBAEAgB,QAAJ,EAAW;+BACKlB,eAAMuB,aAAN,CAAoBK,mBAApB,EAA8B,EAAC9F,OAAMA,KAAP,EAA9B,EAA6CoE,YAA7C,CAAZ;;gBAEAU,GAAJ,EAAS;oBACDiB,WAAWnF,KAAf;oBACI,KAAKP,KAAL,IAAc,KAAKA,KAAL,CAAWO,KAA7B,EAAoC;+BACrBL,OAAA,CAAQ,EAAR,EAAYK,KAAZ,EAAmB,KAAKP,KAAL,CAAWO,KAA9B,CAAX;;+BAEQsD,eAAMuB,aAAN,CAAoBO,2BAApB,EAAsC,EAACpF,OAAMmF,QAAP,EAAtC,EAAwD3B,YAAxD,CAAZ;;mBAEGA,YAAP;;;;EA1DwBF,eAAME;;AA8DtCS,kBAAkBoB,iBAAlB,GAAsC;eACvBC,UAAUC;CADzB;;ACzEA,SAASC,aAAT,GAAyB;WACd,UAACC,gBAAD,EAAsB;YACrBjC;;;;;;;;;;yCACS;2BACGF,6BAAC,gBAAD,aAAkB,WAAW,KAAKoC,OAAL,CAAatB,SAA1C,IAAyD,KAAKlB,KAA9D,EAAR;;;;UAFsBI,eAAME,SAAhC,CAAJ;;qBAMUmC,YAAV,GAAyB;uBACVL,UAAUC;SADzB;;eAIO/B,YAAP;KAXJ;;;ICFEoC;;;4BACU1C,KAAZ,EAAmB;;;mIACTA,KADS;;cAEVzD,KAAL,GAAa;2BACM;SADnB;;;;;;;;;4CAMgB;;;gBACZ,KAAKyD,KAAL,CAAW2C,UAAX,IAAyB,CAAC,KAAKC,IAAnC,EAAyC;qBAChC5C,KAAL,CAAW2C,UAAX,CAAsBE,IAAtB,CAA2B,UAACC,aAAD,EAAmB;2BACrCF,IAAL,GAAY,IAAZ;2BACKxB,QAAL,CAAc,EAAC0B,eAAeA,aAAhB,EAAd;iBAFJ;;;;;6CAOa;iBACZC,iBAAL;;;;iCAGK;mBACE,KAAKH,IAAL,GAAaxC;;;qBAAW7D,KAAL,CAAWuG;aAA9B,GAAuD1C,yCAA9D;;;;EAvBqBA,eAAME;;;;ACFnC,IASM0C;;;mCAEUhD,KAAZ,EAAmB;;;iJACTA,KADS;;cAEViD,cAAL,GAAsB,EAAtB;;;;;;gDAGgC;gBAAjBC,IAAiB,QAAjBA,IAAiB;gBAAXC,QAAW,QAAXA,QAAW;;gBAC5BR,aAAa,EAAjB;;gBAEIS,MAAMF,KAAKE,GAAf;gBACIC,WAAWC,IAAf;gBACIF,OAAOA,IAAIG,YAAf,EAA6B;6BACZ9G,KAAA,CAAMA,SAAA,CAAU2G,IAAIG,YAAJ,CAAiBC,KAA3B,EAAkC,gBAAlC,CAAN,EAA0D,UAACtE,CAAD;2BAAMmE,SAAS,MAAMnE,EAAEuE,eAAF,CAAkBC,MAAxB,GAAiC,GAA1C,CAAN;iBAA1D,CAAb;;;gBAGAC,UAAU,EAAd;kBACA,CAAOhB,UAAP,EAAmB,aAAK;0BACVgB,QAAQC,MAAR,CAAeC,EAAEC,UAAF,EAAf,CAAV;aADJ;gBAGIC,gBAAJ;gBACIJ,QAAQ/E,MAAR,GAAiB,CAArB,EAAwB;0BACVoF,QAAQC,GAAR,CAAYxH,KAAA,CAAMkH,OAAN,EAAe,UAACO,GAAD;2BAASC,SAASC,MAAT,CAAgBF,GAAhB,CAAT;iBAAf,CAAZ,EAA2DrB,IAA3D,CAAgE,aAAK;wBACvEC,gBAAgBrG,KAAA,CAAMkG,UAAN,EAAkB,UAACkB,CAAD,EAAO;4BACrCnF,IAAImF,EAAEC,UAAF,GAAelF,MAAvB;4BACIyF,IAAIR,EAAElC,aAAF,WAAgBvB,cAAhB,EAAuBkE,QAAvB,2BAAoCC,CAApC,GAAR;0BACEC,MAAF,CAAS9F,CAAT;+BACO2F,CAAP;qBAJgB,CAApB;2BAMOvB,aAAP;iBAPM,CAAV;;;gCAYGK,QADP;4BAEgBY;;;;;0CAIF/D,OAAO;mBACd;2BACS;2BACD,gEAAgEA,MAAMa,EAAtE,GAA2E;;aAF1F;;;;iCAOK;gBACD4D,kBAAkB,KAAKzE,KAAL,CAAWyE,eAAjC;;gBAEIC,aAAajI,MAAA,CAAO,KAAKwG,cAAZ,EAA4B,UAAC0B,CAAD;uBAAOA,EAAEF,eAAF,KAAsBA,eAA7B;aAA5B,CAAjB;gBACInE,qBAAJ;gBACIoE,UAAJ,EAAgB;+BACAA,WAAWE,aAAvB;aADJ,MAEO;oBACCC,QAAQC,GAAR,iBAAJ;;+BA2BYC,oBAAQF,KAAR,EAAe;2BAChB,KAAKG,iBADW;6BAEd,KAAKC;iBAFN,EAGTR,mBAAmB/B,cAHV,CAAZ;;qBAKKO,cAAL,CAAoB3E,IAApB,CAAyB,EAACmG,iBAAiBA,eAAlB,EAAmCG,eAAetE,YAAlD,EAAzB;;;mBAGIF,6BAACE,YAAD,EAAe,KAAKN,KAApB,CAAR;;;;EA1F4BI,eAAME;;AA8F1C0C,sBAAsBkC,SAAtB,GAAkC;;;;QAI1B9C,UAAU+C,MAAV,CAAiBC,UAJS;;;;;qBASbhD,UAAUiD;CAT/B;;AClGMC;;;8BAEUtF,KAAZ,EAAkBwC,OAAlB,EAA2B;;;uIACjBxC,KADiB,EACXwC,OADW;;cAElBjG,KAAL,GAAa;sBACC;SADd;;;;;;oCAKQoD,OAAO;iBACVyB,QAAL,CAAc,EAACmE,UAAU5F,MAAM6F,MAAjB,EAAd;;;;oCAGQC,MAAM;iBACTrE,QAAL,CAAc,EAACmE,UAAU,IAAX,EAAd;gBACIE,IAAJ,EAAU;qBACDjD,OAAL,CAAaxG,IAAb,CAAkB0J,cAAlB,CAAiCD,IAAjC;;;;;iCAIC;;;gBACDE,mBAAmB,CAAC,IAAD,EAAO,IAAP,CAAvB;;mBAEQvF;;;;qCACJ;sBAAQ,SAAS,KAAKwF,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB;;yBACV7F,KAAL,CAAW8F,CAAX,CAAa,iBAAb;iBAFE;;mCAGJ;sBAAM,MAAMC,QAAQ,KAAKxJ,KAAL,CAAWgJ,QAAnB,CAAZ,EAA0C,SAAS,KAAKS,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,CAAnD;kCACgB,KAAKtJ,KAAL,CAAWgJ,QAD3B;qCAEsBU,GAAjB,CAAqB,UAACC,MAAD;+BAClB9F;+CAAA;8BAAU,SAAS,OAAK4F,WAAL,CAAiBH,IAAjB,SAA4BK,MAA5B,CAAnB,EAAwD,KAAKA,MAA7D;uCACiBA,MADjB;;yBADkB;qBAArB;;aALT;;;;EAvBuB9F,eAAME;;AAoCrCgF,yBAAiB7C,YAAjB,GAAgC;UACtBL,UAAUC;CADpB;;AAIAiD,2BAAmBa,uBAAU,oBAAV,EAAgCb,wBAAhC,CAAnB;;ACzCA,IAAMc,SAAS,SAATA,MAAS;WAAU;cACf;6BACetJ,MAAMuJ,OAAN,CAAcC,UAAd,CAAyBC;SAFzB;cAIf;uBACS,mBADT;uBAES,EAFT;qBAGO;SAPQ;gBASb;sBACM,MADN;wBAEQzJ,MAAM0J,UAAN,CAAiBC,UAFzB;wBAGQ,GAHR;qBAIK,KAJL;uBAKO,QALP;mBAMG3J,MAAMuJ,OAAN,CAAcK,IAAd,CAAmBC;SAfT;gBAiBb;wBACQ;;KAlBL;CAAf;;AAuBMC;;;4BACU5G,KAAZ,EAAmB;;8HACTA,KADS;;;;;iCAIV;yBACoD,KAAKA,KADzD;gBACC6G,OADD,UACCA,OADD;gBACUC,MADV,UACUA,MADV;gBACkBzG,QADlB,UACkBA,QADlB;gBAC4B0G,MAD5B,UAC4BA,MAD5B;gBACoCC,WADpC,UACoCA,WADpC;;mBAGD5G;;kBAAS,WAAWyG,QAAQI,IAA5B;;qCACI;sBAAQ,UAAS,OAAjB,EAAyB,SAAS,EAACA,MAAKJ,QAAQC,MAAd,EAAlC,EAAyD,OAAOE,WAAhE;;iBADJ;;;sBAIa,WAAWH,QAAQK,IAA5B;;iBAJJ;;;sBAOY,WAAWL,QAAQE,MAA3B;;;aARR;;;;EAPqB3G,eAAME;;AAwBnCsG,uBAAe1B,SAAf,GAA2B;YACf9C,UAAUiD,OADK;YAEfjD,UAAU+C;CAFtB;;AAKAyB,yBAAiBO,sBAAWf,MAAX,EAAmBQ,sBAAnB,CAAjB;;ACnDA,IAAMR,WAAS,SAATA,MAAS;WAAU;cACf;sBACQ,UADR;oBAEM,QAFN;kBAGI,GAHJ;mBAIK,GAJL;mBAKM,SALN;6BAMgBtJ,MAAMuJ,OAAN,CAAce,OAAd,CAAsBC,KANtC;mBAOK,OAPL;oBAQM,MARN;wBASU,MATV;0BAUY,KAVZ;wBAWU;SAZK;mBAcV;sBACG,UADH;oBAEC,QAFD;kBAGD,GAHC;mBAIA,GAJA;mBAKAvK,MAAMuJ,OAAN,CAAcK,IAAd,CAAmBC,SALnB;6BAMW,MANX;mBAOA,OAPA;oBAQC,MARD;wBASK,MATL;0BAUO,KAVP;wBAWK,KAXL;uBAYI;;;;SA1BM;eA+Bd;gCACiB,OADjB;gCAEiB,OAFjB;sCAGuB,8BAHvB;6BAIc;;SAnCA;oBAsCT;yBACK,MADL;4BAEQ,MAFR;2BAGO,MAHP;uBAIG;;KA1CJ;CAAf;;AA8CMW;;;uBAEUtH,KAAZ,EAAmB;;;yHACTA,KADS;;cAEVuH,YAAL,GAAoB,MAAKA,YAAL,CAAkB1B,IAAlB,OAApB;cACK2B,OAAL,GAAe,MAAKA,OAAL,CAAa3B,IAAb,OAAf;cACK4B,MAAL,GAAc,MAAKA,MAAL,CAAY5B,IAAZ,OAAd;cACKtJ,KAAL,GAAa;wBACGyD,MAAM6G,OAAN,CAAcI;SAD9B;;;;;;qCAKStH,OAAO;;kBAEV+H,OAAN;gBACI,KAAKC,OAAT,EAAkB;6BACD,KAAKA,OAAlB;;iBAECA,OAAL,GAAeC,WAAW,YAAW;qBAC5B5H,KAAL,CAAW6H,cAAX,CAA0BlI,MAAM6F,MAAN,CAAa9I,KAAvC;aADsB,CAExBmJ,IAFwB,CAEnB,IAFmB,CAAX,EAED,IAFC,CAAf;;;;kCAKM;iBACDzE,QAAL,CAAc;4BACE,KAAKpB,KAAL,CAAW6G,OAAX,CAAmBiB;aADnC;iBAGK9H,KAAL,CAAWwH,OAAX;;;;iCAGK;iBACApG,QAAL,CAAc;4BACE,KAAKpB,KAAL,CAAW6G,OAAX,CAAmBI;aADnC;iBAGKjH,KAAL,CAAWyH,MAAX;;;;iCAGK;yBAEmC,KAAKzH,KAFxC;gBAEG6G,OAFH,UAEGA,OAFH;gBAEWf,CAFX,UAEWA,CAFX;gBAEciC,gBAFd,UAEcA,gBAFd;;;mBAKD3H,6BAAC4H,gBAAD,IAAO,SAAS,EAACf,MAAM,KAAK1K,KAAL,CAAW0L,UAAlB,EAA8BC,OAAOrB,QAAQqB,KAA7C,EAAhB;0BACiB,KAAKX,YADtB;wBAEe,KAAKE,MAFpB;yBAGgB,KAAKD,OAHrB;kCAIyB,IAJzB;sBAKY,MALZ;6BAMoBO,oBAAoBjC,EAAE,yBAAF,CANxC;gCAOuB1F;6CAAA;sBAAgB,SAAS,EAAC6G,MAAMJ,QAAQsB,UAAf,EAAzB,EAAqD,UAAS,OAA9D;iDAAuEC,sBAAD;;cARjG;;;;EAzCgBhI,eAAME;;AAuD9BgH,oBAAYH,sBAAWf,QAAX,EAAmBD,uBAAU,oBAAV,EAAgCmB,iBAAhC,CAAnB,CAAZ;;;;AC1GA,AAMA,SAASe,iBAAT,CAA2BC,SAA3B,EAAsC;WAC3B,UAACC,aAAD,EAAmB;;YAElBvD,oBAAoB,SAApBA,iBAAoB,OAAsB;gBAApB9B,IAAoB,QAApBA,IAAoB;gBAAdC,QAAc,QAAdA,QAAc;;gBACtCK,QAAQ,EAAZ;;gBAEIJ,MAAMF,KAAKE,GAAf;;gBAEIA,GAAJ,EAAS;oBACDA,IAAIoF,IAAR,EAAc;4BACFpF,IAAIoF,IAAJ,CAASnI,QAAT,CAAkBmD,KAA1B;;;;gCAKDL,QADP;uBAEWK;;SAbf;;YAiBIyB,oBAAoB,SAApBA,iBAAoB,CAACjF,KAAD,EAAW;gBAC3ByI,OAAO;sBACDzI,MAAMrC,IADL;uBAEAqC,MAAM0I;aAFjB;gBAII1I,MAAM2I,cAAV,EAA0B;wBACtB,CAASF,IAAT,EAAezI,MAAM2I,cAArB;;;mBAGG;2BACQF,IADR;sBAEG,CAACzI,MAAMrC;aAFjB;SATJ;;YAeIkH,QAAQC,GAAR,mBAAJ;;4CAmB2BD,KAA3B,EAAkCyD,SAAlC;;eAEOvD,oBAAQF,KAAR,EAAe;mBACXG,iBADW;qBAETC;SAFN,EAGJsD,aAHI,CAAP;KAvDJ;;;;;;;;ACPJ,IAOMK;;;iCAEU5I,KAAZ,EAAmB;;;6IACTA,KADS;;YAGX6I,kBAAkB,SAAlBA,eAAkB,CAAC7I,KAAD;mBAAYI;gCAAA;;;wCAC1B;;;2CACI;;;gDACI;;;yBADJ;;gDAEI;;;yBAFJ;;gDAGI;;;yBAHJ;;gDAII;;;;;iBANkB;;wCAS1B;;0BACWoD,KAAN,GAAcxD,MAAMwD,KAAN,CAAYyC,GAAZ,CAAgB;+BAC3B7F;+CAAA;8BAAU,KAAKoI,KAAKM,IAApB;;oDACI;;qCAAiBC;6BADrB;;oDAEI;;qCAAiBC,MAAL,CAAYtM;6BAF5B;;oDAGI;;;qDAAW;sCAAQ,SAAS;mDAAM,MAAKsD,KAAL,CAAWiJ,mBAAX,CAA+B;2DAClD;0DACDT,KAAK7K,IADJ;2DAEC,UAAU,IAAIuL,IAAJ;iDAHuC;gEAK7C,CAAC,YAAD;;6CALc,CAAN;yCAAjB;;;6BAHf;;oDAWI;;;qDAAW;sCAAQ,SAAS;mDAAM,MAAKlJ,KAAL,CAAWmJ,kBAAX,CAA8B;2DACjD;0DACDX,KAAK7K;iDAF6C;gEAI5C,CAAC,YAAD;6CAJc,CAAN;yCAAjB;;;;yBAZY;qBAAhB,CAAd,GAmBG;;aA7BM;SAAtB;;cAkCK2C,SAAL,GAAiB+H,kBAAkB,CAAC;sBACtB,MADsB;iBAE3BvD,GAAL;SAF+B,CAAlB,EAOb+D,eAPa,CAAjB;;;;;;iCAWK;;;gBACDvI,eAAY,KAAKA,SAArB;mBAEIF;;;;qCACI;sBAAQ,SAAS;mCAAM,OAAKJ,KAAL,CAAWoJ,eAAX,CAA2B;2CACnC;0CACA,UAAW,IAAIF,IAAJ,GAAWG,OAAX,EADX;2CAEC,UAAU,IAAIH,IAAJ;iCAHwB;gDAK9B,CAAC,YAAD;6BALG,CAAN;yBAAjB;;iBADJ;6CASK5I,YAAD,IAAW,MAAM,GAAjB,EAAsB,OAAO,CAAC,iBAAD,CAA7B;aAVR;;;;EApD0BA;;AAoElC,IAAMgJ,cAAcxE,GAAd,kBAAN;;AAeA,IAAMyE,UAAUzE,GAAV,kBAAN;;AAYA,IAAM0E,aAAa1E,GAAb,kBAAN;;AAQA,IAAI2E,kBAAkB1E,oBAAQuE,WAAR,EAAqB,EAACP,MAAM,qBAAP,EAArB,EAClBhE,oBAAQwE,OAAR,EAAiB,EAACR,MAAM,iBAAP,EAAjB,EACIhE,oBAAQyE,UAAR,EAAoB,EAACT,MAAM,oBAAP,EAApB,EAAkDH,mBAAlD,CADJ,CADkB,CAAtB;;AC1GA,IAAIc,yBAAyB,SAAzBA,sBAAyB,CAAU1J,KAAV,EAAiB;;;QAEtC2J,UAAU3J,MAAM,SAAN,IAAmBA,MAAM,SAAN,CAAnB,GAAsC;eAChDI;+BAAA;;;oCACI;;;;SAF4C;KAApD;;QAKIwJ,MAAM5J,MAAM,KAAN,IAAeA,MAAM,KAAN,CAAf,GAA8B,UAACwI,IAAD;eAAWpI;+BAAA;cAAU,KAAKoI,KAAK7K,IAApB;;oCAC3C;;sBAAkB,cAAN,IAAwBqC,MAAM,cAAN,EAAsBH,IAAtB,QAAiC2I,IAAjC,CAAxB,GAAiEA,KAAKO;;SADlD;KAAxC;;WAIQ3I;wBAAA;;;gCACI;;;SADJ;;gCAII;;kBACWoD,KAAN,GAAcxD,MAAMwD,KAAN,CAAYyC,GAAZ,CAAgB2D,GAAhB,CAAd,GAAqC;;KALtD;CAXJ;;AAqBAF,uBAAuBxE,SAAvB,GAAmC;aACtB9C,UAAUyH,IADY;SAE1BzH,UAAUyH,IAFgB;kBAGjBzH,UAAUyH,IAHO;WAIxBzH,UAAU0H,OAAV,CAAkB1H,UAAUC,MAA5B;CAJX;;ACrBA,SAAS0H,qBAAT,CAA+BC,YAA/B,EAA6C;WAClC,UAACzH,gBAAD,EAAsB;eAClB0H,mBACH,UAAC1N,KAAD,EAAQ4G,QAAR;gCACOA,QADP;sBAEW5G,MAAM,mBAAmByN,YAAzB,KAA0CzN,MAAM,mBAAmByN,YAAzB,EAAuCpL,MAAvC,KAAkD,CAA7F,GAAkGrC,MAAM,mBAAmByN,YAAzB,EAAuC,CAAvC,CAAlG,GAA8I;;SAHrJ,EAKH;mBAAO,EAAP;SALG,EAKSzH,gBALT,CAAP;KADJ;;;ACAA2H,6BAAqB,4BAAUlK,KAAV,EAAiB;;;WAC9BI;uBAAA;;cACG+J,aAAN,CAAoBlE,GAApB,CAAwB,UAACmE,KAAD;mBACpBhK;mCAAA;kBAAU,YAAV;6BACmB;+BAAMgK,MAAMC,UAAN,GAAmBrK,MAAMsK,YAAN,CAAmBF,MAAMzM,IAAzB,EAA+B,CAACyM,MAAMG,QAAtC,CAAnB,GAAqEvK,MAAMwK,UAAN,CAAiBJ,MAAMzM,IAAvB,EAA6B,CAACyM,MAAMK,IAApC,CAA3E;qBADnB;yBAEeL,MAAMzM;;;2CAEd;sBAAc,OAAOyM,MAAMC,UAAN,GAAmB,EAAnB,GAAwB,EAACK,SAAS,CAAV,EAA7C;0BAAkEH,QAAN,GAAiBnK,6BAACuK,kCAAD,OAAjB,GACxDvK,6BAACwK,oCAAD;iBALX;6CAMQC,uBAAD,IAAc,OAAO,EAACC,aAAaV,MAAMW,KAAN,GAAc/K,MAAMlD,KAAN,CAAYkO,OAAZ,CAAoBC,IAAhD,EAArB,EAA4E,WAA5E;6BACuBjL,MAAM,cAAN,IAAwBA,MAAM,cAAN,EAAsBH,IAAtB,QAAiCuK,KAAjC,CAAxB,GAAkEA,MAAMrB,IAD/F,GANP;;sDAQO;;0BACWmC,QAAN,IAAkBd,MAAMe,WAAxB,GACG/K;6CAAA;0BAAY,SAAS;uCAAMJ,MAAMwK,UAAN,CAAiBJ,MAAMzM,IAAvB,EAA6B,CAACyM,MAAMK,IAApC,CAAN;6BAArB;8BAA6EA,IAAN,GACnErK,6BAACgL,0BAAD,OADmE,GACnDhL,6BAACiL,0BAAD;qBAFvB,GAEsD;;aAZ9C;SAAxB;KADL;CADJ;;AAsBAnB,2BAAmBhF,SAAnB,GAA+B;mBACZ9C,UAAUkJ,KAAV,CAAgBlG,UADJ;kBAEbhD,UAAUyH,IAFG;gBAGfzH,UAAUyH,IAHK;kBAIbzH,UAAUyH;CAJ5B;;AAOAK,6BAAqBqB,uBAAYrB,0BAAZ,CAArB;;AC7BIsB,qCAA6B,oCAAUxL,KAAV,EAAiB;;;WACtCI;uBAAA;;cACG+J,aAAN,CAAoBlE,GAApB,CAAwB,UAACmE,KAAD;mBACpBhK;mCAAA;kBAAU,YAAV;6BACmB;+BAAMgK,MAAMC,UAAN,GAAmBrK,MAAMsK,YAAN,CAAmBF,MAAMzM,IAAzB,EAA+B,CAACyM,MAAMG,QAAtC,EAAgD,IAAhD,CAAnB,GAA2EvK,MAAMwK,UAAN,CAAiBJ,MAAMzM,IAAvB,EAA6B,CAACyM,MAAMK,IAApC,CAAjF;qBADnB;yBAEeL,MAAMzM;;;2CAEd;sBAAc,OAAOyM,MAAMC,UAAN,GAAmB,EAAnB,GAAwB,EAACK,SAAS,CAAV,EAA7C;0BAAkEH,QAAN,GAAiBnK,6BAACqL,wBAAD,OAAjB,GACxDrL,6BAACsL,oCAAD;iBALX;6CAMQb,uBAAD,IAAc,OAAO,EAACC,aAAaV,MAAMW,KAAN,GAAc/K,MAAMlD,KAAN,CAAYkO,OAAZ,CAAoBC,IAAhD,EAArB,EAA4E,WAA5E;6BACuBjL,MAAM,cAAN,IAAwBA,MAAM,cAAN,EAAsBH,IAAtB,QAAiCuK,KAAjC,CAAxB,GAAkEA,MAAMrB,IAD/F,GANP;;sDAQO;;0BACWmC,QAAN,IAAkBd,MAAMe,WAAxB,GACG/K;6CAAA;0BAAY,SAAS;uCAAMJ,MAAMwK,UAAN,CAAiBJ,MAAMzM,IAAvB,EAA6B,CAACyM,MAAMK,IAApC,CAAN;6BAArB;8BAA6EA,IAAN,GACnErK,6BAACgL,0BAAD,OADmE,GACnDhL,6BAACiL,0BAAD;qBAFvB,GAEsD;;aAZ9C;SAAxB;KADL;CADJ;;AAsBAG,mCAA2BtG,SAA3B,GAAuC;mBACpB9C,UAAUkJ,KAAV,CAAgBlG,UADI;kBAEpBhD,UAAUyH,IAFU;gBAGvBzH,UAAUyH,IAHa;kBAIrBzH,UAAUyH;CAJ5B;;AAOA2B,qCAA6BD,uBAAYC,kCAAZ,CAA7B;;;;AClCA,IAOMG;;;oBAEU3L,KAAZ,EAAmB;;;mHACTA,KADS;;YAGX6E,QAAQC,GAAR,mBAAJ;;YAsCMwD,SAzCS,GAyC+BtI,KAzC/B,CAyCTsI,SAzCS;YAyCKsD,qBAzCL,2BAyC+B5L,KAzC/B;;;4CA2CY6E,KAA3B,EAAkCyD,SAAlC;;cAEKsD,qBAAL,GAA6BA,qBAA7B;;YAEIrP,QAAQ,EAAZ;YACIsP,YAAJ;YACI,CAAC7L,MAAM8L,SAAX,EAAsB;kBACZA,SAAN,GAAkB9L,MAAM+L,gBAAN,GAAyBtP,OAAA,CAAQuD,MAAM+L,gBAAd,CAAzB,GAA2D,EAA7E;kCACsBvB,UAAtB,GAAmC,UAAC7M,IAAD,EAAM8M,IAAN,EAAe;qBACzCrJ,QAAL,CAAe,UAAC4K,SAAD,EAAYhM,KAAZ;2BAAuB;mCACvByK,mCACJuB,UAAUF,SADN,IAEPnO,IAFO,KAGPlB,QAAA,CAASuP,UAAUF,SAAnB,EAA8B,UAACG,QAAD;mCAAcA,aAAatO,IAA3B;yBAA9B;qBAJO;iBAAf;oBAMIqC,MAAMwK,UAAV,EAAsB;0BACZA,UAAN,CAAiB7M,IAAjB,EAAsB8M,IAAtB;;aARR;;;YAaA,CAACzK,MAAMkM,aAAX,EAA0B;kBAChBA,aAAN,GAAsBlM,MAAMmM,oBAAN,GAA6B1P,OAAA,CAAQuD,MAAMmM,oBAAd,CAA7B,GAAoE,EAA1F;kCACsB7B,YAAtB,GAAqC,UAAC3M,IAAD,EAAM4M,QAAN,EAAe6B,QAAf,EAA4B;qBACxDhL,QAAL,CAAc,UAAC4K,SAAD,EAAYhM,KAAZ;2BAAsB;uCACjBuK,uCACP6B,WAAWJ,UAAUE,aAArB,GAAqC,EAD9B,IAEPvO,IAFO,KAGPlB,QAAA,CAASuP,UAAUE,aAAnB,EAAkC,UAACD,QAAD;mCAAcA,aAAatO,IAA3B;yBAAlC;qBAJE;iBAAd;oBAMIqC,MAAMsK,YAAV,EAAwB;0BACdA,YAAN,CAAmB3M,IAAnB,EAAwB0O,MAAxB,EAA+BD,QAA/B;;aARR;;cAYC7P,KAAL,GAAaA,KAAb;;cAEK+P,gBAAL,GAAwBvH,oBAAQF,KAAR,EAAe;mBAC5B,MAAKG,iBADuB;qBAE1B,MAAKC;SAFM,EAGrB,MAAKjF,KAAL,CAAWuM,MAHU,CAAxB;;;;;;2CAMeC,WAAWR,WAAWS,aAAa;gBAC9C,KAAKzM,KAAL,CAAW0M,iBAAX,IAAgC,CAACjQ,SAAA,CAAU,KAAKF,KAAL,CAAW2P,aAArB,EAAmCF,UAAUE,aAA7C,CAArC,EAAkG;qBACzFlM,KAAL,CAAW0M,iBAAX,CAA6B,KAAKnQ,KAAL,CAAW2P,aAAxC;;;;;kDAIkBS,WAAWC,WAAW;gBACtCtE,SADsC,GAC4BqE,SAD5B,CACtCrE,SADsC;gBAC3BkC,UAD2B,GAC4BmC,SAD5B,CAC3BnC,UAD2B;gBACfF,YADe,GAC4BqC,SAD5B,CACfrC,YADe;gBACEsB,qBADF,2BAC4Be,SAD5B;;oBAE5C,CAAS,KAAKf,qBAAd,EAAqCA,qBAArC;;;;gDAGgC;gBAAjB1I,IAAiB,QAAjBA,IAAiB;gBAAXC,QAAW,QAAXA,QAAW;;gBAC5B+I,gBAAgB/I,SAAS+I,aAA7B;gBACIJ,YAAY3I,SAAS2I,SAAT,GAAqB3I,SAAS2I,SAA9B,GAA0C,EAA1D;;gBAEI3B,gBAAgB,EAApB;gBACI0C,YAAY,EAAhB;gBACIzJ,MAAMF,KAAKE,GAAf;;gBAEImG,UAAU,SAAVA,OAAU,CAAUf,IAAV,EAAgBuC,KAAhB,EAAuB+B,QAAvB,EAA8B;oBACpCvC,WAAW,KAAf;oBACI/B,KAAK6B,UAAT,EAAqB;+BACN5N,SAAA,CAAUyP,aAAV,EAAyB1D,KAAK7K,IAA9B,MAAwC,CAAC,CAApD;;oBAEAoP,aAAa;0BACPvE,KAAKO,IADE;0BAEPP,KAAK7K,IAFE;0BAGP6K,KAAK0C,QAAL,IAAiBzO,SAAA,CAAUqP,SAAV,EAAqBtD,KAAK7K,IAA1B,MAAoC,CAAC,CAH/C;8BAIH4M,QAJG;8BAKH/B,KAAK0C,QALF;gCAMD1C,KAAK6B,UANJ;2BAONU,KAPM;4BAQLtO,QAAA,CAAS,QAAT,EAAmBsO,QAAQ,CAA3B,CARK;0BASPvC,IATO;4BAUL,KAVK;iCAWAA,KAAKnI,QAAL,CAAc2M,QAAd,CAAuBC,UAAvB,GAAoC;iBAXrD;8BAaczI,MAAd,CAAqBsI,QAArB,EAA4B,CAA5B,EAA+BC,UAA/B;0BACUvE,KAAKM,IAAf,IAAuBiE,UAAvB;uBACOA,UAAP;aApBJ;;gBAuBI3J,GAAJ,EAAS;oBACDA,IAAI8J,SAAR,EAAmB;6BACf,CAAU9J,IAAI8J,SAAd,EAAyB,oBAAY;4BAC7BjG,OAAOsC,QAAQ4D,QAAR,EAAkB,CAAlB,EAAqB,CAArB,CAAX;6BACKC,MAAL,GAAcjK,SAASkK,QAAvB;qBAFJ;;oBAKAjK,IAAIkK,SAAR,EAAmB;4BACf,CAASlK,IAAIkK,SAAb,EAAwB,CAAC,MAAD,CAAxB,EAAkCC,OAAlC,CAA0C,UAAC/E,IAAD,EAAU;4BAC5CgF,SAASX,UAAUrE,KAAKM,IAAf,CAAb;4BACI0E,MAAJ,EAAY;gCACJC,cAAchR,SAAA,CAAU0N,aAAV,EAAyBqD,MAAzB,CAAlB;0CACA,CAAehF,KAAKnI,QAAL,CAAcmD,KAA7B,EAAoC,UAACkK,KAAD,EAAW;wCACnCA,KAAR,EAAeF,OAAOzC,KAAP,GAAe,CAA9B,EAAiC0C,cAAc,CAA/C;6BADJ;;qBAJR;;;;;gBAaJE,gBAAgBlR,QAAA,CAAS0N,aAAT,EAAwB,UAAC3B,IAAD,EAAU;uBAC3CA,KAAK+B,QAAZ;aADgB,EAEjBtE,GAFiB,CAEb,UAACuC,IAAD,EAAU;uBACNA,KAAKA,IAAZ;aAHgB,CAApB;;4BAMgB/L,KAAA,CAAMkR,aAAN,EAAqB,MAArB,CAAhB;4BACgBlR,QAAA,CAAS0N,aAAT,EAAwB,sBAAc;uBAC3C,CAAC4C,WAAWK,MAAnB;aADY,CAAhB;;gCAKOjK,QADP;+BAEmBgH;;;;;0CAILnK,OAAO;gBACjB8L,YAAY9L,MAAM8L,SAAN,GAAkB9L,MAAM8L,SAAxB,GAAoC,EAApD;;gBAEI8B,gBAAgB,SAAhBA,aAAgB,CAAC5N,KAAD,EAAQrC,IAAR,EAAiB;oBAC7BkQ,YAAY,KAAhB;sBACA,CAAOpR,OAAA,CAAQkB,IAAR,EAAc,GAAd,CAAP,EAA2BmQ,MAA3B,CAAkC,UAACC,GAAD,EAAMC,EAAN,EAAa;wBACvC,CAACH,SAAL,EAAgB;iCACZ,CAAU7N,MAAMiO,SAAhB,EAA2B,oBAAY;wCACvBJ,aAAapR,YAAA,CAAasR,GAAb,EAAkBG,QAAlB,CAAzB;yBADJ;;wBAIAL,aAAapR,SAAA,CAAUqP,SAAV,EAAqBiC,GAArB,MAA8B,CAAC,CAAhD,EAAmD;kCACrCzP,IAAV,CAAeyP,GAAf;;2BAEGA,MAAM,GAAN,GAAYC,EAAnB;iBATJ,EAUG,EAVH;aAFJ;;gBAeIhO,MAAMkM,aAAV,EAAyB;sBACrB,CAAOlM,MAAMkM,aAAb,EAA4B;2BAAQ0B,cAAc5N,KAAd,EAAqBrC,IAArB,CAAR;iBAA5B;;;gBAGA8K,OAAO;2BACIzI,MAAMiO,SADV;uBAEAxR,OAAA,CAAQuD,MAAMmO,aAAd,EAA6BnO,MAAMoO,eAAnC,CAFA;4BAGKpO,MAAMoO,eAHX;0BAIGpO,MAAMmO,aAJT;2BAKIrC;aALf;;gBAQI9L,MAAM2I,cAAV,EAA0B;wBACtB,CAASF,IAAT,EAAezI,MAAM2I,cAArB;;;mBAGG;2BACQF;aADf;;;;iCAKK;gBACD6D,mBAAmB,KAAKA,gBAA5B;;mBAEOlM,6BAAC,gBAAD,eAAsB,KAAKwL,qBAA3B,EAAsD,KAAKrP,KAA3D,EAAP;;;;EAlNa6D,eAAME;;AAsN3BqL,OAAOzG,SAAP,GAAmB;;;;eAIJ9C,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,EAAoCC,UAJhC;;;;;sBASGhD,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,CATH;;;;;mBAcA/C,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,EAAoCC,UAdpC;;;;;eAmBJhD,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,CAnBI;;;;;qBAwBE/C,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,EAAoCC,UAxBtC;;;;;0BA6BOhD,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,CA7BP;;;;;mBAkCA/C,UAAU0H,OAAV,CAAkB1H,UAAU+C,MAA5B,CAlCA;;;;;uBAuCI/C,UAAUyH,IAvCd;;;;;YA4CPzH,UAAUyH,IA5CH;;;;;eAiDJzH,UAAU0H,OAAV,CAAkB1H,UAAUiM,SAAV,CAAoB,CAC7CjM,UAAU+C,MADmC,EAE7C/C,UAAUkM,KAAV,CAAgB;kBACFlM,UAAU+C,MAAV,CAAiBC,UADf;mBAEDhD,UAAU+C,MAFT;aAGP/C,UAAUC,MAAV,CAAiB+C;KAH1B,CAF6C,CAApB,CAAlB,CAjDI;;;;;oBA6DChD,UAAUC;;CA7D9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}