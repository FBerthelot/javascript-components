{"version":3,"file":"react-dxcomponents.umd.js","sources":["../src/javascript/i18n/getI18n.js","../src/javascript/reduxStore.js","../src/javascript/theme/theme.js","../src/javascript/theme/ThemeTester.jsx","../src/javascript/router/createOutletHistory.js","../src/javascript/router/OutletRouter.jsx","../src/javascript/notification/NotificationProvider.jsx","../src/javascript/context/DxContextProvider.jsx","../src/javascript/context/withDxContext.jsx","../src/javascript/i18n/LanguageSwitcher.jsx","../src/javascript/layout/SettingsLayout.jsx","../src/javascript/layout/SearchBar.jsx","../src/javascript/helpers/withNodeFromPath.jsx","../src/javascript/helpers/withNodesFromPath.jsx","../src/javascript/helpers/withPathFromSelection.jsx","../src/javascript/notification/withNotifications.jsx","../src/javascript/picker/PickerViewMaterial.jsx","../src/javascript/picker/PickerViewMaterialMultiple.jsx","../src/javascript/picker/Picker.jsx"],"sourcesContent":["import i18n from 'i18next';\nimport XHR from 'i18next-xhr-backend';\n// import LanguageDetector from 'i18next-browser-languagedetector/';\nimport { reactI18nextModule } from 'react-i18next';\n\nfunction getI18n(options) {\n    options = options || {};\n    i18n\n        .use(XHR)\n        // .use(LanguageDetector)\n        // .use(reactI18nextModule) // if not using I18nextProvider\n        .init({\n            lng: (options.currentLanguage ? options.currentLanguage : undefined),\n            fallbackLng: 'en',\n            debug: true,\n\n            interpolation: {\n                escapeValue: false, // not needed for react!!\n            },\n\n            // react i18next special options (optional)\n            react: {\n                wait: false,\n                bindI18n: 'languageChanged loaded',\n                bindStore: 'added removed',\n                nsMode: 'default'\n            },\n\n            backend: {\n                loadPath: (options.contextPath ? options.contextPath : '') + '/modules/{{ns}}/javascript/locales/{{lng}}.json',\n            }\n        });\n    return i18n;\n}\n\n\nexport { getI18n };","import {createStore} from 'redux'\nimport * as _ from \"lodash\";\n\nconst reducers = {};\n\nconst store = function () {\n    let debugTool;\n    if (typeof window !== 'undefined') {\n        debugTool = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n            name: \"DX Redux\",\n            instanceId: \"dx\"\n        });\n    }\n\n    return createStore((state = {}, action) => _.mapValues(reducers, (value, key) => value(state[key], action)), debugTool);\n}();\n\nconst resetStateReducer = function(state, action) {\n    if (action.type === 'RESET_STATE') {\n        return undefined;\n    }\n    return state;\n};\n\nexport {reducers, store, resetStateReducer};\n","import {createMuiTheme} from 'material-ui';\nimport {blueGrey, lightBlue, red, grey, purple, green, deepOrange} from 'material-ui/colors/index'\n\n// All the following keys are optional.\n// We try our best to provide a great default value.\nlet theme = createMuiTheme({\n    palette: {\n        background: {\n            global: grey[200],\n        },\n        contrastThreshold: 3.1,\n        tonalOffset: 0.2,\n        primary: {\n            main: blueGrey[600],\n        },\n        secondary: {\n            main: lightBlue[600],\n        },\n        error: {\n            main: red[400],\n        },\n        publish: {\n            main: deepOrange[500],\n        },\n        enabled: {\n            main: green[400],\n        },\n        delete: {\n            main: red[600],\n        }\n    },\n    overrides: {\n        MuiButton: {\n            root: {\n                color: \"inherit\",\n            }\n        },\n        MuiTableCell: {\n            body: {\n                color: \"inherit\",\n            }\n        },\n        MuiIconButton: {\n            root: {\n                color: \"inherit\",\n            }\n        },\n        MuiCheckbox: {\n            default: {\n                color: \"inherit\",\n            }\n        }\n    }\n});\n\nlet darkTheme = createMuiTheme({\n    palette: {\n        type: \"dark\",\n        background: {\n            global: grey[900]\n        },\n        contrastThreshold: 3.0,\n        tonalOffset: 0.2,\n        primary: {\n            main: purple[500]\n        },\n        secondary: {\n            main: green[400]\n        },\n        error: {\n            main: red[200]\n        },\n        publish: {\n            main: deepOrange[500],\n        },\n        enabled: {\n            main: green[400],\n        },\n        delete: {\n            main: red[600],\n        }\n    },\n    overrides: {\n        MuiButton: {\n            root: {\n                color: \"inherit\",\n            }\n        },\n        MuiTableCell: {\n            body: {\n                color: \"inherit\",\n            }\n        },\n        MuiIconButton: {\n            root: {\n                color: \"inherit\",\n            }\n        },\n        MuiCheckbox: {\n            default: {\n                color: \"inherit\",\n            }\n        }\n    }\n});\n\n\nexport {theme, darkTheme}\n","import React from 'react';\nimport {withDxContext} from \"../context\";\nimport {Switch} from 'material-ui'\nimport {theme, darkTheme} from \"./theme\";\n\nclass ThemeTester extends React.Component {\n    constructor(props) {\n        super(props);\n        this.switch = this.switch.bind(this);\n\n        this.themes = [theme, darkTheme];\n        this.state = {\n            checked:false\n        };\n    }\n\n    switch() {\n        this.setState((previous) => {\n            this.props.dxContext.setTheme(previous.checked ? theme : darkTheme);\n            return {\n                checked: !previous.checked\n            }\n        });\n    }\n\n\n    render() {\n        return <Switch color=\"default\" onChange={this.switch} checked={this.state.checked}/>\n    }\n\n}\n\n\nThemeTester = withDxContext()(ThemeTester);\n\nexport {ThemeTester}","import * as _ from \"lodash\";\n\nfunction createOutletHistory(baseHistory, outletName) {\n\n    const getPath = (path) => {\n        let parts = [];\n        let base = baseHistory.location.pathname;\n        let newPath = outletName + ':' + path;\n        if (base.indexOf('(') > -1) {\n            base = base.substr(base.indexOf('(')+1);\n            base = base.substr(0,base.indexOf(')'));\n            parts = base.split('//')\n            parts = _.map(parts, (p)=> (p.startsWith(outletName + ':') ? newPath : p));\n        }\n        if (parts.indexOf(newPath) === -1) {\n            parts.push(newPath);\n        }\n        return '/('+ _.join(parts,'//') + ')';\n    };\n\n    const getState = function (state) {\n        let newState;\n        if (state) {\n            newState = baseHistory.location.state ? baseHistory.location.state : {};\n            newState['router_' + outletName] = state;\n        } else if (baseHistory.location.state) {\n            newState = baseHistory.location.state;\n            delete newState['router_' + outletName]\n        }\n        return newState;\n    };\n\n    const extractPath = function(base) {\n        if (base.indexOf('(') > -1) {\n            base = base.substr(base.indexOf('(') + 1);\n            base = base.substr(0, base.indexOf(')'));\n            let parts = base.split('//')\n            let s = outletName + ':';\n            let part = _.find(parts, (p)=> (p.startsWith(s)));\n            if (part) {\n                return part.substr(s.length)\n            }\n        }\n        return '';\n    };\n\n    let initialLocation = _.clone(baseHistory.location);\n    initialLocation.pathname = extractPath(initialLocation.pathname);\n\n    let listeners = [];\n\n    const history = {\n        length: baseHistory.length,\n        action: baseHistory.action,\n        location: initialLocation,\n        createHref: (location) => {\n            return baseHistory.createHref({pathname:getPath(location.pathname)});\n        },\n        push: (path, state) => {\n            return baseHistory.push(getPath(path),getState(state));\n        },\n        replace: (path, state) => {\n            baseHistory.replace(getPath(path),getState(state));\n        },\n        go: (n) => {\n            baseHistory.go(n)\n        },\n        goBack: () => {\n            baseHistory.goBack()\n        },\n        goForward: () => {\n            baseHistory.goForward()\n        },\n        block:(prompt) => {\n            return baseHistory.block(prompt)\n        },\n        listen: (listener) => {\n            listeners.push(listener);\n            return () => {\n                _.pull(listeners, listener);\n            }\n        },\n        dispose: () => {\n            unlisten();\n        }\n    };\n\n    const unlisten = baseHistory.listen( (event) => {\n        let path = extractPath(event.pathname);\n        let state;\n        if (event.state && event.state['router_' + outletName]) {\n            state = event.state['router_' + outletName];\n        }\n        if (history.location.pathname !== path || history.location.state !== state) {\n            Object.assign(history.location, event);\n            history.location.pathname = path;\n            history.location.state = state;\n            _.each(listeners, (listener) => listener.call(this,history.location))\n        }\n    });\n\n    // unlisten when not used anymore !\n\n    return history\n}\n\nexport { createOutletHistory }","import React from 'react';\n\nimport {createHashHistory} from \"history\";\nimport {createOutletHistory} from \"./createOutletHistory\"\nimport {Router} from 'react-router'\n\nclass OutletRouter extends React.Component {\n\n    constructor(props) {\n        super(props);\n        let baseHistory = createHashHistory();\n        this.outletHistory = createOutletHistory(baseHistory, props.outlet);\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentWillUnmount() {\n        this.outletHistory.dispose();\n    }\n\n    render() {\n        return (<Router history={this.outletHistory}>{this.props.children}</Router>)\n    }\n}\n\nexport { OutletRouter };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Component } from \"react\";\nimport {Snackbar} from \"material-ui\";\n\nclass NotificationProvider extends Component {\n    constructor(props) {\n        super(props);\n\n        let {notificationContext} = this.props;\n\n        this.state = {\n            notification: {\n                message: \"\",\n                open: false\n            }\n        };\n\n        notificationContext.notify = (message) => {\n            this.setState({\n                notification: {\n                    message: message,\n                    open:true\n                }\n            });\n        };\n\n        notificationContext.closeNotification = () => {\n            this.setState({\n                notification: {\n                    message: '',\n                    open: false\n                }\n            });\n        };\n    }\n\n    getChildContext() {\n        return {\n            notificationContext: this.props.notificationContext\n        };\n    }\n\n    render() {\n        // TODO make it configurable\n        return <div>\n            {this.props.children}\n\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                autoHideDuration={5000}\n                onClose={this.props.notificationContext.closeNotification}\n                open={this.state.notification.open}\n                SnackbarContentProps={{\n                    'aria-describedby': 'message-id',\n                }}\n                message={<span id=\"message-id\">{this.state.notification.message}</span>}\n            />\n        </div>;\n    }\n}\n\nNotificationProvider.propTypes = {\n    notificationContext: PropTypes.object.isRequired\n};\n\nNotificationProvider.childContextTypes = {\n    notificationContext: PropTypes.object.isRequired\n};\n\nexport {NotificationProvider}","import React from 'react';\nimport {MuiThemeProvider} from 'material-ui';\nimport {createGenerateClassName} from 'material-ui/styles/index';\nimport {getI18n} from \"../i18n/getI18n\";\nimport {store} from '../reduxStore';\nimport {theme} from '../theme'\nimport {client} from '@jahia/apollo-dx';\nimport {ApolloProvider} from 'react-apollo';\nimport {Provider} from 'react-redux'\nimport {I18nextProvider} from 'react-i18next'\nimport {HashRouter} from 'react-router-dom'\nimport {OutletRouter} from '../router'\nimport PropTypes from 'prop-types';\nimport { SheetsRegistry, JssProvider } from 'react-jss';\nimport {NotificationProvider} from \"../notification/NotificationProvider\";\n\nimport * as _ from \"lodash\";\n\nclass DxContextProvider extends React.Component {\n    constructor(props) {\n        super(props);\n        let {dxContext, children, i18n, apollo, redux, mui, router, apolloClient} = this.props;\n        let state = {};\n        if (mui) {\n            if (typeof mui === 'object') {\n                state.currentTheme = mui;\n            } else {\n                state.currentTheme = theme;\n            }\n            dxContext.setTheme = (theme) => {\n                // theTheme = _.merge({}, theme, this.state.theme);\n                this.setState({\n                    currentTheme: theme\n                });\n            };\n        }\n\n        if (dxContext.apolloClient) {\n            state.apolloClient = dxContext.apolloClient;\n        } else if (apolloClient) {\n            state.apolloClient = apolloClient;\n        } else if (apollo) {\n            let options = {contextPath:dxContext.contextPath};\n            if (typeof apollo === 'object') {\n                Object.assign(options, apollo)\n            }\n            state.apolloClient = client(options);\n        }\n\n        this.state = state;\n    }\n\n    getChildContext() {\n        return {dxContext: this.props.dxContext};\n    }\n\n    render() {\n        let {dxContext, children, i18n, apollo, redux, mui, router} = this.props;\n        let {currentTheme, apolloClient} = this.state;\n\n        let Component = React.Children.only(children);\n        if (i18n) {\n            let options = {currentLanguage:dxContext.uilang, contextPath:dxContext.contextPath};\n            if (typeof i18n === 'object') {\n                Object.assign(options, i18n)\n            }\n            Component = React.createElement(I18nextProvider, {i18n:getI18n(options)}, Component);\n        }\n        if (router) {\n            let router = HashRouter;\n            let options = {};\n            if (typeof router === 'object') {\n                if (router.type === 'outlet') {\n                    router = OutletRouter;\n                    options.outlet = router.outlet;\n                }\n            }\n            Component = React.createElement(HashRouter, options, Component);\n        }\n        if (apolloClient) {\n            Component = React.createElement(ApolloProvider, {client:apolloClient}, Component);\n        }\n        if (redux) {\n            Component = React.createElement(Provider, {store:store}, Component);\n        }\n\n        if (currentTheme) {\n            let generateClassName = dxContext.generateClassName ? dxContext.generateClassName : createGenerateClassName();\n            let sheetsRegistry = dxContext.sheetRegistry ? dxContext.sheetRegistry : new SheetsRegistry();\n            Component = React.createElement(JssProvider, {registry: sheetsRegistry,  generateClassName:generateClassName}, React.createElement(MuiThemeProvider, {theme: currentTheme, sheetsManager:new Map()}, Component));\n            // } else {\n            //     Component = React.createElement(MuiThemeProvider, {theme: currentTheme}, Component);\n            // }\n\n            // add notification\n            Component = React.createElement(NotificationProvider, {notificationContext:{}}, Component);\n        }\n\n        return Component;\n    }\n}\n\nDxContextProvider.childContextTypes = {\n    dxContext: PropTypes.object\n};\n\nexport {DxContextProvider}","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction withDxContext() {\n    return (WrappedComponent) => {\n        let Component = class extends React.Component {\n            render() {\n                return (<WrappedComponent dxContext={this.context.dxContext} {...this.props} />)\n            }\n        }\n\n        Component.contextTypes = {\n            dxContext: PropTypes.object\n        };\n\n        return Component\n    }\n}\n\nexport { withDxContext }","import React from 'react';\nimport {Button, Menu, MenuItem} from 'material-ui';\nimport {translate} from 'react-i18next';\nimport PropTypes from 'prop-types';\n\nclass LanguageSwitcher extends React.Component {\n\n    constructor(props,context) {\n        super(props,context);\n        this.state = {\n            anchorEl: null,\n        };\n    }\n\n    handleClick(event) {\n        this.setState({anchorEl: event.target});\n    }\n\n    handleClose(lang) {\n        this.setState({anchorEl: null});\n        if (lang) {\n            this.context.i18n.changeLanguage(lang);\n        }\n    };\n\n    render() {\n        let availableLocales = ['fr', 'en'];\n\n        return (<div>\n            <Button onClick={this.handleClick.bind(this)}\n            >{this.props.t('label.languages')}</Button>\n            <Menu open={Boolean(this.state.anchorEl)} onClose={this.handleClose.bind(this, null)}\n                  anchorEl={this.state.anchorEl}>\n                {availableLocales.map((locale) => (\n                    <MenuItem onClick={this.handleClose.bind(this, locale)} key={locale}\n                              value={locale}>{locale}</MenuItem>))}\n            </Menu>\n        </div>);\n    }\n}\n\nLanguageSwitcher.contextTypes = {\n    i18n: PropTypes.object\n};\n\nLanguageSwitcher = translate('react-dxcomponents')(LanguageSwitcher);\n\n\nexport {LanguageSwitcher}\n","import React from 'react';\nimport {AppBar, Toolbar, Typography, withStyles} from 'material-ui';\nimport PropTypes from 'prop-types';\n\nconst styles = theme => ({\n    root: {\n        backgroundColor: theme.palette.background.global\n    },\n    main: {\n        minHeight: 'calc(100% - 96px)',\n        marginTop: 64,\n        padding: 1\n    },\n    footer: {\n        fontSize: '14px',\n        fontFamily: theme.typography.fontFamily,\n        fontWeight: 300,\n        padding: \"8px\",\n        textAlign: \"center\",\n        color: theme.palette.text.secondary\n    },\n    appBar: {\n        transition: \"all 200ms ease-in-out\"\n    }\n});\n\n\nclass SettingsLayout extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let { classes, appBar, children, footer, appBarStyle } = this.props;\n        return (\n            <section className={classes.root} >\n                <AppBar position=\"fixed\" classes={{root:classes.appBar}} style={appBarStyle}>\n                    {appBar}\n                </AppBar>\n                <section className={classes.main}>\n                    {children}\n                </section>\n                <footer className={classes.footer}>\n                    {footer}\n                </footer>\n            </section>\n        );\n    }\n}\n\n\nSettingsLayout.propTypes = {\n    appBar: PropTypes.element,\n    footer: PropTypes.string\n};\n\nSettingsLayout = withStyles(styles)(SettingsLayout);\n\nexport {SettingsLayout};","import React from 'react';\nimport {Input, InputAdornment, withStyles} from 'material-ui';\nimport {Search} from 'material-ui-icons';\nimport {translate} from 'react-i18next';\n\nconst styles = theme => ({\n    root: {\n        margin: '0',\n        color : 'inherit',\n        backgroundColor : theme.palette.primary.light,\n        width: '720px',\n        height: '44px',\n        lineHeight: '40px',\n        borderRadius: '3px',\n        fontWeight: '200'\n    },\n    rootFocus: {\n        margin: '0',\n        color: theme.palette.text.secondary,\n        backgroundColor : '#fff',\n        width: '720px',\n        height: '44px',\n        lineHeight: '40px',\n        borderRadius: '3px',\n        fontWeight: '100',\n        boxShadow: \"0 1px 8px 0 rgba(0, 0, 0, 0.4)\",\n        // '& $input': {\n        //     width: '300px'\n        // }\n    },\n    input: {\n        transitionProperty: 'width',\n        transitionDuration: '300ms',\n        transitionTimingFunction: 'cubic-bezier(0.4, 0, 0.2, 1)',\n        transitionDelay: '0ms',\n\n    },\n    searchIcon: {\n        'marginTop': 'auto',\n        'marginBottom': 'auto',\n        'paddingLeft': '14px',\n        'opacity': '0.87'\n    }\n});\n\nclass SearchBar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.onFocus = this.onFocus.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        this.state = {\n            focus: false\n        }\n    }\n\n    handleChange(event) {\n        // Let the handler deal with the change only when the user has paused changing the filter text for a second.\n        event.persist();\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n        }\n        this.timeout = setTimeout(function() {\n            this.props.onChangeFilter(event.target.value)\n        }.bind(this), 1000);\n    }\n\n    onFocus() {\n        this.setState({\n            focus: true\n        });\n        this.props.onFocus();\n    }\n\n    onBlur() {\n        this.setState({\n            focus: false\n        });\n        this.props.onBlur();\n    }\n\n    render() {\n\n        const { classes,t, placeholderLabel } = this.props;\n\n        return (\n            <Input classes={{root: (this.state.focus ? classes.rootFocus : classes.root), input: classes.input}}\n                   onChange={this.handleChange}\n                   onBlur={this.onBlur}\n                   onFocus={this.onFocus}\n                   disableUnderline={true}\n                   type=\"text\"\n                   placeholder={placeholderLabel || t('label.searchPlaceholder')}\n                   startAdornment={<InputAdornment classes={{root: classes.searchIcon}} position=\"start\"><Search/></InputAdornment>}\n                   style={this.props.style}\n            />\n        )\n    }\n}\n\nSearchBar = withStyles(styles)(translate('react-dxcomponents')(SearchBar));\n\nexport {SearchBar};","import React from 'react';\nimport {graphql} from 'react-apollo';\nimport gql from \"graphql-tag\";\nimport * as _ from \"lodash\";\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\n\nfunction withNodeFromPath(fragments) {\n    return (ViewComponent) => {\n        // GraphQL maps\n        let mapResultsToProps = ({data, ownProps}) => {\n            let node;\n\n            if (data.jcr && data.jcr.node) {\n                node = data.jcr.node;\n            }\n\n            return {\n                ...ownProps,\n                node: node,\n            };\n        };\n\n        let mapPropsToOptions = (props) => {\n            let vars = {\n                path: props.path,\n                workspace: props.workspace ? props.workspace : 'EDIT'\n            };\n            if (props.queryVariables) {\n                _.assign(vars, props.queryVariables);\n            }\n\n            return {\n                variables: vars,\n                skip: !props.path\n            }\n        };\n\n        let query = gql`\n            query NodeQuery($path:String!, $workspace:Workspace!) {\n                jcr(workspace:$workspace) {\n                    workspace\n                    node:nodeByPath(path: $path) {\n                        workspace\n                        path\n                        uuid\n                        ... node\n                    }\n                }\n            }`;\n\n        replaceFragmentsInDocument(query, fragments);\n\n        return graphql(query, {\n            props: mapResultsToProps,\n            options: mapPropsToOptions\n        })(ViewComponent);\n    }\n}\n\nexport {withNodeFromPath};\n","import React from 'react';\nimport {graphql} from 'react-apollo';\nimport gql from \"graphql-tag\";\nimport * as _ from \"lodash\";\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\n\nfunction withNodesFromPath(fragments) {\n    return (ViewComponent) => {\n        // GraphQL maps\n        let mapResultsToProps = ({data, ownProps}) => {\n            let nodes = [];\n\n            let jcr = data.jcr;\n\n            if (jcr) {\n                if (jcr.node) {\n                    nodes = jcr.node.children.nodes;\n                }\n            }\n\n            return {\n                ...ownProps,\n                nodes: nodes,\n            };\n        };\n\n        let mapPropsToOptions = (props) => {\n            let vars = {\n                path: props.path,\n                types: props.types,\n            };\n            if (props.queryVariables) {\n                _.assign(vars, props.queryVariables);\n            }\n\n            return {\n                variables: vars,\n                skip: !props.path\n            }\n        };\n\n        let query = gql`\n            query NodesQuery($path:String!, $types:[String]!) {\n                jcr {\n                    node:nodeByPath(path: $path) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }`;\n\n        replaceFragmentsInDocument(query, fragments);\n\n        return graphql(query, {\n            props: mapResultsToProps,\n            options: mapPropsToOptions\n        })(ViewComponent);\n    }\n}\n\nexport {withNodesFromPath};\n","import React from 'react';\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\nimport {connect} from 'react-redux'\n\nfunction withPathFromSelection(reduxStoreId) {\n    return (WrappedComponent) => {\n        return connect(\n            (state, ownProps) => ({\n                ...ownProps,\n                path: (state[\"selectedPaths_\" + reduxStoreId] && state[\"selectedPaths_\" + reduxStoreId].length === 1) ? state[\"selectedPaths_\" + reduxStoreId][0] : null,\n            }),\n            () => ({}))(WrappedComponent);\n    }\n}\n\nexport { withPathFromSelection }","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction withNotifications() {\n    return (WrappedComponent) => {\n        let Component = class extends React.Component {\n            render() {\n                return (<WrappedComponent notificationContext={this.context.notificationContext} {...this.props} />)\n            }\n        };\n\n        Component.contextTypes = {\n            notificationContext: PropTypes.object\n        };\n\n        return Component\n    }\n}\n\nexport { withNotifications }","import React from 'react';\nimport {\n    IconButton,\n    List,\n    ListItem,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    SvgIcon,\n    withStyles,\n    withTheme\n} from 'material-ui';\nimport {ExpandLess, ExpandMore} from 'material-ui-icons'\nimport PropTypes from 'prop-types';\nimport {fade} from 'material-ui/styles/colorManipulator'\n\n\nlet styles = (theme) => ({\n    root: {},\n    padding: {\n        paddingTop:0,\n        paddingBottom:0\n    },\n    selected: {\n        backgroundColor: theme.palette.secondary.light,\n        '&:hover': {\n            backgroundColor: fade(theme.palette.secondary.light, 0.7)\n        }\n    },\n    selectedText: {\n        color: theme.palette.secondary.contrastText\n    }\n});\n\nlet PickerViewMaterial = function (props) {\n    let {theme, classes, pickerEntries, onOpenItem, onSelectItem, textRenderer, iconRenderer} = props;\n    return (<List classes={{root:classes.root, padding:classes.padding}}>\n        {pickerEntries.map((entry) =>\n            (<ListItem button\n                       onClick={() => entry.selectable ? onSelectItem(entry.path, !entry.selected) : onOpenItem(entry.path, !entry.open)}\n                       key={entry.path}\n                       divider={true}\n                       classes={entry.selected ? {root:classes.selected} : {} }\n                >\n                    <ListItemIcon classes={entry.selected ? {root:classes.selectedText} : {}}>\n                        {entry.openable && entry.hasChildren ? (\n                            <IconButton onClick={(event) => {onOpenItem(entry.path, !entry.open); event.stopPropagation()}}>{entry.open ?\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : <ExpandMore style={{opacity:0}}/>}\n                    </ListItemIcon>\n\n                    <ListItemIcon classes={entry.selected ? {root:classes.selectedText} : {}}\n                                                    style={{paddingLeft: entry.depth * theme.spacing.unit}}>\n                        { iconRenderer && iconRenderer.call(this,entry) }\n                    </ListItemIcon>\n\n                    <ListItemText classes={entry.selected ? {primary:classes.selectedText} : {}} inset\n                                  primary={textRenderer ? textRenderer.call(this, entry) : entry.name} />\n                </ListItem>\n            )\n        )}\n    </List>)\n};\n\nPickerViewMaterial.propTypes = {\n    pickerEntries: PropTypes.array.isRequired,\n    onSelectItem: PropTypes.func,\n    onOpenItem: PropTypes.func,\n    textRenderer: PropTypes.func\n};\n\nPickerViewMaterial = withTheme()(withStyles(styles)(PickerViewMaterial));\n\nexport {PickerViewMaterial};","import React from 'react';\nimport {IconButton, List, ListItem, ListItemIcon, ListItemSecondaryAction, ListItemText, withTheme} from 'material-ui';\nimport {ExpandLess, ExpandMore, CheckBoxOutlineBlank, CheckBox} from 'material-ui-icons'\nimport PropTypes from 'prop-types';\n\nlet PickerViewMaterialMultiple = function (props) {\n    return (<List>\n        {props.pickerEntries.map((entry) =>\n            (<ListItem button\n                       onClick={() => entry.selectable ? props.onSelectItem(entry.path, !entry.selected, true) : props.onOpenItem(entry.path, !entry.open)}\n                       key={entry.path}\n                >\n                    <ListItemIcon style={entry.selectable ? {} : {opacity: 0}}>{entry.selected ? <CheckBox/> :\n                        <CheckBoxOutlineBlank/>}</ListItemIcon>\n                    <ListItemText style={{paddingLeft: entry.depth * props.theme.spacing.unit}} inset\n                                  primary={props['textRenderer'] ? props['textRenderer'].call(this, entry) : entry.name} />\n                    <ListItemSecondaryAction>\n                        {entry.openable && entry.hasChildren ? (\n                            <IconButton onClick={() => props.onOpenItem(entry.path, !entry.open)}>{entry.open ?\n                                <ExpandLess/> : <ExpandMore/>}</IconButton>) : null}\n                    </ListItemSecondaryAction>\n                </ListItem>\n            )\n        )}\n    </List>)\n};\n\nPickerViewMaterialMultiple.propTypes = {\n    pickerEntries: PropTypes.array.isRequired,\n    onSelectItem:  PropTypes.func,\n    onOpenItem: PropTypes.func,\n    textRenderer: PropTypes.func,\n};\n\nPickerViewMaterialMultiple = withTheme()(PickerViewMaterialMultiple);\n\nexport { PickerViewMaterialMultiple };","import React from 'react';\nimport {graphql} from 'react-apollo';\nimport gql from \"graphql-tag\";\nimport * as _ from \"lodash\";\nimport {replaceFragmentsInDocument} from \"@jahia/apollo-dx\";\nimport PropTypes from 'prop-types';\n\nclass Picker extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let query = gql`\n            query PickerQuery($rootPaths:[String!]!, $selectable:[String]!, $openable:[String]!, $openPaths:[String!]!, $types:[String]!) {\n                jcr {\n                    rootNodes:nodesByPath(paths: $rootPaths) {\n                        path\n                        uuid\n                        name\n                        children(typesFilter:{types:$types}, limit:1) {\n                            pageInfo {\n                                totalCount\n                            }\n                        }\n                        selectable : isNodeType(type: {types:$selectable})\n                        openable : isNodeType(type: {types:$openable})\n                        ... node\n                    },\n                    openNodes:nodesByPath(paths: $openPaths) {\n                        path\n                        uuid\n                        children(typesFilter:{types:$types}) {\n                            nodes {\n                                path\n                                uuid\n                                name\n                                children(typesFilter:{types:$types}, limit:1) {\n                                    pageInfo {\n                                        totalCount\n                                    }\n                                }\n                                selectable : isNodeType(type: {types:$selectable})\n                                openable : isNodeType(type: {types:$openable})\n                                ... node\n                            }\n                        }\n                    }\n                }\n            }`;\n\n        let { fragments, ...graphqlComponentProps } = props;\n\n        replaceFragmentsInDocument(query, fragments);\n\n        this.graphqlComponentProps = graphqlComponentProps;\n\n        let state = {};\n        let that = this;\n        if (!props.openPaths) {\n            state.openPaths = props.defaultOpenPaths ? _.clone(props.defaultOpenPaths) : [];\n            graphqlComponentProps.onOpenItem = (path,open) => {\n                that.setState( (prevState, props) => ({\n                    openPaths: open ? [\n                        ...prevState.openPaths,\n                        path\n                    ] : _.filter(prevState.openPaths, (thispath) => thispath !== path)\n                }));\n                if (props.onOpenItem) {\n                    props.onOpenItem(path,open);\n                }\n            }\n        }\n\n        if (!props.selectedPaths) {\n            state.selectedPaths = props.defaultSelectedPaths ? _.clone(props.defaultSelectedPaths) :  [];\n            graphqlComponentProps.onSelectItem = (path,selected,multiple) => {\n                that.setState((prevState, props)=> ({\n                    selectedPaths: selected ? [\n                        ...(multiple ? prevState.selectedPaths : []),\n                            path\n                        ] : _.filter(prevState.selectedPaths, (thispath) => thispath !== path)\n                }));\n                if (props.onSelectItem) {\n                    props.onSelectItem(path,select,multiple);\n                }\n            }\n        }\n        this.state = state;\n\n        this.GraphQLComponent = graphql(query, {\n            props: this.mapResultsToProps,\n            options: this.mapPropsToOptions\n        })(this.props.render);\n    }\n\n    componentDidUpdate(prevProps, prevState, prevContext) {\n        if (this.props.onSelectionChange && !_.isEqual(this.state.selectedPaths,prevState.selectedPaths)) {\n            this.props.onSelectionChange(this.state.selectedPaths);\n        }\n    }\n\n    componentWillReceiveProps(nextProps, nextState) {\n        let { fragments, onOpenItem, onSelectItem, ...graphqlComponentProps } = nextProps;\n        _.assign(this.graphqlComponentProps, graphqlComponentProps);\n    }\n\n    mapResultsToProps({data, ownProps}) {\n        let selectedPaths = ownProps.selectedPaths;\n        let openPaths = ownProps.openPaths ? ownProps.openPaths : [];\n\n        let pickerEntries = [];\n        let nodesById = {};\n        let jcr = data.jcr;\n\n        let addNode = function (node, depth, index) {\n            let selected = false;\n            if (node.selectable) {\n                selected = _.indexOf(selectedPaths, node.path) !== -1\n            }\n            let pickerNode = {\n                name: node.name,\n                path: node.path,\n                open: node.openable && _.indexOf(openPaths, node.path) !== -1,\n                selected: selected,\n                openable: node.openable,\n                selectable: node.selectable,\n                depth: depth,\n                prefix: _.repeat(\"&nbsp;\", depth * 3),\n                node: node,\n                hidden: false,\n                hasChildren: node.children.pageInfo.totalCount > 0\n            };\n            pickerEntries.splice(index, 0, pickerNode);\n            nodesById[node.uuid] = pickerNode;\n            return pickerNode;\n        };\n\n        if (jcr) {\n            if (jcr.rootNodes) {\n                _.forEach(jcr.rootNodes, rootNode => {\n                    let root = addNode(rootNode, 0, 0);\n                    root.hidden = ownProps.hideRoot;\n                });\n            }\n            if (jcr.openNodes) {\n                _.sortBy(jcr.openNodes, ['path']).forEach((node) => {\n                    let parent = nodesById[node.uuid];\n                    if (parent) {\n                        let parentIndex = _.indexOf(pickerEntries, parent);\n                        _.forEachRight(node.children.nodes, (child) => {\n                            addNode(child, parent.depth + 1, parentIndex + 1)\n                        })\n                    }\n                });\n            }\n        }\n\n        // Nodes loaded, fill selection list\n        let selectedNodes = _.filter(pickerEntries, (node) => {\n            return node.selected\n        }).map((node) => {\n            return node.node\n        });\n\n        selectedPaths = _.map(selectedNodes, \"path\");\n        pickerEntries = _.filter(pickerEntries, pickerNode => {\n            return !pickerNode.hidden;\n        });\n\n        return {\n            ...ownProps,\n            pickerEntries: pickerEntries,\n        };\n    }\n\n    mapPropsToOptions(props) {\n        let openPaths = props.openPaths ? props.openPaths : [];\n\n        let fullyOpenPath = (props, path) => {\n            let rootFound = false;\n            _.tail(_.split(path, \"/\")).reduce((acc, it) => {\n                if (!rootFound) {\n                    _.forEach(props.rootPaths, rootPath => {\n                        rootFound = rootFound || _.startsWith(acc, rootPath);\n                    })\n                }\n                if (rootFound && _.indexOf(openPaths, acc) === -1) {\n                    openPaths.push(acc);\n                }\n                return acc + \"/\" + it\n            }, \"\");\n        };\n\n        if (props.selectedPaths) {\n            _.each(props.selectedPaths, path => fullyOpenPath(props, path));\n        }\n\n        let vars = {\n            rootPaths: props.rootPaths,\n            types: _.union(props.openableTypes, props.selectableTypes),\n            selectable: props.selectableTypes,\n            openable: props.openableTypes,\n            openPaths: openPaths,\n        };\n\n        if (props.queryVariables) {\n            _.assign(vars, props.queryVariables);\n        }\n\n        return {\n            variables: vars\n        }\n    }\n\n    render() {\n        let GraphQLComponent = this.GraphQLComponent;\n\n        return <GraphQLComponent {...this.graphqlComponentProps} {...this.state} />\n    }\n}\n\nPicker.propTypes = {\n    /**\n     * List of root paths for the picker\n     */\n    rootPaths: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n    /**\n     * List of folder paths that are open by default (uncontrolled mode)\n     */\n    defaultOpenPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * List of node types that can be \"opened\" (folders)\n     */\n    openableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n    /**\n     * List of open folders in controlled mode\n     */\n    openPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * List of node types that can be \"selected\" (items)\n     */\n    selectableTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n    /**\n     * Preselected items path (uncontrolled mode)\n     */\n    defaultSelectedPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * List of selected path in controlled mode\n     */\n    selectedPaths: PropTypes.arrayOf(PropTypes.string),\n\n    /**\n     * Callback when the selection has changed\n     */\n    onSelectionChange: PropTypes.func,\n\n    /**\n     * Component to use to do the full rendering of the tree. Should accept : pickerEntries,onSelectItem,onOpenItem . Other properties are passed through.\n     */\n    render: PropTypes.func,\n\n    /**\n     * Optional set of fragments to add to the graphQL query. Can be a string that identify a predefinedFragment or a fragment definition\n     */\n    fragments: PropTypes.arrayOf(PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.shape({\n            applyFor: PropTypes.string.isRequired,\n            variables: PropTypes.string,\n            gql: PropTypes.object.isRequired\n        })\n    ])),\n\n    /**\n     * Optional set of variable to pass to the graphQL query, in order to fulfill fragments needs\n     */\n    queryVariables: PropTypes.object\n\n};\n\n\nexport {Picker}"],"names":["getI18n","options","use","XHR","init","currentLanguage","undefined","contextPath","i18n","reducers","store","debugTool","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","state","action","_","value","key","resetStateReducer","type","theme","createMuiTheme","grey","blueGrey","lightBlue","red","deepOrange","green","darkTheme","purple","ThemeTester","props","switch","bind","themes","setState","previous","dxContext","setTheme","checked","React","Switch","Component","withDxContext","createOutletHistory","baseHistory","outletName","getPath","path","parts","base","location","pathname","newPath","indexOf","substr","split","p","startsWith","push","getState","newState","extractPath","s","part","length","initialLocation","listeners","history","createHref","replace","n","go","goBack","goForward","prompt","block","listener","unlisten","listen","event","assign","call","OutletRouter","createHashHistory","outletHistory","outlet","dispose","children","NotificationProvider","notificationContext","notify","message","closeNotification","Snackbar","notification","open","propTypes","PropTypes","object","isRequired","childContextTypes","DxContextProvider","apollo","redux","mui","router","apolloClient","currentTheme","client","Children","only","uilang","createElement","I18nextProvider","HashRouter","ApolloProvider","Provider","generateClassName","createGenerateClassName","sheetsRegistry","sheetRegistry","SheetsRegistry","JssProvider","registry","MuiThemeProvider","sheetsManager","Map","WrappedComponent","context","contextTypes","LanguageSwitcher","anchorEl","target","lang","changeLanguage","availableLocales","handleClick","t","Boolean","handleClose","map","locale","translate","styles","palette","background","global","typography","fontFamily","text","secondary","SettingsLayout","classes","appBar","footer","appBarStyle","root","main","element","string","withStyles","primary","light","SearchBar","handleChange","onFocus","onBlur","persist","timeout","setTimeout","onChangeFilter","placeholderLabel","Input","focus","rootFocus","input","searchIcon","Search","style","withNodeFromPath","fragments","ViewComponent","mapResultsToProps","data","ownProps","node","jcr","mapPropsToOptions","vars","workspace","queryVariables","query","gql","graphql","withNodesFromPath","nodes","types","withPathFromSelection","reduxStoreId","connect","withNotifications","fade","contrastText","PickerViewMaterial","pickerEntries","onOpenItem","onSelectItem","textRenderer","iconRenderer","padding","entry","selectable","selected","selectedText","openable","hasChildren","stopPropagation","ExpandLess","ExpandMore","opacity","paddingLeft","depth","spacing","unit","ListItemText","name","array","func","withTheme","PickerViewMaterialMultiple","CheckBox","CheckBoxOutlineBlank","Picker","graphqlComponentProps","that","openPaths","defaultOpenPaths","prevState","thispath","selectedPaths","defaultSelectedPaths","multiple","select","GraphQLComponent","render","prevProps","prevContext","onSelectionChange","nextProps","nextState","nodesById","addNode","index","pickerNode","pageInfo","totalCount","splice","uuid","rootNodes","rootNode","hidden","hideRoot","openNodes","forEach","parent","parentIndex","child","selectedNodes","fullyOpenPath","rootFound","reduce","acc","it","rootPaths","rootPath","openableTypes","selectableTypes","arrayOf","oneOfType","shape"],"mappings":"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"}